<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>CapÃ­tulo 7 ManipulaÃ§Ã£o de dados | Software R para avaliaÃ§Ã£o de dados experimentais</title>
<meta name="author" content="Tiago Olivoto, Bruno Giacomini Sari">
<!-- CSS --><!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.5/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.2/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.2/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.1.9000/tabs.js"></script><script src="libs/bs3compat-0.2.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.14/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><script src="libs/jszip-1.10.20/jszip.min.js"></script><link href="libs/dt-ext-buttons-1.10.20/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-buttons-1.10.20/js/dataTables.buttons.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.flash.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.html5.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.colVis.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.print.min.js"></script><link href="libs/dt-ext-fixedcolumns-1.10.20/css/fixedColumns.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-fixedcolumns-1.10.20/js/dataTables.fixedColumns.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Um foco em experimentos agronÃ´micos">Software R para avaliaÃ§Ã£o de dados experimentais</a>:
        <small class="text-muted">Um foco em experimentos agronÃ´micos</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefácio</a></li>
<li><a class="" href="sobre-os-autores.html">Sobre os autores</a></li>
<li><a class="" href="detalhes-importantes.html">Detalhes importantes</a></li>
<li class="book-part">Parte I o ambiente R</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introdução ao ambiente R</a></li>
<li><a class="" href="objects.html"><span class="header-section-number">2</span> Tipos de objetos</a></li>
<li><a class="" href="math.html"><span class="header-section-number">3</span> Operações matemáticas</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">4</span> Loops</a></li>
<li><a class="" href="dataframe.html"><span class="header-section-number">5</span> Construindo uma tabela</a></li>
<li class="book-part">Parte II organização, manipulação e apresentação de dados</li>
<li><a class="" href="entrada.html"><span class="header-section-number">6</span> Entrada de dados</a></li>
<li><a class="active" href="manipula.html"><span class="header-section-number">7</span> Manipulação de dados</a></li>
<li><a class="" href="graph.html"><span class="header-section-number">8</span> Gráficos com o pacote ggplot2</a></li>
<li><a class="" href="exporta.html"><span class="header-section-number">9</span> Exportando dados</a></li>
<li class="book-part">Parte III análise de dados</li>
<li><a class="" href="analdata.html"><span class="header-section-number">10</span> Análise de dados experimentais</a></li>
<li><a class="" href="reg.html"><span class="header-section-number">11</span> Análise de regressão</a></li>
<li><a class="" href="relations.html"><span class="header-section-number">12</span> Relações lineares entre variáveis</a></li>
<li><a class="" href="multivariate.html"><span class="header-section-number">13</span> Análise multivariada</a></li>
<li><a class="" href="interaction.html"><span class="header-section-number">14</span> Interação genótipo-vs-ambiente</a></li>
<li class="book-part">Apêndices</li>
<li><a class="" href="resposta-dos-exerc%C3%ADcios.html"><span class="header-section-number">A</span> Resposta dos exercícios</a></li>
<li><a class="" href="tabela-de-distribui%C3%A7%C3%B5es.html">Tabela de distribuições</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/TiagoOlivoto/e-bookr">View book source</a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="manipula" class="section level1" number="7">
<h1>
<span class="header-section-number">CapÃ­tulo 7</span> ManipulaÃ§Ã£o de dados<a class="anchor" aria-label="anchor" href="#manipula"><i class="fas fa-link"></i></a>
</h1>
<p>ApÃ³s seus dados estarem carregados no ambiente R, eles provavelmente necessitarÃ£o de alguma manimulaÃ§Ã£o antes de serem utilizados em uma determinada anÃ¡lise. Esta manipulaÃ§Ã£o pode envolver operaÃ§Ãµes como exclusÃ£o de colunas, ordenamento de linhas com base em valores, criaÃ§Ã£o de covariÃ¡veis (que serÃ£o resultado de operaÃ§Ãµes com uma ou mais variÃ¡veis existentes), dentre muitas outras possibilidades. Felizmente, o pacote <strong>dplyr</strong>  permite que esta manimulaÃ§Ã£o seja relativamente fÃ¡cil, lÃ³gica (do ponto de vista de digitaÃ§Ã£o de cÃ³digos) e rÃ¡pida, pois ele integra a linguagem <code>C++</code> em suas funÃ§Ãµes.</p>
<p>O pacote <strong>dplyr</strong> Ã© uma <em>gramÃ¡tica</em> de manipulaÃ§Ã£o de dados. Nos rerferimos Ã  <em>gramÃ¡tica</em> aqui porque ele fornece funÃ§Ãµes nomeadas como <em>verbos</em> simples, relacionados Ã s tarefas mais comuns de manipulaÃ§Ã£o de dados, para ajudÃ¡-lo a traduzir seus pensamentos em cÃ³digo. Este serÃ¡ o pacote utilizado para manipulaÃ§Ã£o dos dados no decorrer deste material. De fato, a maioria dos dados em R podem ser manipulados utilizando os seguintes â€œverbosâ€.</p>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> para selecionar linhas com base em seus valores.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> para reordenar as linhas.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> e <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> para selecionar variÃ¡veis com base em seus nomes.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> e <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">transmute()</a></code> para adicionar novas variÃ¡veis que sÃ£o funÃ§Ãµes de variÃ¡veis existentes.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> para resumir vÃ¡rios valores para um Ãºnico valor.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n()</a></code> e <code><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_frac()</a></code> para obter amostras aleatÃ³rias.</li>
</ul>
<p>Anteriomente mencionamos que a manipulaÃ§Ã£o dos dados com o pacote <strong>dplyr</strong> Ã© lÃ³gica do ponto de vista da implementaÃ§Ã£o do cÃ³digo. Isto sÃ³ Ã© possivel devido a utilizaÃ§Ã£o do operador <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> (<em>forward-pipe operator</em>), importado do pacote <code>magrittr</code>. Basicamente, este operador capta o argumento resultante de uma funÃ§Ã£o Ã  sua esquerda e passa como <em>input</em> Ã  funÃ§Ã£o Ã  sua direita. NÃ£o Ã© nossso objetivo aqui discutir os benefÃ­cios da utilizaÃ§Ã£o deste operador, mas uma pequena demonstraÃ§Ã£o (com spoilers das funÃ§Ãµes do pacote dplyr) serÃ¡ apresentada. Considere as seguintes (e simples) operaÃ§Ãµes. Crie um data frame com 100 linhas com as variÃ¡veis <em>x</em> e <em>y</em> contendo valores aleatÃ³rios. Adicione uma terceira variÃ¡veis (<em>z</em>) que serÃ¡ uma funÃ§Ã£o da multiplicaÃ§Ã£o de <em>x</em> e <em>y</em>, selecione apenas os valores de <em>z</em> menores que 10 e extraia a raiz quadrada destes valores. Finalmente, compute a mÃ©dia e armazene no object <code>mean_sqrt</code>.</p>
<ul>
<li>Criando o conjunto de dados</li>
</ul>
<div class="sourceCode" id="cb46"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>,
               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></pre></div>
<ul>
<li>Utilizando as funÃ§Ãµes bases do R (cÃ³digo massivo)</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="downlit">
<span class="va">data</span><span class="op">$</span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">x</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">y</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">z</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span>
<span class="va">sqr_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">z</span><span class="op">)</span>
<span class="va">mean_sqrt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sqr_dat</span><span class="op">)</span>
<span class="va">mean_sqrt</span>
<span class="co"># [1] 1.977507</span></pre></div>
<ul>
<li>Utilizando as funÃ§Ãµes bases do R (cÃ³digo mais limpo)</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="downlit">
<span class="va">data</span><span class="op">$</span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">x</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">y</span>
<span class="va">mean_sqrt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">z</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span><span class="op">$</span><span class="va">z</span><span class="op">)</span><span class="op">)</span>
<span class="va">mean_sqrt</span>
<span class="co"># [1] 1.977507</span></pre></div>
<ul>
<li>Utilizando o operdor <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code>
</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="downlit">
<span class="va">mean_sqrt</span> <span class="op">&lt;-</span> 
  <span class="va">data</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>z <span class="op">=</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">z</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">mean_sqrt</span>
<span class="co"># [1] 1.977507</span></pre></div>
<p>A utilizaÃ§Ã£o do operador <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> parece nÃ£o trazer tantos benefÃ­cios neste exemplo, visto que objetivo aqui foi demonstrar como ele permite uma implementaÃ§Ã£o lÃ³gica das operaÃ§Ãµes realizadas, captando a saÃ­da da funÃ§Ã£o diretamente Ã  esquerda (acima neste caso) e passando para a prÃ³xima funÃ§Ã£o. Em operaÃ§Ãµes mais complexas, no entanto, o <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> se mostrarÃ¡ muito mais Ãºtil.</p>
<p>O pacote <a href="https://tiagoolivoto.github.io/metan/"><code>metan</code></a> fornece funÃ§Ãµes Ãºteis para manipulaÃ§Ã£o de dados. Duas principais categorias de funÃ§Ãµes serÃ£o utilizadas neste material:</p>
<ol style="list-style-type: decimal">
<li><a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html">UtilitÃ¡rios para lidar com linhas e colunas</a></li>
</ol>
<ul>
<li>
<code>add_cols()</code>: adiciona uma ou mais colunas a um conjunto de dados existente. Se as colunas <code>.before</code> ou <code>.after</code> especificadas nÃ£o existirem, as colunas serÃ£o anexadas no final dos dados. Retorna um conjunto de dados com todas as colunas originais em <code>.data</code> mais as colunas declaradas em <code>...</code>. Em <code>add_cols()</code>, as colunas em <code>.data</code> estÃ£o disponÃ­veis para as expressÃµes. Portanto, Ã© possÃ­vel adicionar uma coluna com base nos dados existentes.
</li>
<li>
<code>add_rows()</code>: adiciona uma ou mais linhas a um conjunto de dados existente. Se nÃ£o houver linhas especificadas <code>.before</code> ou <code>.after</code>, as linhas serÃ£o anexadas no final dos dados. Retorna um conjunto de dados com todas as linhas originais em .data mais as linhas declaradas em <code>...</code>.
</li>
<li>
<code>all_pairs()</code>: obtÃ©m todos os pares possÃ­veis entre os nÃ­veis de um fator.
</li>
<li>
<code>colnames_to_lower()</code>: converte todos os nomes de coluna para minÃºsculas.
</li>
<li>
<code>colnames_to_upper()</code>: converte todos os nomes de coluna para maiÃºsculas.
</li>
<li>
<code>colnames_to_title()</code>: converte todos os nomes de coluna em maiÃºsculas.
</li>
<li>
<code>column_exists()</code>: verifica se existe uma coluna em um conjunto de dados. Retorne um valor lÃ³gico.
</li>
<li>
<code>columns_to_first()</code>: move as colunas para as primeiras posiÃ§Ãµes em <code>.data</code>.
</li>
<li>
<code>columns_to_last()</code>: move as colunas para as Ãºltimas posiÃ§Ãµes em <code>.data</code>.
</li>
<li>
<code>concatenate()</code>: concatena colunas de um conjunto de dados. Se <code>drop = TRUE</code>, as variÃ¡veis existentes sÃ£o descartadas. Se <code>pull = TRUE</code>, a variÃ¡vel concatenada Ã© extraÃ­da para um vetor. Isso Ã© especialmente Ãºtil ao usar concatenar para adicionar colunas a um conjunto de dados com <code>add_cols()</code>.
</li>
<li>
<code>get_levels()</code>: obtÃ©m os nÃ­veis de um fator.
</li>
<li>
<code>get_level_size()</code>: obtÃ©m o tamanho de cada nÃ­vel de um fator.
</li>
<li>
<code>remove_cols()</code>: remove uma ou mais colunas de um conjunto de dados.
</li>
<li>
<code>remove_rows()</code>: remove uma ou mais linhas de um conjunto de dados.
</li>
<li>
<code>reorder_cols()</code>: reordena colunas em um conjunto de dados.
</li>
<li>
<code>select_cols()</code>: seleciona uma ou mais colunas de um conjunto de dados.
</li>
<li>
<code>select_first_col()</code>: seleciona a primeira variÃ¡vel, possivelmente com um deslocamento.
</li>
<li>
<code>select_last_col()</code>: seleciona a Ãºltima variÃ¡vel, possivelmente com um deslocamento.
</li>
<li>
<code>select_numeric_cols()</code>: selecione todas as colunas numÃ©ricas de um conjunto de dados.
</li>
<li>
<code>select_non_numeric_cols()</code>: seleciona todas as colunas nÃ£o numÃ©ricas de um conjunto de dados.
</li>
<li>
<code>select_rows()</code>: seleciona uma ou mais linhas de um conjunto de dados.
</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html">UtilitÃ¡rios para lidar com nÃºmeros e strings</a></li>
</ol>
<ul>
<li>
<code>all_lower_case()</code>: converte todas as seqÃ¼Ãªncias nÃ£o numÃ©ricas de um conjunto de dados para minÃºsculas (â€œEnvâ€ para â€œenvâ€). </li>
<li>
<code>all_upper_case()</code>: converte todas as seqÃ¼Ãªncias nÃ£o numÃ©ricas de um conjunto de dados para maiÃºsculas (por exemplo, â€œEnvâ€ para â€œENVâ€).</li>
<li>
<code>all_title_case()</code>: converta todas as seqÃ¼Ãªncias nÃ£o numÃ©ricas de um conjunto de dados em maiÃºsculas e minÃºsculas (por exemplo, â€œENVâ€ para â€œEnvâ€).</li>
<li>
<code>extract_number()</code>: extrai o(s) nÃºmero(s) de uma sequÃªncia de caracteres.</li>
<li>
<code>extract_string()</code>: Extrai todas letras de uma sequÃªncia de caracteres, ignorando maiÃºsculas e minÃºsculas.</li>
<li>
<code>find_text_in_num()</code>: encontra caracteres de texto em uma sequÃªncia numÃ©rica e retorna o Ã­ndice de linha.</li>
<li>
<code>has_text_in_num()</code>: inspeciona as colunas procurando por texto na sequÃªncia numÃ©rica e retorna um aviso se algum texto for encontrado.</li>
<li>
<code>remove_strings()</code>: remove todas as strings de uma variÃ¡vel.</li>
<li>
<code>replace_number()</code>: substitui os nÃºmeros por uma substituiÃ§Ã£o.</li>
<li>
<code>replace_string()</code>: substitui todas as strings por uma substituiÃ§Ã£o, ignorando a caixa.</li>
<li>
<code>round_cols()</code>: Arredonda uma coluna selecionada ou um conjunto de dados inteiro para nÃºmeros significativos.</li>
<li>
<code>tidy_strings()</code>: arruma seqÃ¼Ãªncias de caracteres, colunas nÃ£o numÃ©ricas ou quaisquer colunas selecionadas em um conjunto de dados colocando todas as palavras em maiÃºsculas, substituindo qualquer espaÃ§o, tabulaÃ§Ã£o e caracteres de pontuaÃ§Ã£o por <code>'_'</code> e colocando <code>'_'</code> entre letras maiÃºsculas e minÃºsculas. Suponha que <code>str = c("Env1", "env 1", "env.1")</code> (que por definiÃ§Ã£o deve representar um nÃ­vel Ãºnico nos ensaios de melhoramento de plantas, por exemplo, ambiente 1) seja submetido a <code>tidy_strings(str)</code>: o resultado serÃ¡ entÃ£o <code><a href="https://rdrr.io/r/base/c.html">c("ENV_1", "ENV_1", "ENV_1")</a></code>.</li>
</ul>
<p>O conjunto de dados <strong>maize</strong> serÃ¡ utilizado como exemplo para as operaÃ§Ãµes de manipulaÃ§Ã£o de dados. Este arquivo em formato <code>.xlsx</code> estÃ¡ hospedado em <a href="https://github.com/TiagoOlivoto/e-bookr/tree/master/data" class="uri">https://github.com/TiagoOlivoto/e-bookr/tree/master/data</a> e pode ser carregado no ambiente R com a funÃ§Ã£o <code>import()</code> do pacote <a href="https://cran.r-project.org/web/packages/rio/index.html">rio</a>.</p>
<div class="sourceCode" id="cb50"><pre class="downlit">
<span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/TiagoOlivoto/e-bookr/raw/master/data/data_R.xlsx"</span>
<span class="va">maize</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="va">url</span>,
                sheet <span class="op">=</span> <span class="st">"maize"</span>, 
                setclass <span class="op">=</span> <span class="st">"tibble"</span><span class="op">)</span>
<span class="fu">inspect</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 10 x 9</span>
<span class="co">#    Variable Class     Missing Levels Valid_n   Min Median    Max Outlier</span>
<span class="co">#    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#  1 AMB      character No      0          780  NA    NA     NA         NA</span>
<span class="co">#  2 HIB      character No      0          780  NA    NA     NA         NA</span>
<span class="co">#  3 REP      character No      0          780  NA    NA     NA         NA</span>
<span class="co">#  4 APLA     numeric   No      -          780   1     2.52   3.3        4</span>
<span class="co">#  5 AIES     numeric   No      -          780   0.5   1.38   2.39       1</span>
<span class="co">#  6 CESP     numeric   No      -          780   0.8  15.4   20.4       16</span>
<span class="co">#  7 DIES     numeric   No      -          780  36.4  50.0   59.7        1</span>
<span class="co">#  8 MGRA     numeric   No      -          780  58.5 174.   291.         0</span>
<span class="co">#  9 MMG      numeric   No      -          780 123.  344.   546.         6</span>
<span class="co"># 10 NGRA     numeric   No      -          780 147   517    903          9</span></pre></div>
<div id="trabalhando-com-linhas-e-colunas" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Trabalhando com linhas e colunas<a class="anchor" aria-label="anchor" href="#trabalhando-com-linhas-e-colunas"><i class="fas fa-link"></i></a>
</h2>
<div id="selecionar-colunas" class="section level3" number="7.1.1">
<h3>
<span class="header-section-number">7.1.1</span> Selecionar colunas<a class="anchor" aria-label="anchor" href="#selecionar-colunas"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_cols()</code></a> pode ser usada para selecionar colunas de um conjunto de dados.</p>
<div class="sourceCode" id="cb51"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span>, <span class="va">HIB</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 2</span>
<span class="co">#    AMB   HIB  </span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#  1 A1    H1   </span>
<span class="co">#  2 A1    H1   </span>
<span class="co">#  3 A1    H1   </span>
<span class="co">#  4 A1    H1   </span>
<span class="co">#  5 A1    H1   </span>
<span class="co">#  6 A1    H1   </span>
<span class="co">#  7 A1    H1   </span>
<span class="co">#  8 A1    H1   </span>
<span class="co">#  9 A1    H1   </span>
<span class="co"># 10 A1    H1   </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>As colunas numÃ©ricas podem ser selecionadas rapidamente usando a funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_numeric_cols()</code></a>. As colunas nÃ£o numÃ©ricas sÃ£o selecionadas com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_non_numeric_cols()</code></a>.</p>
<div class="sourceCode" id="cb52"><pre class="downlit">
<span class="fu">select_numeric_cols</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 7</span>
<span class="co">#     APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1  2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2  2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3  2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4  2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5  2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6  2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7  3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8  2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9  3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10  3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">select_non_numeric_cols</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 3</span>
<span class="co">#    AMB   HIB   REP  </span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#  1 A1    H1    I    </span>
<span class="co">#  2 A1    H1    I    </span>
<span class="co">#  3 A1    H1    I    </span>
<span class="co">#  4 A1    H1    I    </span>
<span class="co">#  5 A1    H1    I    </span>
<span class="co">#  6 A1    H1    II   </span>
<span class="co">#  7 A1    H1    II   </span>
<span class="co">#  8 A1    H1    II   </span>
<span class="co">#  9 A1    H1    II   </span>
<span class="co"># 10 A1    H1    II   </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Podemos selecionar a primeira ou a Ãºltima coluna rapidamente com <code>select_first_col()</code> e <code>select_last_col()</code>, respectivamente.</p>
<div class="sourceCode" id="cb53"><pre class="downlit">
<span class="fu">select_first_col</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#    AMB  </span>
<span class="co">#    &lt;chr&gt;</span>
<span class="co">#  1 A1   </span>
<span class="co">#  2 A1   </span>
<span class="co">#  3 A1   </span>
<span class="co">#  4 A1   </span>
<span class="co">#  5 A1   </span>
<span class="co">#  6 A1   </span>
<span class="co">#  7 A1   </span>
<span class="co">#  8 A1   </span>
<span class="co">#  9 A1   </span>
<span class="co"># 10 A1   </span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">select_last_col</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#     NGRA</span>
<span class="co">#    &lt;dbl&gt;</span>
<span class="co">#  1   609</span>
<span class="co">#  2   427</span>
<span class="co">#  3   497</span>
<span class="co">#  4   523</span>
<span class="co">#  5   551</span>
<span class="co">#  6   529</span>
<span class="co">#  7   294</span>
<span class="co">#  8   528</span>
<span class="co">#  9   538</span>
<span class="co"># 10   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p><em>Select helpers</em> podem ser usados para selecionar variÃ¡veis que correspondem a uma expressÃ£o. Isso significa que podemos usar uma funÃ§Ã£o para selecionar variÃ¡veis em vez de digitar seus prÃ³prios nomes. O <code>metan</code> reexporta os <a href="https://tidyselect.r-lib.org/reference/select_helpers.html">tidy select helpers</a> e implementa os prÃ³prios <em>select helpers</em> com base em operaÃ§Ãµes com prefixos e sufixos (<a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>different_var()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>intersect_var()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>union_var()</code></a>), tamanho dos nomes das variÃ¡veis (<a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20Select_helper.html"><code>width_of()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>width_gength_than()</code></a> e <a href="https:%20//tiagoolivoto.github%20.io%20/%20metan%20/%20reference%20/%20Select_helper.html"><code>width_less_than()</code></a>) e no tipo de letra (<a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>lower_case_only()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>upper_case_only()</code></a> e <a href="https:%20//tiagoolivoto.github%20.io%20/%20metan%20/%20reference%20/%20Select_helper.html"><code>title_case_only()</code></a>).</p>
<ul>
<li><strong>Selecionando variÃ¡veis que comeÃ§am com um prefixo.</strong></li>
</ul>
<p>Se quisermos selecionar as variÃ¡veis que comeÃ§am com â€œCâ€, podemos usar:</p>
<div class="sourceCode" id="cb54"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"C"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#     CESP</span>
<span class="co">#    &lt;dbl&gt;</span>
<span class="co">#  1  16.9</span>
<span class="co">#  2  14.4</span>
<span class="co">#  3  16.5</span>
<span class="co">#  4  16.8</span>
<span class="co">#  5  15.9</span>
<span class="co">#  6  15  </span>
<span class="co">#  7  10.9</span>
<span class="co">#  8  15  </span>
<span class="co">#  9  13.6</span>
<span class="co"># 10  16.3</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>mas se quisermos selecionar aqueles que nÃ£o comeÃ§am com â€œCâ€, basta adicionar â€œ-â€ logo antes de <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>starts_with()</code></a></p>
<div class="sourceCode" id="cb55"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"C"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 9</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando variÃ¡veis que terminam com um sufixo.</strong></li>
</ul>
<p>Da mesma forma, se quisermos selecionar as variÃ¡veis que terminam com â€œSâ€, podemos usar:</p>
<div class="sourceCode" id="cb56"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"S"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 2</span>
<span class="co">#     AIES  DIES</span>
<span class="co">#    &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1  2.39  52.1</span>
<span class="co">#  2  1.43  50.7</span>
<span class="co">#  3  1.52  54.7</span>
<span class="co">#  4  1.64  52.0</span>
<span class="co">#  5  1.55  51.6</span>
<span class="co">#  6  1.8   51.4</span>
<span class="co">#  7  1.78  41.9</span>
<span class="co">#  8  1.84  53.4</span>
<span class="co">#  9  1.78  50.8</span>
<span class="co"># 10  1.6   53.9</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando variÃ¡veis que comeÃ§am com um prefixo <em>A</em> E terminam com um sufixo â€œSâ€</strong></li>
</ul>
<p>Agora, se quisermos selecionar variÃ¡veis que comeÃ§am com â€œAâ€ e terminam com â€œSâ€, ou seja, a interseÃ§Ã£o entre a letra inicial â€œAâ€ e a letra final â€œSâ€, podemos:</p>
<div class="sourceCode" id="cb57"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu">intersect_var</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"S"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#     AIES</span>
<span class="co">#    &lt;dbl&gt;</span>
<span class="co">#  1  2.39</span>
<span class="co">#  2  1.43</span>
<span class="co">#  3  1.52</span>
<span class="co">#  4  1.64</span>
<span class="co">#  5  1.55</span>
<span class="co">#  6  1.8 </span>
<span class="co">#  7  1.78</span>
<span class="co">#  8  1.84</span>
<span class="co">#  9  1.78</span>
<span class="co"># 10  1.6 </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando variÃ¡veis que comeÃ§am com um prefixo <em>OU</em> terminam com um sufixo.</strong></li>
</ul>
<p>TambÃ©m podemos obter a uniÃ£o entre a letra inicial â€œAâ€ e a letra final â€œSâ€, ou seja, variÃ¡veis que comeÃ§am com â€œAâ€ ou terminam com â€œSâ€.</p>
<div class="sourceCode" id="cb58"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu">union_var</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"S"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 4</span>
<span class="co">#    AMB    APLA  AIES  DIES</span>
<span class="co">#    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1     2.45  2.39  52.1</span>
<span class="co">#  2 A1     2.5   1.43  50.7</span>
<span class="co">#  3 A1     2.69  1.52  54.7</span>
<span class="co">#  4 A1     2.8   1.64  52.0</span>
<span class="co">#  5 A1     2.62  1.55  51.6</span>
<span class="co">#  6 A1     2.12  1.8   51.4</span>
<span class="co">#  7 A1     3.15  1.78  41.9</span>
<span class="co">#  8 A1     2.97  1.84  53.4</span>
<span class="co">#  9 A1     3.1   1.78  50.8</span>
<span class="co"># 10 A1     3.02  1.6   53.9</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li>** Selecionando variÃ¡veis que comeÃ§am com um prefixo <em>E NÃƒO</em> terminam com um sufixo.**</li>
</ul>
<p>TambÃ©m podemos obter a diferenÃ§a entre a letra inicial â€œAâ€ e a letra final â€œSâ€, ou seja, variÃ¡veis que comeÃ§am com â€œCâ€ e nÃ£o terminam com â€œDâ€.</p>
<div class="sourceCode" id="cb59"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu">difference_var</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"S"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 2</span>
<span class="co">#    AMB    APLA</span>
<span class="co">#    &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1     2.45</span>
<span class="co">#  2 A1     2.5 </span>
<span class="co">#  3 A1     2.69</span>
<span class="co">#  4 A1     2.8 </span>
<span class="co">#  5 A1     2.62</span>
<span class="co">#  6 A1     2.12</span>
<span class="co">#  7 A1     3.15</span>
<span class="co">#  8 A1     2.97</span>
<span class="co">#  9 A1     3.1 </span>
<span class="co"># 10 A1     3.02</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando variÃ¡veis que contÃªm uma string literal.</strong></li>
</ul>
<p>Se as variÃ¡veis no conjunto de dados tiverem um padrÃ£o com diferenÃ§as entre um grupo de variÃ¡veis, podemos usar o cÃ³digo a seguir para selecionar variÃ¡veis com um padrÃ£o. Primeiro, iremos alterar os nomes das variÃ¡veis <code>PH</code>, <code>EH</code>, <code>EP</code> e <code>EL</code> incluindo <code>_PLANT</code> para indicar que sÃ£o variÃ¡veis relacionadas Ã  planta. Em seguida, selecionaremos essas variÃ¡veis com a funÃ§Ã£o <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>contains()</code></a>.</p>
<div class="sourceCode" id="cb60"><pre class="downlit">
<span class="va">data_vars</span> <span class="op">&lt;-</span> 
  <span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>APLA_PLANT <span class="op">=</span> <span class="va">APLA</span>,
         AIES_PLANT <span class="op">=</span> <span class="va">AIES</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">data_vars</span><span class="op">)</span>
<span class="co">#  [1] "AMB"        "HIB"        "REP"        "APLA_PLANT" "AIES_PLANT"</span>
<span class="co">#  [6] "CESP"       "DIES"       "MGRA"       "MMG"        "NGRA"</span>

<span class="fu">select_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"PLANT"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 2</span>
<span class="co">#    APLA_PLANT AIES_PLANT</span>
<span class="co">#         &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#  1       2.45       2.39</span>
<span class="co">#  2       2.5        1.43</span>
<span class="co">#  3       2.69       1.52</span>
<span class="co">#  4       2.8        1.64</span>
<span class="co">#  5       2.62       1.55</span>
<span class="co">#  6       2.12       1.8 </span>
<span class="co">#  7       3.15       1.78</span>
<span class="co">#  8       2.97       1.84</span>
<span class="co">#  9       3.1        1.78</span>
<span class="co"># 10       3.02       1.6 </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando variÃ¡veis que correspondem a uma expressÃ£o regular.</strong></li>
</ul>
<p>SeleÃ§Ãµes mais sofisticadas podem ser feitas usando <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>matches()</code></a>. Supondo que gostarÃ­amos de selecionar as variÃ¡veis que comeÃ§am com â€œAâ€ e tem a segunda letra entre â€œAâ€ e â€œMâ€, usarÃ­amos algo como:</p>
<div class="sourceCode" id="cb61"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"^A[A-M]"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 2</span>
<span class="co">#    AMB    AIES</span>
<span class="co">#    &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1     2.39</span>
<span class="co">#  2 A1     1.43</span>
<span class="co">#  3 A1     1.52</span>
<span class="co">#  4 A1     1.64</span>
<span class="co">#  5 A1     1.55</span>
<span class="co">#  6 A1     1.8 </span>
<span class="co">#  7 A1     1.78</span>
<span class="co">#  8 A1     1.84</span>
<span class="co">#  9 A1     1.78</span>
<span class="co"># 10 A1     1.6 </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecionando a Ãºltima ou a primeira variÃ¡vel, possivelmente com um deslocamento.</strong></li>
</ul>
<p>Podemos selecionar a <em>n</em>-Ã©sima primeira ou a Ãºltima coluna com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_last_col()</code></a> ou <a href="https%20:%20//tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_first_col()</code></a>.</p>
<div class="sourceCode" id="cb62"><pre class="downlit">
<span class="fu">select_first_col</span><span class="op">(</span><span class="va">data_vars</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#    AMB  </span>
<span class="co">#    &lt;chr&gt;</span>
<span class="co">#  1 A1   </span>
<span class="co">#  2 A1   </span>
<span class="co">#  3 A1   </span>
<span class="co">#  4 A1   </span>
<span class="co">#  5 A1   </span>
<span class="co">#  6 A1   </span>
<span class="co">#  7 A1   </span>
<span class="co">#  8 A1   </span>
<span class="co">#  9 A1   </span>
<span class="co"># 10 A1   </span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">select_last_col</span><span class="op">(</span><span class="va">data_vars</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#     NGRA</span>
<span class="co">#    &lt;dbl&gt;</span>
<span class="co">#  1   609</span>
<span class="co">#  2   427</span>
<span class="co">#  3   497</span>
<span class="co">#  4   523</span>
<span class="co">#  5   551</span>
<span class="co">#  6   529</span>
<span class="co">#  7   294</span>
<span class="co">#  8   528</span>
<span class="co">#  9   538</span>
<span class="co"># 10   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecione variÃ¡veis com um comprimento de nome especÃ­fico (quatro letras)</strong></li>
</ul>
<div class="sourceCode" id="cb63"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="fu">width_of</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 4</span>
<span class="co">#     CESP  DIES  MGRA  NGRA</span>
<span class="co">#    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1  16.9  52.1 228.    609</span>
<span class="co">#  2  14.4  50.7 187.    427</span>
<span class="co">#  3  16.5  54.7 230.    497</span>
<span class="co">#  4  16.8  52.0 213.    523</span>
<span class="co">#  5  15.9  51.6 224.    551</span>
<span class="co">#  6  15    51.4 203.    529</span>
<span class="co">#  7  10.9  41.9  75.2   294</span>
<span class="co">#  8  15    53.4 204.    528</span>
<span class="co">#  9  13.6  50.8 187.    538</span>
<span class="co"># 10  16.3  53.9 250.    582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li>**Selecione variÃ¡veis com largura menor que *n**.</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="fu">width_less_than</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 4</span>
<span class="co">#    AMB   HIB   REP     MMG</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      375.</span>
<span class="co">#  2 A1    H1    I      437.</span>
<span class="co">#  3 A1    H1    I      464.</span>
<span class="co">#  4 A1    H1    I      408.</span>
<span class="co">#  5 A1    H1    I      406.</span>
<span class="co">#  6 A1    H1    II     383.</span>
<span class="co">#  7 A1    H1    II     256.</span>
<span class="co">#  8 A1    H1    II     387.</span>
<span class="co">#  9 A1    H1    II     348.</span>
<span class="co"># 10 A1    H1    II     430.</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li>
<strong>Selecione variÃ¡veis com largura maior que * n </strong>*.</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="downlit">
<span class="fu">select_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="fu">width_greater_than</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 6</span>
<span class="co">#    APLA_PLANT AIES_PLANT  CESP  DIES  MGRA  NGRA</span>
<span class="co">#         &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1       2.45       2.39  16.9  52.1 228.    609</span>
<span class="co">#  2       2.5        1.43  14.4  50.7 187.    427</span>
<span class="co">#  3       2.69       1.52  16.5  54.7 230.    497</span>
<span class="co">#  4       2.8        1.64  16.8  52.0 213.    523</span>
<span class="co">#  5       2.62       1.55  15.9  51.6 224.    551</span>
<span class="co">#  6       2.12       1.8   15    51.4 203.    529</span>
<span class="co">#  7       3.15       1.78  10.9  41.9  75.2   294</span>
<span class="co">#  8       2.97       1.84  15    53.4 204.    528</span>
<span class="co">#  9       3.1        1.78  13.6  50.8 187.    538</span>
<span class="co"># 10       3.02       1.6   16.3  53.9 250.    582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<ul>
<li><strong>Selecione variÃ¡veis por tipo de letra</strong></li>
</ul>
<p>Vamos criar um conjunto de dados com nomes de colunas <em>bagunÃ§ados</em>.</p>
<div class="sourceCode" id="cb66"><pre class="downlit">
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">maize</span>, <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="st">"Amg"</span>, <span class="st">"hib"</span>, <span class="st">"Rep"</span>, <span class="st">"APLA"</span>, <span class="st">"AIES"</span>, <span class="st">"CESp"</span>, <span class="st">"dies"</span>, <span class="st">"Mgra"</span>, <span class="st">"mmG"</span>, <span class="st">"ngra"</span><span class="op">)</span>
<span class="fu">select_cols</span><span class="op">(</span><span class="va">df</span>, <span class="fu">lower_case_only</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 3</span>
<span class="co">#   hib    dies  ngra</span>
<span class="co">#   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 H1     52.1   609</span>
<span class="co"># 2 H1     50.7   427</span>
<span class="co"># 3 H1     54.7   497</span>
<span class="fu">select_cols</span><span class="op">(</span><span class="va">df</span>, <span class="fu">upper_case_only</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 2</span>
<span class="co">#    APLA  AIES</span>
<span class="co">#   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1  2.45  2.39</span>
<span class="co"># 2  2.5   1.43</span>
<span class="co"># 3  2.69  1.52</span>
<span class="fu">select_cols</span><span class="op">(</span><span class="va">df</span>, <span class="fu">title_case_only</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 3</span>
<span class="co">#   Amg   Rep    Mgra</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    I      228.</span>
<span class="co"># 2 A1    I      187.</span>
<span class="co"># 3 A1    I      230.</span></pre></div>
</div>
<div id="remover-linhas-ou-colunas" class="section level3" number="7.1.2">
<h3>
<span class="header-section-number">7.1.2</span> Remover linhas ou colunas<a class="anchor" aria-label="anchor" href="#remover-linhas-ou-colunas"><i class="fas fa-link"></i></a>
</h3>
<p>Podemos usar <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>remove_cols()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_rows_cols.html"><code>remove_rows()</code></a> para remover colunas e linhas, respectivamente.</p>
<div class="sourceCode" id="cb67"><pre class="downlit">
<span class="fu">remove_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span>, <span class="va">HIB</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 8</span>
<span class="co">#    REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>As funÃ§Ãµes <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>remove_rows_na()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference%20/utils_rows_cols.html"><code>remove_rows_na()</code></a> sÃ£o usados para remover linhas e colunas com valores <code>NA</code>, respectivamente. </p>
<div class="sourceCode" id="cb68"><pre class="downlit">
<span class="va">data_with_na</span> <span class="op">&lt;-</span> <span class="va">maize</span>
<span class="va">data_with_na</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span> <span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="fu">remove_cols_na</span><span class="op">(</span><span class="va">data_with_na</span><span class="op">)</span>
<span class="co"># Warning: Column(s) REP, APLA, AIES, MMG, NGRA with NA values deleted.</span>
<span class="co"># # A tibble: 780 x 5</span>
<span class="co">#    AMB   HIB    CESP  DIES  MGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1     16.9  52.1 228. </span>
<span class="co">#  2 A1    H1     14.4  50.7 187. </span>
<span class="co">#  3 A1    H1     16.5  54.7 230. </span>
<span class="co">#  4 A1    H1     16.8  52.0 213. </span>
<span class="co">#  5 A1    H1     15.9  51.6 224. </span>
<span class="co">#  6 A1    H1     15    51.4 203. </span>
<span class="co">#  7 A1    H1     10.9  41.9  75.2</span>
<span class="co">#  8 A1    H1     15    53.4 204. </span>
<span class="co">#  9 A1    H1     13.6  50.8 187. </span>
<span class="co"># 10 A1    H1     16.3  53.9 250. </span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">remove_rows_na</span><span class="op">(</span><span class="va">data_with_na</span><span class="op">)</span>
<span class="co"># Warning: Row(s) 1, 5, 10 with NA values deleted.</span>
<span class="co"># # A tibble: 777 x 10</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  2 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  3 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  4 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  5 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  6 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  7 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co">#  8 A1    H1    III    2.69  1.52  15.6  49.5 195.   369.   529</span>
<span class="co">#  9 A1    H1    III    2.6   1.68  14.3  48.9 172.   344.   500</span>
<span class="co"># 10 A1    H1    III    2.82  1.52  18.4  54.3 255.   371.   689</span>
<span class="co"># # ... with 767 more rows</span></pre></div>
</div>
<div id="ordenar-linhas" class="section level3" number="7.1.3">
<h3>
<span class="header-section-number">7.1.3</span> Ordenar linhas<a class="anchor" aria-label="anchor" href="#ordenar-linhas"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>  Ã© utilizada para ordenar as linhas de um tibble (ou data.frames) com base em uma expressÃ£o envolvendo suas variÃ¡veis. Considerando as funÃ§Ãµes que vimos atÃ© aqui, vamos computar a mÃ©dia para a MGRA, criar uma nova variÃ¡vel chamada <strong>Rank</strong>, qual corresponde ao ranqueamento dos hÃ­bridos para a variÃ¡vel em questÃ£o e ordenar a variÃ¡vel Rank em ordem crescente, onde o hÃ­brido com a maior mÃ©dia ficarÃ¡ na primeira linha.</p>
<div class="sourceCode" id="cb69"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">HIB</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>MGRA_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">MGRA</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html">rank</a></span><span class="op">(</span><span class="va">MGRA_mean</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="va">Rank</span><span class="op">)</span>
<span class="co"># # A tibble: 13 x 3</span>
<span class="co">#    HIB   MGRA_mean  Rank</span>
<span class="co">#    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 H6         188.    13</span>
<span class="co">#  2 H2         187.    12</span>
<span class="co">#  3 H4         184.    11</span>
<span class="co">#  4 H1         184.    10</span>
<span class="co">#  5 H5         184.     9</span>
<span class="co">#  6 H13        180.     8</span>
<span class="co">#  7 H7         171.     7</span>
<span class="co">#  8 H3         169.     6</span>
<span class="co">#  9 H11        167.     5</span>
<span class="co"># 10 H10        164.     4</span>
<span class="co"># 11 H8         160.     3</span>
<span class="co"># 12 H12        157.     2</span>
<span class="co"># 13 H9         153.     1</span></pre></div>

<div class="tarefa">
<p><strong>ExercÃ­cio 3</strong></p>
<ul>
<li>Considerando o exemplo anterior, ordene a variÃ¡vel <strong>Rank</strong> em ordem decrescente.</li>
</ul>
</div>
<p><a href="resposta-dos-exerc%C3%83%C2%ADcios.html#exerc3">Resposta</a></p>
<p>Ao combinar a funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> com <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> Ã© possÃ­vel realizar o ordenamento para cada nÃ­vel de um determinado fator. No exemplo abaixo, a variÃ¡vel <code>APLA</code> Ã© ordenada de maneira crescente para cada hÃ­brido.</p>
<div class="sourceCode" id="cb70"><pre class="downlit">

<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">HIB</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">APLA</span>, .by_group <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co"># # Groups:   HIB [13]</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A3    H1    II     1.93  0.93  13    50.0 120.   276.   433</span>
<span class="co">#  2 A3    H1    I      2     1.05  19.9  53.3 253.   444.   570</span>
<span class="co">#  3 A3    H1    I      2.07  1.05  13.2  47.9 110.   293.   377</span>
<span class="co">#  4 A3    H1    II     2.08  0.94  12    47.6 103.   334.   309</span>
<span class="co">#  5 A3    H1    III    2.1   0.97  17.5  50.8 222.   423.   524</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A3    H1    I      2.12  1.03  18.5  52.0 214.   382.   560</span>
<span class="co">#  8 A3    H1    III    2.12  0.96  15    56.8 174.   339.   512</span>
<span class="co">#  9 A3    H1    I      2.13  1.05  11.6  47.0  89.5  300.   298</span>
<span class="co"># 10 A4    H1    I      2.13  1.1   12.8  47.6 144.   280.   516</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="selecionar-top-n-linhas-baseado-em-valor" class="section level3" number="7.1.4">
<h3>
<span class="header-section-number">7.1.4</span> Selecionar top n linhas baseado em valor<a class="anchor" aria-label="anchor" href="#selecionar-top-n-linhas-baseado-em-valor"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n()</a></code> Ã© usada para selecionar linhas superiores ou inferiores em cada grupo.</p>
<div class="sourceCode" id="cb71"><pre class="downlit">
<span class="co"># seleciona as duas linhas com o maior valor de MGRA</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="va">maize</span>, <span class="fl">2</span>, <span class="va">MGRA</span><span class="op">)</span>
<span class="co"># # A tibble: 2 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734</span>
<span class="co"># 2 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698</span>

<span class="co"># seleciona as duas linhas com o menor valor de MGRA</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="va">maize</span>, <span class="fl">2</span>, <span class="op">-</span><span class="va">MGRA</span><span class="op">)</span>
<span class="co"># # A tibble: 2 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H9    III    2.72  1.54  11    42.8  58.5  295.   198</span>
<span class="co"># 2 A2    H8    I      1.92  0.63  12.1  39.7  59.5  243.   245</span>

<span class="co"># Maior produtividade em cada ambiente</span>
<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">AMB</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">MGRA</span><span class="op">)</span>
<span class="co"># # A tibble: 4 x 10</span>
<span class="co"># # Groups:   AMB [4]</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698</span>
<span class="co"># 2 A2    H6    III    3.18  1.62  19.2  53.0  270.  382.   708</span>
<span class="co"># 3 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570</span>
<span class="co"># 4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</span></pre></div>
</div>
<div id="adicionar-novas-variÃ¡veis" class="section level3" number="7.1.5">
<h3>
<span class="header-section-number">7.1.5</span> Adicionar novas variÃ¡veis<a class="anchor" aria-label="anchor" href="#adicionar-novas-vari%C3%83%C2%A1veis"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>  Ã© utilizada quando se deseja adicionar novas variÃ¡veis no conjunto de dados. Estas variÃ¡veis sÃ£o funÃ§Ãµes de variÃ¡veis existentes. Como exemplo, vamos criar uma nova variÃ¡vel chamada <code>PRE_2</code> no conjunto de dados <code>maize</code>, qual serÃ¡ a razÃ£o entre AIES e APLA. Note que a funÃ§Ã£o adiciona a nova variÃ¡vel apÃ³s a Ãºltima variÃ¡vel origina e mantÃ©m todas as demais. Digamos que querÃ­amos adicionar a nova variÃ¡vel criada apÃ³s a variÃ¡vel REP, a seguinte abordagem com o pacote <code>dplyr</code> deve ser usada.</p>
<div class="sourceCode" id="cb72"><pre class="downlit">

<span class="va">maize</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PRE_2 <span class="op">=</span> <span class="va">AIES</span><span class="op">/</span><span class="va">APLA</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">AMB</span>, <span class="va">HIB</span>, <span class="va">REP</span>, <span class="va">PRE_2</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   REP   PRE_2  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I     0.976  2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I     0.572  2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I     0.565  2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I     0.586  2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I     0.592  2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II    0.849  2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II    0.565  3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II    0.620  2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II    0.574  3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II    0.530  3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Com a funÃ§Ã£o <code>add_cols()</code>, o mesmo resultado pode ser obtido com:</p>
<div class="sourceCode" id="cb73"><pre class="downlit">

<span class="fu">add_cols</span><span class="op">(</span><span class="va">maize</span>,
         PRE_2 <span class="op">=</span> <span class="va">AIES</span><span class="op">/</span><span class="va">APLA</span>,
         .after <span class="op">=</span> <span class="st">"REP"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   REP   PRE_2  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I     0.976  2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I     0.572  2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I     0.565  2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I     0.586  2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I     0.592  2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II    0.849  2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II    0.565  3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II    0.620  2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II    0.574  3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II    0.530  3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>

<div class="tarefa">
<p><strong>ExercÃ­cio 2</strong></p>
<ul>
<li><p>Crie uma variÃ¡vel chamada MGRA_kg qual serÃ¡ o resultado em quilogramas da massa de grÃ£os.</p></li>
<li><p>Selecione somente as colunas HIB, AMB, REP e MGRA_Kg.</p></li>
<li><p>Selecione somente as cinco linhas com maior valor de MGRA_Kg.</p></li>
</ul>
</div>
<p><a href="resposta-dos-exerc%C3%83%C2%ADcios.html#exerc2">Resposta</a></p>
</div>
<div id="concatenar-colunas" class="section level3" number="7.1.6">
<h3>
<span class="header-section-number">7.1.6</span> Concatenar colunas<a class="anchor" aria-label="anchor" href="#concatenar-colunas"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <code>concatenate()</code> pode ser usada para concatenar vÃ¡rias colunas de um conjunto de dados. <code>concatenate()</code> retorna um quadro de dados com todas as colunas originais em <code>.data</code> mais a variÃ¡vel concatenada, apÃ³s a Ãºltima coluna. Para escolher a posiÃ§Ã£o da nova variÃ¡vel, use o argumento <code>.after</code> ou<code>.before</code>, como a seguir.</p>
<div class="sourceCode" id="cb74"><pre class="downlit">
<span class="fu">concatenate</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span><span class="op">:</span><span class="va">REP</span>, .after <span class="op">=</span> <span class="st">"REP"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   REP   new_var   APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I     A1_H1_I   2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I     A1_H1_I   2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I     A1_H1_I   2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I     A1_H1_I   2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I     A1_H1_I   2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II    A1_H1_II  2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II    A1_H1_II  3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II    A1_H1_II  2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II    A1_H1_II  3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II    A1_H1_II  3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Para eliminar as variÃ¡veis existentes e manter apenas a coluna concatenada, use o argumento <code>drop = TRUE</code>. Para usar <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>concatenate()</code></a> dentro de uma determinada funÃ§Ã£o como <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>add_cols()</code></a> use o argumento <code>pull = TRUE</code> para extrair os resultados para um vetor.</p>
<div class="sourceCode" id="cb75"><pre class="downlit">
<span class="fu">concatenate</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span><span class="op">:</span><span class="va">REP</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#    new_var </span>
<span class="co">#    &lt;chr&gt;   </span>
<span class="co">#  1 A1_H1_I </span>
<span class="co">#  2 A1_H1_I </span>
<span class="co">#  3 A1_H1_I </span>
<span class="co">#  4 A1_H1_I </span>
<span class="co">#  5 A1_H1_I </span>
<span class="co">#  6 A1_H1_II</span>
<span class="co">#  7 A1_H1_II</span>
<span class="co">#  8 A1_H1_II</span>
<span class="co">#  9 A1_H1_II</span>
<span class="co"># 10 A1_H1_II</span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">concatenate</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span><span class="op">:</span><span class="va">REP</span>, pull <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># [1] "A1_H1_I"  "A1_H1_I"  "A1_H1_I"  "A1_H1_I"  "A1_H1_I"  "A1_H1_II"</span></pre></div>
</div>
<div id="formatar-nomes-de-coluna" class="section level3" number="7.1.7">
<h3>
<span class="header-section-number">7.1.7</span> Formatar nomes de coluna<a class="anchor" aria-label="anchor" href="#formatar-nomes-de-coluna"><i class="fas fa-link"></i></a>
</h3>
<p>As funÃ§Ãµes <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>colnames_to_lower()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference%20/utils_rows_cols.html"><code>colnames_to_upper()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>colnames_to_title()</code></a> podem ser usados para converter nomes de colunas em maiÃºsculas, minÃºsculas ou em formato de tÃ­tulo, respectivamente .  </p>
<div class="sourceCode" id="cb76"><pre class="downlit">
<span class="fu">colnames_to_lower</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    amb   hib   rep    apla  aies  cesp  dies  mgra   mmg  ngra</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">colnames_to_upper</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">colnames_to_title</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    Amb   Hib   Rep    Apla  Aies  Cesp  Dies  Mgra   Mmg  Ngra</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="reordenando-colunas" class="section level3" number="7.1.8">
<h3>
<span class="header-section-number">7.1.8</span> Reordenando colunas<a class="anchor" aria-label="anchor" href="#reordenando-colunas"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>reorder_cols()</code></a> pode ser usada para reordenar as colunas de um quadro de dados.</p>
<div class="sourceCode" id="cb77"><pre class="downlit">
<span class="fu">reorder_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"PLANT"</span><span class="op">)</span>, .before <span class="op">=</span> <span class="st">"AMB"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    APLA_PLANT AIES_PLANT AMB   HIB   REP    CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#         &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1       2.45       2.39 A1    H1    I      16.9  52.1 228.   375.   609</span>
<span class="co">#  2       2.5        1.43 A1    H1    I      14.4  50.7 187.   437.   427</span>
<span class="co">#  3       2.69       1.52 A1    H1    I      16.5  54.7 230.   464.   497</span>
<span class="co">#  4       2.8        1.64 A1    H1    I      16.8  52.0 213.   408.   523</span>
<span class="co">#  5       2.62       1.55 A1    H1    I      15.9  51.6 224.   406.   551</span>
<span class="co">#  6       2.12       1.8  A1    H1    II     15    51.4 203.   383.   529</span>
<span class="co">#  7       3.15       1.78 A1    H1    II     10.9  41.9  75.2  256.   294</span>
<span class="co">#  8       2.97       1.84 A1    H1    II     15    53.4 204.   387.   528</span>
<span class="co">#  9       3.1        1.78 A1    H1    II     13.6  50.8 187.   348.   538</span>
<span class="co"># 10       3.02       1.6  A1    H1    II     16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">reorder_cols</span><span class="op">(</span><span class="va">data_vars</span>, <span class="va">AMB</span>, <span class="va">HIB</span>, .after <span class="op">=</span> <span class="st">"REP"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    REP   AMB   HIB   APLA_PLANT AIES_PLANT  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 I     A1    H1          2.45       2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 I     A1    H1          2.5        1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 I     A1    H1          2.69       1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 I     A1    H1          2.8        1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 I     A1    H1          2.62       1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 II    A1    H1          2.12       1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 II    A1    H1          3.15       1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 II    A1    H1          2.97       1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 II    A1    H1          3.1        1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 II    A1    H1          3.02       1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Ã‰ possÃ­vel colocar as colunas no primeiro e no Ãºltimo lugar rapidamente com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>columns_to_first()</code></a> e <a href="https:%20//tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>columns_to_last()</code></a>, respectivamente.</p>
<div class="sourceCode" id="cb78"><pre class="downlit">
<span class="fu">column_to_first</span><span class="op">(</span><span class="va">maize</span>, <span class="va">CESP</span>, <span class="va">DIES</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#     CESP  DIES AMB   HIB   REP    APLA  AIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1  16.9  52.1 A1    H1    I      2.45  2.39 228.   375.   609</span>
<span class="co">#  2  14.4  50.7 A1    H1    I      2.5   1.43 187.   437.   427</span>
<span class="co">#  3  16.5  54.7 A1    H1    I      2.69  1.52 230.   464.   497</span>
<span class="co">#  4  16.8  52.0 A1    H1    I      2.8   1.64 213.   408.   523</span>
<span class="co">#  5  15.9  51.6 A1    H1    I      2.62  1.55 224.   406.   551</span>
<span class="co">#  6  15    51.4 A1    H1    II     2.12  1.8  203.   383.   529</span>
<span class="co">#  7  10.9  41.9 A1    H1    II     3.15  1.78  75.2  256.   294</span>
<span class="co">#  8  15    53.4 A1    H1    II     2.97  1.84 204.   387.   528</span>
<span class="co">#  9  13.6  50.8 A1    H1    II     3.1   1.78 187.   348.   538</span>
<span class="co"># 10  16.3  53.9 A1    H1    II     3.02  1.6  250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="obtendo-nÃ­veis-de-fatores" class="section level3" number="7.1.9">
<h3>
<span class="header-section-number">7.1.9</span> Obtendo nÃ­veis de fatores<a class="anchor" aria-label="anchor" href="#obtendo-n%C3%83%C2%ADveis-de-fatores"><i class="fas fa-link"></i></a>
</h3>
<p>Para obter os nÃ­veis e o tamanho dos nÃ­veis de um fator, as funÃ§Ãµes <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>get_levels()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>get_level_size()</code></a> pode ser usado.
</p>
<div class="sourceCode" id="cb79"><pre class="downlit">
<span class="fu">get_levels</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span><span class="op">)</span>
<span class="co"># [1] "A1" "A2" "A3" "A4"</span>
<span class="fu">get_level_size</span><span class="op">(</span><span class="va">maize</span>, <span class="va">AMB</span><span class="op">)</span>
<span class="co">#  A1  A2  A3  A4 </span>
<span class="co"># 195 195 195 195</span></pre></div>
<p>Utilizando a funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>  Ã© possÃ­vel criar uma variÃ¡vel baseado em um argumento <code>if()</code> vetorizado. <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> Ã© particularmente Ãºtil dentro da funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> quando vocÃª quer criar uma nova variÃ¡vel que depende de uma combinaÃ§Ã£o complexa de variÃ¡veis existentes. No exemplo abaixo, uma nova variÃ¡vel serÃ¡ criada, dependendo dos valores de APLA, AIES ou CESP</p>
<div class="sourceCode" id="cb80"><pre class="downlit">

<span class="va">maize</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    CASE <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">MGRA</span> <span class="op">&gt;</span> <span class="fl">280</span> <span class="op">|</span> <span class="va">APLA</span> <span class="op">&lt;</span> <span class="fl">1.3</span> <span class="op">|</span> <span class="va">NGRA</span> <span class="op">&gt;</span> <span class="fl">820</span> <span class="op">~</span>  <span class="st">"Selecionar"</span>,
      <span class="va">APLA</span> <span class="op">&gt;</span> <span class="fl">2.3</span> <span class="op">~</span> <span class="st">"Alto"</span>,
      <span class="va">MGRA</span> <span class="op">&lt;</span> <span class="fl">130</span> <span class="op">~</span> <span class="st">"Pouco produtivo"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Outro"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">select_non_numeric_cols</span><span class="op">(</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 4</span>
<span class="co">#    AMB   HIB   REP   CASE </span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#  1 A1    H1    I     Alto </span>
<span class="co">#  2 A1    H1    I     Alto </span>
<span class="co">#  3 A1    H1    I     Alto </span>
<span class="co">#  4 A1    H1    I     Alto </span>
<span class="co">#  5 A1    H1    I     Alto </span>
<span class="co">#  6 A1    H1    II    Outro</span>
<span class="co">#  7 A1    H1    II    Alto </span>
<span class="co">#  8 A1    H1    II    Alto </span>
<span class="co">#  9 A1    H1    II    Alto </span>
<span class="co"># 10 A1    H1    II    Alto </span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="selecionar-linhas-com-base-em-seus-valores" class="section level3" number="7.1.10">
<h3>
<span class="header-section-number">7.1.10</span> Selecionar linhas com base em seus valores<a class="anchor" aria-label="anchor" href="#selecionar-linhas-com-base-em-seus-valores"><i class="fas fa-link"></i></a>
</h3>
<p>Utilizando a funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>  Ã© possivel filtrar as linhas de um conjunto de dados com base no valor de suas variÃ¡veis. No primeiro exemplo, selecionaremos as linhas onde o valor da variÃ¡vel MGRA Ã© maior que 280.</p>
<div class="sourceCode" id="cb81"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MGRA</span> <span class="op">&gt;</span> <span class="fl">280</span><span class="op">)</span>
<span class="co"># # A tibble: 4 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734</span>
<span class="co"># 2 A1    H10   I      2.92  1.61  20.3  55.4  283.  441.   641</span>
<span class="co"># 3 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698</span>
<span class="co"># 4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</span></pre></div>
<p>No segundo exemplo, selecionaremos apenas as linhas onde a MGRA Ã© maior que 220 <strong>OU</strong> a APLA Ã© menor que 1.3 <strong>OU</strong> o NGRA Ã© maior que 820.</p>
<div class="sourceCode" id="cb82"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MGRA</span> <span class="op">&gt;</span> <span class="fl">280</span> <span class="op">|</span> <span class="va">APLA</span> <span class="op">&lt;</span> <span class="fl">1.3</span> <span class="op">|</span> <span class="va">NGRA</span> <span class="op">&gt;</span> <span class="fl">820</span><span class="op">)</span>
<span class="co"># # A tibble: 10 x 10</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H6    I      2.92  1.64  18    56.0 289.   393.   734</span>
<span class="co">#  2 A1    H10   I      2.92  1.61  20.3  55.4 283.   441.   641</span>
<span class="co">#  3 A1    H13   II     2.47  1.28  15.3  53.0 291.   417.   698</span>
<span class="co">#  4 A2    H8    II     1.03  0.69  10.8  44.8  94.8  277.   342</span>
<span class="co">#  5 A2    H10   III    1.09  0.92  15    47.6 166.   299.   555</span>
<span class="co">#  6 A3    H10   I      1.04  0.71  14.8  45.5 112.   265.   423</span>
<span class="co">#  7 A3    H11   I      1     0.65  14.5  43.6 120.   210.   571</span>
<span class="co">#  8 A4    H8    I      2.65  1.67  18    50   277.   251.   903</span>
<span class="co">#  9 A4    H8    I      2.95  1.7   18.6  52.9 249.   302.   824</span>
<span class="co"># 10 A4    H10   I      2.65  1.47  14    50.3 287.   275.   493</span></pre></div>
<p>No Ãºltimo exemplo, selecionaremos apenas as linhas onde MGRA Ã© maior que Ã© maior que 220 <strong>E</strong> a APLA Ã© menor que 2.</p>
<div class="sourceCode" id="cb83"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MGRA</span> <span class="op">&gt;</span> <span class="fl">220</span> <span class="op">&amp;</span> <span class="va">APLA</span> <span class="op">&lt;</span> <span class="fl">2</span><span class="op">)</span>
<span class="co"># # A tibble: 1 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H6    II     1.97  1.63  17.1  54.7  230.  375.   614</span></pre></div>
<p>Isto Ã© aproximadamente equivalente ao seguinte cÃ³digo R base.</p>
<div class="sourceCode" id="cb84"><pre class="downlit">
<span class="va">maize</span><span class="op">[</span><span class="va">maize</span><span class="op">$</span><span class="va">MGRA</span> <span class="op">&gt;</span> <span class="fl">220</span> <span class="op">&amp;</span> <span class="va">maize</span><span class="op">$</span><span class="va">APLA</span> <span class="op">&lt;</span> <span class="fl">2</span>, <span class="op">]</span></pre></div>
</div>
</div>
<div id="trabalhando-com-nÃºmeros-e-seqÃ¼Ãªncias-de-caracteres" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Trabalhando com nÃºmeros e seqÃ¼Ãªncias de caracteres<a class="anchor" aria-label="anchor" href="#trabalhando-com-n%C3%83%C2%BAmeros-e-seq%C3%83%C2%BC%C3%83%C2%AAncias-de-caracteres"><i class="fas fa-link"></i></a>
</h2>
<div id="arredondando" class="section level3" number="7.2.1">
<h3>
<span class="header-section-number">7.2.1</span> Arredondando<a class="anchor" aria-label="anchor" href="#arredondando"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>round_cols()</code></a> arredonda uma coluna selecionada ou um quadro de dados inteiro para o nÃºmero especificado de casas decimais (padrÃ£o 0). Se nenhuma variÃ¡vel for informada, todas as variÃ¡veis numÃ©ricas serÃ£o arredondadas.</p>
<div class="sourceCode" id="cb85"><pre class="downlit">
<span class="fu">round_cols</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 214.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Como alternativa, selecione variÃ¡veis para arredondar.</p>
<div class="sourceCode" id="cb86"><pre class="downlit">
<span class="fu">round_cols</span><span class="op">(</span><span class="va">maize</span>, <span class="va">MGRA</span>, <span class="va">MMG</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375    609</span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 214.   408.   523</span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406    551</span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="extraindo-e-substituindo-nÃºmeros" class="section level3" number="7.2.2">
<h3>
<span class="header-section-number">7.2.2</span> Extraindo e substituindo nÃºmeros<a class="anchor" aria-label="anchor" href="#extraindo-e-substituindo-n%C3%83%C2%BAmeros"><i class="fas fa-link"></i></a>
</h3>
<p>As funÃ§Ãµes <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_number()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_num_str.html"><code>replace_number()</code></a> pode ser usado para extrair ou substituir nÃºmeros. Como exemplo, extrairemos o nÃºmero de cada genÃ³tipo em <code>data_g</code>. Por padrÃ£o, os nÃºmeros extraÃ­dos sÃ£o colocados como uma nova variÃ¡vel chamada <code>new_var</code> apÃ³s a Ãºltima coluna dos dados.</p>
<div class="sourceCode" id="cb87"><pre class="downlit">
<span class="fu">extract_number</span><span class="op">(</span><span class="va">maize</span>, <span class="va">HIB</span>, .after <span class="op">=</span> <span class="st">"HIB"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   new_var REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1          1 I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1          1 I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1          1 I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1          1 I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1          1 I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1          1 II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1          1 II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1          1 II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1          1 II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1          1 II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Se o argumento <code>drop</code> estiver definido como <code>TRUE</code>, apenas a nova variÃ¡vel serÃ¡ mantida e todas as outras serÃ£o descartadas.</p>
<div class="sourceCode" id="cb88"><pre class="downlit">
<span class="fu">extract_number</span><span class="op">(</span><span class="va">maize</span>, <span class="va">HIB</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 1</span>
<span class="co">#    new_var</span>
<span class="co">#      &lt;dbl&gt;</span>
<span class="co">#  1       1</span>
<span class="co">#  2       1</span>
<span class="co">#  3       1</span>
<span class="co">#  4       1</span>
<span class="co">#  5       1</span>
<span class="co">#  6       1</span>
<span class="co">#  7       1</span>
<span class="co">#  8       1</span>
<span class="co">#  9       1</span>
<span class="co"># 10       1</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Para extrair os resultados em um vetor, use o argumento <code>pull = TRUE</code>. Isso Ã© particularmente Ãºtil quando <code>extract_ *</code> ou <code>replace_ *</code> sÃ£o usados em uma funÃ§Ã£o como <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>add_cols()</code></a>.</p>
<div class="sourceCode" id="cb89"><pre class="downlit">
<span class="fu">extract_number</span><span class="op">(</span><span class="va">maize</span>, <span class="va">HIB</span>, pull <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#   [1]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  2  2  2  2  2  2  2  2  2  2</span>
<span class="co">#  [26]  2  2  2  2  2  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  4  4  4  4  4</span>
<span class="co">#  [51]  4  4  4  4  4  4  4  4  4  4  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5</span>
<span class="co">#  [76]  6  6  6  6  6  6  6  6  6  6  6  6  6  6  6  7  7  7  7  7  7  7  7  7  7</span>
<span class="co"># [101]  7  7  7  7  7  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  9  9  9  9  9</span>
<span class="co"># [126]  9  9  9  9  9  9  9  9  9  9 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10</span>
<span class="co"># [151] 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 12 12 12 12 12 12 12 12 12 12</span>
<span class="co"># [176] 12 12 12 12 12 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13  1  1  1  1  1</span>
<span class="co"># [201]  1  1  1  1  1  1  1  1  1  1  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2</span>
<span class="co"># [226]  3  3  3  3  3  3  3  3  3  3  3  3  3  3  3  4  4  4  4  4  4  4  4  4  4</span>
<span class="co"># [251]  4  4  4  4  4  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  6  6  6  6  6</span>
<span class="co"># [276]  6  6  6  6  6  6  6  6  6  6  7  7  7  7  7  7  7  7  7  7  7  7  7  7  7</span>
<span class="co"># [301]  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  9  9  9  9  9  9  9  9  9  9</span>
<span class="co"># [326]  9  9  9  9  9 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 11 11 11 11 11</span>
<span class="co"># [351] 11 11 11 11 11 11 11 11 11 11 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12</span>
<span class="co"># [376] 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13  1  1  1  1  1  1  1  1  1  1</span>
<span class="co"># [401]  1  1  1  1  1  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  3  3  3  3  3</span>
<span class="co"># [426]  3  3  3  3  3  3  3  3  3  3  4  4  4  4  4  4  4  4  4  4  4  4  4  4  4</span>
<span class="co"># [451]  5  5  5  5  5  5  5  5  5  5  5  5  5  5  5  6  6  6  6  6  6  6  6  6  6</span>
<span class="co"># [476]  6  6  6  6  6  7  7  7  7  7  7  7  7  7  7  7  7  7  7  7  8  8  8  8  8</span>
<span class="co"># [501]  8  8  8  8  8  8  8  8  8  8  9  9  9  9  9  9  9  9  9  9  9  9  9  9  9</span>
<span class="co"># [526] 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 11 11 11 11 11 11 11 11 11 11</span>
<span class="co"># [551] 11 11 11 11 11 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 13 13 13 13 13</span>
<span class="co"># [576] 13 13 13 13 13 13 13 13 13 13  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1</span>
<span class="co"># [601]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  3  3  3  3  3  3  3  3  3  3</span>
<span class="co"># [626]  3  3  3  3  3  4  4  4  4  4  4  4  4  4  4  4  4  4  4  4  5  5  5  5  5</span>
<span class="co"># [651]  5  5  5  5  5  5  5  5  5  5  6  6  6  6  6  6  6  6  6  6  6  6  6  6  6</span>
<span class="co"># [676]  7  7  7  7  7  7  7  7  7  7  7  7  7  7  7  8  8  8  8  8  8  8  8  8  8</span>
<span class="co"># [701]  8  8  8  8  8  9  9  9  9  9  9  9  9  9  9  9  9  9  9  9 10 10 10 10 10</span>
<span class="co"># [726] 10 10 10 10 10 10 10 10 10 10 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11</span>
<span class="co"># [751] 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 13 13 13 13 13 13 13 13 13 13</span>
<span class="co"># [776] 13 13 13 13 13</span></pre></div>
<p>Para substituir nÃºmeros de uma determinada coluna por uma substituiÃ§Ã£o especificada, use <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_number()</code></a>. Por padrÃ£o, os nÃºmeros sÃ£o substituÃ­dos por "". O argumento <code>drop</code> e<code>pull</code> tambÃ©m podem ser usados, como mostrado acima.</p>
<div class="sourceCode" id="cb90"><pre class="downlit">
<span class="fu">replace_number</span><span class="op">(</span><span class="va">maize</span>, <span class="va">HIB</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA new_var</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">#  1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609 H      </span>
<span class="co">#  2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427 H      </span>
<span class="co">#  3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497 H      </span>
<span class="co">#  4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523 H      </span>
<span class="co">#  5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551 H      </span>
<span class="co">#  6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529 H      </span>
<span class="co">#  7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294 H      </span>
<span class="co">#  8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528 H      </span>
<span class="co">#  9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538 H      </span>
<span class="co"># 10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582 H      </span>
<span class="co"># # ... with 770 more rows</span>
<span class="fu">replace_number</span><span class="op">(</span><span class="va">maize</span>,
               var <span class="op">=</span> <span class="va">REP</span>,
               pattern <span class="op">=</span> <span class="st">"^I$"</span>,
               replacement <span class="op">=</span> <span class="st">"REP_1"</span>,
               new_var <span class="op">=</span> <span class="va">R_ONE</span>,
               .after <span class="op">=</span> <span class="st">"REP"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   REP   R_ONE  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    I     REP_1  2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    I     REP_1  2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    I     REP_1  2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    I     REP_1  2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    I     REP_1  2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    II    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    II    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    II    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    II    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    II    II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="extraindo-substituindo-e-removendo-strings" class="section level3" number="7.2.3">
<h3>
<span class="header-section-number">7.2.3</span> Extraindo, substituindo e removendo strings<a class="anchor" aria-label="anchor" href="#extraindo-substituindo-e-removendo-strings"><i class="fas fa-link"></i></a>
</h3>
<p>As funÃ§Ãµes <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_string()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_num_str.html"><code>replace_string()</code></a> sÃ£o usados no mesmo contexto de <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_number()</code></a> e <a href="https%20:%20//tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_number()</code></a>, mas para lidar com seqÃ¼Ãªncias de caracteres.</p>
<div class="sourceCode" id="cb91"><pre class="downlit">
<span class="fu">extract_string</span><span class="op">(</span><span class="va">maize</span>, <span class="va">HIB</span>, .after <span class="op">=</span> <span class="st">"HIB"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   new_var REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    H       I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    H       I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    H       I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    H       I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    H       I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    H       II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    H       II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    H       II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    H       II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    H       II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Para substituir strings, podemos usar a funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_strings()</code></a>.</p>
<div class="sourceCode" id="cb92"><pre class="downlit">
<span class="fu">replace_string</span><span class="op">(</span><span class="va">maize</span>,
               var <span class="op">=</span> <span class="va">HIB</span>,
               new_var <span class="op">=</span> <span class="va">HIBRIDO</span>,
               replacement <span class="op">=</span> <span class="st">"HIB_"</span>,
               .after <span class="op">=</span> <span class="st">"HIB"</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 11</span>
<span class="co">#    AMB   HIB   HIBRIDO REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1 A1    H1    HIB_1   I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2 A1    H1    HIB_1   I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3 A1    H1    HIB_1   I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4 A1    H1    HIB_1   I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5 A1    H1    HIB_1   I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6 A1    H1    HIB_1   II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7 A1    H1    HIB_1   II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8 A1    H1    HIB_1   II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9 A1    H1    HIB_1   II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10 A1    H1    HIB_1   II     3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
<p>Para remover todas as seqÃ¼Ãªncias de caracteres de um quadro de dados, use <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>remove_strings()</code></a>.</p>
<div class="sourceCode" id="cb93"><pre class="downlit">
<span class="fu">remove_strings</span><span class="op">(</span><span class="va">maize</span><span class="op">)</span>
<span class="co"># # A tibble: 780 x 10</span>
<span class="co">#      AMB   HIB   REP  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1     1     1    NA  2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2     1     1    NA  2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3     1     1    NA  2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4     1     1    NA  2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5     1     1    NA  2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6     1     1    NA  2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7     1     1    NA  3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8     1     1    NA  2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9     1     1    NA  3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10     1     1    NA  3.02  1.6   16.3  53.9 250.   430.   582</span>
<span class="co"># # ... with 770 more rows</span></pre></div>
</div>
<div id="formatando-strings" class="section level3" number="7.2.4">
<h3>
<span class="header-section-number">7.2.4</span> Formatando strings<a class="anchor" aria-label="anchor" href="#formatando-strings"><i class="fas fa-link"></i></a>
</h3>
<p>A funÃ§Ã£o <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>tidy_strings()</code></a> organiza cadeias de caracteres, colunas nÃ£o numÃ©ricas ou quaisquer colunas selecionadas em um quadro de dados, colocando todas as palavras em maiÃºsculas, substituindo qualquer espaÃ§o, tabulaÃ§Ã£o e caracteres de pontuaÃ§Ã£o por <code>_</code> e colocando <code>_</code> entre letras maiÃºsculas e minÃºsculas. Considere as seguintes cadeias de caracteres: <code>messy_env</code> por definiÃ§Ã£o deve representar um nÃ­vel Ãºnico do ambiente de fator (ambiente 1). <code>messy_gen</code> mostra seis genÃ³tipos, e<code>messy_int</code> representa a interaÃ§Ã£o desses genÃ³tipos com o ambiente 1.</p>
<div class="sourceCode" id="cb94"><pre class="downlit">
<span class="va">messy_env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ENV 1"</span>, <span class="st">"Env 1"</span>, <span class="st">"Env1"</span>, <span class="st">"env1"</span>, <span class="st">"Env.1"</span>, <span class="st">"Env_1"</span><span class="op">)</span>
<span class="va">messy_gen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"GEN1"</span>, <span class="st">"gen 2"</span>, <span class="st">"Gen.3"</span>, <span class="st">"gen-4"</span>, <span class="st">"Gen_5"</span>, <span class="st">"GEN_6"</span><span class="op">)</span>
<span class="va">messy_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Env1Gen1"</span>, <span class="st">"Env1_Gen2"</span>, <span class="st">"env1 gen3"</span>, <span class="st">"Env1 Gen4"</span>, <span class="st">"ENV_1GEN5"</span>, <span class="st">"ENV1GEN6"</span><span class="op">)</span></pre></div>
<p>Esses vetores de caracteres sÃ£o visualmente confusos. Vamos arrumÃ¡-los.</p>
<div class="sourceCode" id="cb95"><pre class="downlit">
<span class="fu">tidy_strings</span><span class="op">(</span><span class="va">messy_env</span><span class="op">)</span>
<span class="co"># [1] "ENV_1" "ENV_1" "ENV_1" "ENV_1" "ENV_1" "ENV_1"</span>
<span class="fu">tidy_strings</span><span class="op">(</span><span class="va">messy_gen</span><span class="op">)</span>
<span class="co"># [1] "GEN_1" "GEN_2" "GEN_3" "GEN_4" "GEN_5" "GEN_6"</span>
<span class="fu">tidy_strings</span><span class="op">(</span><span class="va">messy_int</span><span class="op">)</span>
<span class="co"># [1] "ENV_1_GEN_1" "ENV_1_GEN_2" "ENV_1_GEN_3" "ENV_1_GEN_4" "ENV_1_GEN_5"</span>
<span class="co"># [6] "ENV_1_GEN_6"</span></pre></div>
<p>O <code>tidy_strings()</code> tambÃ©m funciona para arrumar um quadro de dados inteiro ou colunas especÃ­ficas. Vamos criar um quadro de dados â€˜bagunÃ§adoâ€™ no contexto de testes de melhoramento de plantas.</p>
<div class="sourceCode" id="cb96"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Env <span class="op">=</span> <span class="va">messy_env</span>,
             gen <span class="op">=</span> <span class="va">messy_gen</span>,
             Env_GEN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span><span class="op">(</span><span class="va">Env</span>, <span class="va">gen</span><span class="op">)</span>,
             y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span> <span class="op">(</span><span class="fl">6</span>, <span class="fl">300</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="va">df</span>
<span class="co"># # A tibble: 6 x 4</span>
<span class="co">#   Env   gen   Env_GEN         y</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;       &lt;dbl&gt;</span>
<span class="co"># 1 ENV 1 GEN1  ENV 1.GEN1   294.</span>
<span class="co"># 2 Env 1 gen 2 Env 1.gen 2  300.</span>
<span class="co"># 3 Env1  Gen.3 Env1.Gen.3   291.</span>
<span class="co"># 4 env1  gen-4 env1.gen-4   302.</span>
<span class="co"># 5 Env.1 Gen_5 Env.1.Gen_5  293.</span>
<span class="co"># 6 Env_1 GEN_6 Env_1.GEN_6  318.</span>
<span class="fu">tidy_strings</span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co"># # A tibble: 6 x 4</span>
<span class="co">#   Env   gen   Env_GEN         y</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;</span>
<span class="co"># 1 ENV_1 GEN_1 ENV_1_GEN_1  294.</span>
<span class="co"># 2 ENV_1 GEN_2 ENV_1_GEN_2  300.</span>
<span class="co"># 3 ENV_1 GEN_3 ENV_1_GEN_3  291.</span>
<span class="co"># 4 ENV_1 GEN_4 ENV_1_GEN_4  302.</span>
<span class="co"># 5 ENV_1 GEN_5 ENV_1_GEN_5  293.</span>
<span class="co"># 6 ENV_1 GEN_6 ENV_1_GEN_6  318.</span>
<span class="fu">tidy_strings</span><span class="op">(</span><span class="va">df</span>, <span class="va">gen</span><span class="op">)</span>
<span class="co"># # A tibble: 6 x 4</span>
<span class="co">#   Env   gen   Env_GEN         y</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;       &lt;dbl&gt;</span>
<span class="co"># 1 ENV 1 GEN_1 ENV 1.GEN1   294.</span>
<span class="co"># 2 Env 1 GEN_2 Env 1.gen 2  300.</span>
<span class="co"># 3 Env1  GEN_3 Env1.Gen.3   291.</span>
<span class="co"># 4 env1  GEN_4 env1.gen-4   302.</span>
<span class="co"># 5 Env.1 GEN_5 Env.1.Gen_5  293.</span>
<span class="co"># 6 Env_1 GEN_6 Env_1.GEN_6  318.</span></pre></div>
</div>
</div>
<div id="selecionar-linhas-por-sua-posiÃ§Ã£o" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Selecionar linhas por sua posiÃ§Ã£o<a class="anchor" aria-label="anchor" href="#selecionar-linhas-por-sua-posi%C3%83%C2%A7%C3%83%C2%A3o"><i class="fas fa-link"></i></a>
</h2>
<p>A funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> Ã© usada para selecionar linhas por sua posiÃ§Ã£o ordinal no tibble. Os tibbles agrupados usam a posiÃ§Ã£o ordinal dentro do grupo.</p>
<div class="sourceCode" id="cb97"><pre class="downlit">
<span class="co"># seleciona as trÃªs primeiras linhas</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">maize</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609</span>
<span class="co"># 2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427</span>
<span class="co"># 3 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497</span>
<span class="co"># Seleciona as 3 Ãºltimas linhas</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">maize</span>, <span class="fl">778</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 10</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A4    H13   III    2.2   0.9   12.1  40.9  92.8  322.   288</span>
<span class="co"># 2 A4    H13   III    2.15  1.07  10.6  46.0  91.4  300.   305</span>
<span class="co"># 3 A4    H13   III    2.19  1.12  14.5  51.9 144.   352.   408</span>
<span class="co"># seleciona as duas primeiras linhas de cada ambiente</span>
<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">AMB</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>
<span class="co"># # A tibble: 8 x 10</span>
<span class="co"># # Groups:   AMB [4]</span>
<span class="co">#   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609</span>
<span class="co"># 2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427</span>
<span class="co"># 3 A2    H1    I      3.06  1.89  18.2  54.4  244.  421.   581</span>
<span class="co"># 4 A2    H1    I      3.04  1.89  15.4  53.4  193.  369.   523</span>
<span class="co"># 5 A3    H1    I      2.12  1.03  18.5  52.0  214.  382.   560</span>
<span class="co"># 6 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570</span>
<span class="co"># 7 A4    H1    I      2.13  1.1   12.8  47.6  144.  280.   516</span>
<span class="co"># 8 A4    H1    I      2.3   1.25  13.1  50.0  140.  230.   609</span></pre></div>
</div>
<div id="combinando-os-verbos-para-manipulaÃ§Ã£o" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Combinando os verbos para manipulaÃ§Ã£o<a class="anchor" aria-label="anchor" href="#combinando-os-verbos-para-manipula%C3%83%C2%A7%C3%83%C2%A3o"><i class="fas fa-link"></i></a>
</h2>
<p>Esta sessÃ£o tem o objetivo de demonstrar como os <em>verbos</em> <strong>dplyr</strong> em conjunto com as funÃ§Ãµes <code>pivot_longer()</code> do pacote <a href="https://tidyr.tidyverse.org/">tidyr</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://tidyr.tidyverse.org/" class="uri"&gt;https://tidyr.tidyverse.org/&lt;/a&gt;&lt;/p&gt;'><sup>21</sup></a> e <code><a href="https://tibble.tidyverse.org/reference/rownames.html">column_to_rownames()</a></code>  do pacote <a href="https://www.tidyverse.org/packages/">tibble</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://www.tidyverse.org/packages/" class="uri"&gt;https://www.tidyverse.org/packages/&lt;/a&gt;&lt;/p&gt;'><sup>22</sup></a> podem ser combinados para construir uma matriz dupla entrada onde as linhas correspondem aos genÃ³tipos e as colunas correspondem aos ambientes. Esta matriz serÃ¡ preenchida com o valor mÃ©dio da MGRA considerando apenas as duas primeiras repetiÃ§Ãµes de cada hÃ­brido em cada ambiente.




</p>
<div class="sourceCode" id="cb98"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">REP</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"I"</span>, <span class="st">"II"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">AMB</span>, <span class="va">HIB</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>MGRA_me <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">MGRA</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">HIB</span>, values_from <span class="op">=</span> <span class="va">MGRA_me</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">round_cols</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co"># # A tibble: 4 x 14</span>
<span class="co"># # Groups:   AMB [4]</span>
<span class="co">#   AMB      H1   H10   H11   H12   H13    H2    H3    H4    H5    H6    H7    H8</span>
<span class="co">#   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1     200.  185.  199.  174.  222.  205.  201.  204.  190.  238.  185.  198.</span>
<span class="co"># 2 A2     194.  151.  169.  136.  158.  219.  201.  193.  180.  204.  148.  116 </span>
<span class="co"># 3 A3     147.  117   127.  153.  186.  161.  146.  150   147.  127.  146.  149.</span>
<span class="co"># 4 A4     195.  180.  170.  191.  167   156.  148.  182.  209.  164.  195.  182.</span>
<span class="co"># # ... with 1 more variable: H9 &lt;dbl&gt;</span></pre></div>
<p>Note que a mesma tabela dupla entrada pode ser obtida com a funÃ§Ã£o <code>make_mat()</code> do pacote <code>metan</code>.</p>
<div class="sourceCode" id="cb99"><pre class="downlit">
<span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">REP</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"I"</span>, <span class="st">"II"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">make_mat</span><span class="op">(</span><span class="va">AMB</span>, <span class="va">HIB</span>, <span class="va">MGRA</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">round_cols</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#       H1   H10   H11   H12   H13    H2    H3    H4    H5    H6    H7    H8</span>
<span class="co"># A1 200.2 185.1 199.3 174.5 221.9 204.9 201.3 204.4 189.5 238.2 184.8 198.2</span>
<span class="co"># A2 193.8 151.3 168.7 136.2 158.3 218.8 200.6 193.3 180.1 204.5 148.2 116.0</span>
<span class="co"># A3 147.2 117.0 127.1 153.1 186.5 160.6 146.4 150.0 147.1 127.4 146.4 148.7</span>
<span class="co"># A4 195.2 179.5 169.5 190.9 167.0 155.5 147.7 182.1 208.7 164.3 195.4 181.9</span>
<span class="co">#       H9</span>
<span class="co"># A1 203.4</span>
<span class="co"># A2 107.2</span>
<span class="co"># A3 117.3</span>
<span class="co"># A4 154.8</span></pre></div>
</div>
<div id="trabalhando-com-duas-tabelas-ao-mesmo-tempo" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Trabalhando com duas tabelas ao mesmo tempo<a class="anchor" aria-label="anchor" href="#trabalhando-com-duas-tabelas-ao-mesmo-tempo"><i class="fas fa-link"></i></a>
</h2>
<div id="junÃ§Ãµes-com-mutaÃ§Ã£o-de-dados" class="section level3" number="7.5.1">
<h3>
<span class="header-section-number">7.5.1</span> JunÃ§Ãµes com mutaÃ§Ã£o de dados<a class="anchor" aria-label="anchor" href="#jun%C3%83%C2%A7%C3%83%C2%B5es-com-muta%C3%83%C2%A7%C3%83%C2%A3o-de-dados"><i class="fas fa-link"></i></a>
</h3>
<p>Ã‰ raro que uma anÃ¡lise de dados envolva apenas uma Ãºnica tabela de dados. Na prÃ¡tica, diversas tabela podem existir e ferramentas flexÃ­veis para combinÃ¡-las sÃ£o necessÃ¡rias. No <strong>dplyr</strong>, existem trÃªs famÃ­lias de <strong>verbos</strong> que permitem trabalhar com duas tabelas ao mesmo tempo, permitindo: (i) juntar tabelas, (ii) Filtrar registros e (iii) realizar operaÃ§Ãµes.</p>
<p>Os seguintes cÃ³digos criam trÃªs novos conjuntos de dados. <strong>maize2</strong> contÃ©m dados de duas repetiÃ§Ãµes para os hÃ­bridos H1:H5 nos ambientes H1 e H2. <strong>mean_h</strong> e <strong>mean_a</strong> contÃ©m as mÃ©dias para os hÃ­bridos e ambientes, respectivamente. </p>
<div class="sourceCode" id="cb100"><pre class="downlit">
<span class="va">maize_small</span> <span class="op">&lt;-</span> 
  <span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">HIB</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"H1"</span>, <span class="st">"H2"</span>, <span class="st">"H3"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">AMB</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A2"</span><span class="op">)</span><span class="op">)</span>

<span class="va">maize2</span> <span class="op">&lt;-</span> 
  <span class="va">maize_small</span> <span class="op">%&gt;%</span> 
  <span class="fu">means_by</span><span class="op">(</span><span class="va">AMB</span>, <span class="va">HIB</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">AMB</span><span class="op">:</span><span class="va">APLA</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">round_cols</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">maize2</span>
<span class="co"># # A tibble: 6 x 3</span>
<span class="co">#   AMB   HIB    APLA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1      2.7</span>
<span class="co"># 2 A1    H2      2.8</span>
<span class="co"># 3 A1    H3      2.9</span>
<span class="co"># 4 A2    H1      2.9</span>
<span class="co"># 5 A2    H2      2.9</span>
<span class="co"># 6 A2    H3      2.9</span>

<span class="va">mean_h</span> <span class="op">&lt;-</span> 
  <span class="va">maize_small</span> <span class="op">%&gt;%</span>
  <span class="fu">means_by</span><span class="op">(</span><span class="va">HIB</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">HIB</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"A"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">round_cols</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
  
<span class="va">mean_a</span> <span class="op">&lt;-</span>
  <span class="va">maize_small</span> <span class="op">%&gt;%</span>
  <span class="fu">means_by</span><span class="op">(</span><span class="va">AMB</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">AMB</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"ES"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">round_cols</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></pre></div>
<ul>
<li>Juntando a coluna <strong>MGRA</strong> e <strong>NGRA</strong> da tabela <strong>mean_h</strong> na tabela <strong>maize2</strong> considerando as variÃ¡veis com mesmo nome nas duas tabelas (neste caso, HIB)</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="downlit">
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">maize2</span>, <span class="va">mean_h</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">HIB</span>, <span class="va">MGRA</span>, <span class="va">NGRA</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"HIB"</span><span class="op">)</span>
<span class="co"># # A tibble: 6 x 5</span>
<span class="co">#   AMB   HIB    APLA  MGRA  NGRA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1      2.7  195.  506.</span>
<span class="co"># 2 A1    H2      2.8  211.  577.</span>
<span class="co"># 3 A1    H3      2.9  195.  542.</span>
<span class="co"># 4 A2    H1      2.9  195.  506.</span>
<span class="co"># 5 A2    H2      2.9  211.  577.</span>
<span class="co"># 6 A2    H3      2.9  195.  542.</span></pre></div>
<ul>
<li>Juntando as colunas da tabela <strong>mean_a</strong> na tabela <strong>maize2</strong>
</li>
</ul>
<div class="sourceCode" id="cb102"><pre class="downlit">
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">maize2</span>, <span class="va">mean_a</span>, by <span class="op">=</span> <span class="st">"AMB"</span><span class="op">)</span>
<span class="co"># # A tibble: 6 x 6</span>
<span class="co">#   AMB   HIB    APLA  AIES  CESP  DIES</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1      2.7   1.5  15.3  51.6</span>
<span class="co"># 2 A1    H2      2.8   1.5  15.3  51.6</span>
<span class="co"># 3 A1    H3      2.9   1.5  15.3  51.6</span>
<span class="co"># 4 A2    H1      2.9   1.8  15.4  51.8</span>
<span class="co"># 5 A2    H2      2.9   1.8  15.4  51.8</span>
<span class="co"># 6 A2    H3      2.9   1.8  15.4  51.8</span></pre></div>
</div>
<div id="junÃ§Ãµes-com-filtragem-de-dados" class="section level3" number="7.5.2">
<h3>
<span class="header-section-number">7.5.2</span> JunÃ§Ãµes com filtragem de dados<a class="anchor" aria-label="anchor" href="#jun%C3%83%C2%A7%C3%83%C2%B5es-com-filtragem-de-dados"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Filtrando as linhas da tabela <strong>maize2</strong> com base nas variÃ¡veis que combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb103"><pre class="downlit">
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">maize2</span>, <span class="va">mean_h</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"HIB"</span>, <span class="st">"APLA"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 3</span>
<span class="co">#   AMB   HIB    APLA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H3      2.9</span>
<span class="co"># 2 A2    H2      2.9</span>
<span class="co"># 3 A2    H3      2.9</span></pre></div>
<ul>
<li>Filtrando as linhas da tabela <strong>maize2</strong> com base nas variÃ¡veis que <strong>NÃƒO</strong> combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb104"><pre class="downlit">
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">maize2</span>, <span class="va">mean_h</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"HIB"</span>, <span class="st">"APLA"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 3</span>
<span class="co">#   AMB   HIB    APLA</span>
<span class="co">#   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co"># 1 A1    H1      2.7</span>
<span class="co"># 2 A1    H2      2.8</span>
<span class="co"># 3 A2    H1      2.9</span></pre></div>
</div>
<div id="operaÃ§Ãµes-com-conjuntos" class="section level3" number="7.5.3">
<h3>
<span class="header-section-number">7.5.3</span> OperaÃ§Ãµes com conjuntos<a class="anchor" aria-label="anchor" href="#opera%C3%83%C2%A7%C3%83%C2%B5es-com-conjuntos"><i class="fas fa-link"></i></a>
</h3>
<p>Nesta seÃ§Ã£o serÃ¡ demonstrado como Ã© possivel utilizar operaÃ§Ãµes de cojuntos como interseÃ§Ã£o e uniÃ£o. Ã‰ esperado que as entradas x e y tenham as mesmas variÃ¡veis. Para isto, vamos criar dois novos conjuntos de dados chamados <strong>data_1_to_5</strong> e <strong>data_3_to_10</strong>, quais contÃ©m, respectivamente as cinco primeiras linhas
e as linhas 3 a 10 de <strong>maize</strong>. Note que a funÃ§Ã£o <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code>  Ã© utilizada para selecionar as linhas com base em sua posiÃ§Ã£o.</p>
<div class="sourceCode" id="cb105"><pre class="downlit">
<span class="va">data_1_to_5</span> <span class="op">&lt;-</span> 
  <span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">add_cols</span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">data_3_to_10</span> <span class="op">&lt;-</span> 
  <span class="va">maize</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">add_cols</span><span class="op">(</span>id <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">10</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></pre></div>
<div id="interseÃ§Ã£o-de-conjuntos" class="section level4" number="7.5.3.1">
<h4>
<span class="header-section-number">7.5.3.1</span> InterseÃ§Ã£o de conjuntos<a class="anchor" aria-label="anchor" href="#interse%C3%83%C2%A7%C3%83%C2%A3o-de-conjuntos"><i class="fas fa-link"></i></a>
</h4>
<p>A funÃ§Ã£o <code><a href="https://generics.r-lib.org/reference/setops.html">intersect()</a></code> (interseÃ§Ã£o de conjunto) retorna somente as linhas presentes nos dois conjuntos, neste caso, as linhas 3, 4 and 5 do conjunto <strong>maize</strong></p>
<div class="sourceCode" id="cb106"><pre class="downlit">
<span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">intersect</a></span><span class="op">(</span><span class="va">data_1_to_5</span>, <span class="va">data_3_to_10</span><span class="op">)</span>
<span class="co"># # A tibble: 3 x 11</span>
<span class="co">#      id AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1     3 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497</span>
<span class="co"># 2     4 A1    H1    I      2.8   1.64  16.8  52.0  213.  408.   523</span>
<span class="co"># 3     5 A1    H1    I      2.62  1.55  15.9  51.6  224.  406.   551</span></pre></div>
</div>
<div id="uniÃ£o-de-conjuntos" class="section level4" number="7.5.3.2">
<h4>
<span class="header-section-number">7.5.3.2</span> UniÃ£o de conjuntos<a class="anchor" aria-label="anchor" href="#uni%C3%83%C2%A3o-de-conjuntos"><i class="fas fa-link"></i></a>
</h4>
<p>A funÃ§Ã£o <code><a href="https://generics.r-lib.org/reference/setops.html">union()</a></code> (uniÃ£o de conjunto) junta os dois conjuntos sem que haja duplicaÃ§Ã£o de registros.</p>
<div class="sourceCode" id="cb107"><pre class="downlit">
<span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">union</a></span><span class="op">(</span><span class="va">data_1_to_5</span>, <span class="va">data_3_to_10</span><span class="op">)</span>
<span class="co"># # A tibble: 10 x 11</span>
<span class="co">#       id AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#    &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#  1     1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609</span>
<span class="co">#  2     2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427</span>
<span class="co">#  3     3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497</span>
<span class="co">#  4     4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523</span>
<span class="co">#  5     5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551</span>
<span class="co">#  6     6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529</span>
<span class="co">#  7     7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294</span>
<span class="co">#  8     8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528</span>
<span class="co">#  9     9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538</span>
<span class="co"># 10    10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</span></pre></div>
</div>
<div id="diferenÃ§a-de-conjuntos" class="section level4" number="7.5.3.3">
<h4>
<span class="header-section-number">7.5.3.3</span> DiferenÃ§a de conjuntos<a class="anchor" aria-label="anchor" href="#diferen%C3%83%C2%A7a-de-conjuntos"><i class="fas fa-link"></i></a>
</h4>
<p>A funÃ§Ã£o <code><a href="https://generics.r-lib.org/reference/setops.html">setdiff()</a></code>  (diferenÃ§a de conjunto, ou complementar) cria uma tabela somente com os registros em <strong>data_1_to_5</strong> que nÃ£o estÃ£o em <strong>data_3_to_10</strong>.</p>
<div class="sourceCode" id="cb108"><pre class="downlit">
<span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">data_1_to_5</span>, <span class="va">data_3_to_10</span><span class="op">)</span>
<span class="co"># # A tibble: 2 x 11</span>
<span class="co">#      id AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA</span>
<span class="co">#   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co"># 1     1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609</span>
<span class="co"># 2     2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427</span></pre></div>

</div>
</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="entrada.html"><span class="header-section-number">6</span> Entrada de dados</a></div>
<div class="next"><a href="graph.html"><span class="header-section-number">8</span> Gráficos com o pacote ggplot2</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#manipula"><span class="header-section-number">7</span> Manipulação de dados</a></li>
<li>
<a class="nav-link" href="#trabalhando-com-linhas-e-colunas"><span class="header-section-number">7.1</span> Trabalhando com linhas e colunas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#selecionar-colunas"><span class="header-section-number">7.1.1</span> Selecionar colunas</a></li>
<li><a class="nav-link" href="#remover-linhas-ou-colunas"><span class="header-section-number">7.1.2</span> Remover linhas ou colunas</a></li>
<li><a class="nav-link" href="#ordenar-linhas"><span class="header-section-number">7.1.3</span> Ordenar linhas</a></li>
<li><a class="nav-link" href="#selecionar-top-n-linhas-baseado-em-valor"><span class="header-section-number">7.1.4</span> Selecionar top n linhas baseado em valor</a></li>
<li><a class="nav-link" href="#adicionar-novas-vari%C3%A1veis"><span class="header-section-number">7.1.5</span> Adicionar novas variáveis</a></li>
<li><a class="nav-link" href="#concatenar-colunas"><span class="header-section-number">7.1.6</span> Concatenar colunas</a></li>
<li><a class="nav-link" href="#formatar-nomes-de-coluna"><span class="header-section-number">7.1.7</span> Formatar nomes de coluna</a></li>
<li><a class="nav-link" href="#reordenando-colunas"><span class="header-section-number">7.1.8</span> Reordenando colunas</a></li>
<li><a class="nav-link" href="#obtendo-n%C3%ADveis-de-fatores"><span class="header-section-number">7.1.9</span> Obtendo níveis de fatores</a></li>
<li><a class="nav-link" href="#selecionar-linhas-com-base-em-seus-valores"><span class="header-section-number">7.1.10</span> Selecionar linhas com base em seus valores</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#trabalhando-com-n%C3%BAmeros-e-seq%C3%BC%C3%AAncias-de-caracteres"><span class="header-section-number">7.2</span> Trabalhando com números e seqüências de caracteres</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#arredondando"><span class="header-section-number">7.2.1</span> Arredondando</a></li>
<li><a class="nav-link" href="#extraindo-e-substituindo-n%C3%BAmeros"><span class="header-section-number">7.2.2</span> Extraindo e substituindo números</a></li>
<li><a class="nav-link" href="#extraindo-substituindo-e-removendo-strings"><span class="header-section-number">7.2.3</span> Extraindo, substituindo e removendo strings</a></li>
<li><a class="nav-link" href="#formatando-strings"><span class="header-section-number">7.2.4</span> Formatando strings</a></li>
</ul>
</li>
<li><a class="nav-link" href="#selecionar-linhas-por-sua-posi%C3%A7%C3%A3o"><span class="header-section-number">7.3</span> Selecionar linhas por sua posição</a></li>
<li><a class="nav-link" href="#combinando-os-verbos-para-manipula%C3%A7%C3%A3o"><span class="header-section-number">7.4</span> Combinando os verbos para manipulação</a></li>
<li>
<a class="nav-link" href="#trabalhando-com-duas-tabelas-ao-mesmo-tempo"><span class="header-section-number">7.5</span> Trabalhando com duas tabelas ao mesmo tempo</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#jun%C3%A7%C3%B5es-com-muta%C3%A7%C3%A3o-de-dados"><span class="header-section-number">7.5.1</span> Junções com mutação de dados</a></li>
<li><a class="nav-link" href="#jun%C3%A7%C3%B5es-com-filtragem-de-dados"><span class="header-section-number">7.5.2</span> Junções com filtragem de dados</a></li>
<li><a class="nav-link" href="#opera%C3%A7%C3%B5es-com-conjuntos"><span class="header-section-number">7.5.3</span> Operações com conjuntos</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/TiagoOlivoto/e-bookr/blob/master/07-data-manipulation.Rmd">View source</a></li>
          <li><a id="book-edit" href="https://github.com/TiagoOlivoto/e-bookr/edit/master/07-data-manipulation.Rmd">Edit this page</a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Software R para avaliaÃ§Ã£o de dados experimentais</strong>: Um foco em experimentos agronÃ´micos" was written by Tiago Olivoto, Bruno Giacomini Sari. It was last built on 2020-11-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
