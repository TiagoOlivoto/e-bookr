<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais</title>
  <meta name="description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="figures/cover.png" />
  <meta property="og:description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="github-repo" content="TiagoOlivoto/e-bookr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais" />
  
  <meta name="twitter:description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="twitter:image" content="figures/cover.png" />

<meta name="author" content="Tiago Olivoto, Bruno Giacomini Sari" />


<meta name="date" content="2019-08-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="entrada.html">
<link rel="next" href="graph.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#por-que-eu-deveria-ler-este-e-book"><i class="fa fa-check"></i>Por que eu deveria ler este e-Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estrutura"><i class="fa fa-check"></i>Estrutura</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conjunto-de-dados"><i class="fa fa-check"></i>Conjunto de dados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html"><i class="fa fa-check"></i>Sobre os autores</a><ul>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#tiago-olivoto"><i class="fa fa-check"></i>Tiago Olivoto</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#bruno-giacomini-sari"><i class="fa fa-check"></i>Bruno Giacomini Sari</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="detalhes-importantes.html"><a href="detalhes-importantes.html"><i class="fa fa-check"></i>Detalhes importantes</a></li>
<li class="part"><span><b>I Parte I o ambiente R</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introdução ao ambiente <em>R</em></a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#o-software-r"><i class="fa fa-check"></i><b>1.1</b> O software R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#o-software-rstudio"><i class="fa fa-check"></i><b>1.2</b> O software RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#meu-primeiro-script"><i class="fa fa-check"></i><b>1.3</b> Meu primeiro script</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>2</b> Tipos de objetos</a><ul>
<li class="chapter" data-level="2.1" data-path="objects.html"><a href="objects.html#vetores"><i class="fa fa-check"></i><b>2.1</b> Vetores</a></li>
<li class="chapter" data-level="2.2" data-path="objects.html"><a href="objects.html#matrizes"><i class="fa fa-check"></i><b>2.2</b> Matrizes</a></li>
<li class="chapter" data-level="2.3" data-path="objects.html"><a href="objects.html#data-frame"><i class="fa fa-check"></i><b>2.3</b> Data Frame</a></li>
<li class="chapter" data-level="2.4" data-path="objects.html"><a href="objects.html#tibbles"><i class="fa fa-check"></i><b>2.4</b> Tibbles</a></li>
<li class="chapter" data-level="2.5" data-path="objects.html"><a href="objects.html#lista"><i class="fa fa-check"></i><b>2.5</b> Lista</a></li>
<li class="chapter" data-level="2.6" data-path="objects.html"><a href="objects.html#funcoes"><i class="fa fa-check"></i><b>2.6</b> Funções</a></li>
<li class="chapter" data-level="2.7" data-path="objects.html"><a href="objects.html#identificando-as-classes-de-objetos"><i class="fa fa-check"></i><b>2.7</b> Identificando as classes de objetos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="math.html"><a href="math.html"><i class="fa fa-check"></i><b>3</b> Operações matemáticas</a></li>
<li class="chapter" data-level="4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>4</b> Loops</a></li>
<li class="chapter" data-level="5" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>5</b> Construindo uma tabela</a></li>
<li class="part"><span><b>II Parte II organização, manipulação e apresentação de dados</b></span></li>
<li class="chapter" data-level="6" data-path="entrada.html"><a href="entrada.html"><i class="fa fa-check"></i><b>6</b> Entrada de dados</a></li>
<li class="chapter" data-level="7" data-path="manipula.html"><a href="manipula.html"><i class="fa fa-check"></i><b>7</b> Manipulação de dados</a><ul>
<li class="chapter" data-level="7.1" data-path="manipula.html"><a href="manipula.html#adicionar-novas-variaveis"><i class="fa fa-check"></i><b>7.1</b> Adicionar novas variáveis</a></li>
<li class="chapter" data-level="7.2" data-path="manipula.html"><a href="manipula.html#selecionar-linhas-com-base-em-seus-valores"><i class="fa fa-check"></i><b>7.2</b> Selecionar linhas com base em seus valores</a></li>
<li class="chapter" data-level="7.3" data-path="manipula.html"><a href="manipula.html#resumir-um-conjunto-de-dados"><i class="fa fa-check"></i><b>7.3</b> Resumir um conjunto de dados</a></li>
<li class="chapter" data-level="7.4" data-path="manipula.html"><a href="manipula.html#selecionar-variaveis-com-base-em-seus-nomes"><i class="fa fa-check"></i><b>7.4</b> Selecionar variáveis com base em seus nomes</a></li>
<li class="chapter" data-level="7.5" data-path="manipula.html"><a href="manipula.html#ordenar-linhas"><i class="fa fa-check"></i><b>7.5</b> Ordenar linhas</a></li>
<li class="chapter" data-level="7.6" data-path="manipula.html"><a href="manipula.html#selecionar-linhas-por-sua-posicao"><i class="fa fa-check"></i><b>7.6</b> Selecionar linhas por sua posição</a></li>
<li class="chapter" data-level="7.7" data-path="manipula.html"><a href="manipula.html#selecionar-top-n-linhas-baseado-em-valor"><i class="fa fa-check"></i><b>7.7</b> Selecionar top n linhas baseado em valor</a></li>
<li class="chapter" data-level="7.8" data-path="manipula.html"><a href="manipula.html#combinando-os-verbos-para-manipulacao"><i class="fa fa-check"></i><b>7.8</b> Combinando os verbos para manipulação</a></li>
<li class="chapter" data-level="7.9" data-path="manipula.html"><a href="manipula.html#trabalhando-com-duas-tabelas-ao-mesmo-tempo"><i class="fa fa-check"></i><b>7.9</b> Trabalhando com duas tabelas ao mesmo tempo</a></li>
<li class="chapter" data-level="7.10" data-path="manipula.html"><a href="manipula.html#juncoes-com-mutacao-de-dados"><i class="fa fa-check"></i><b>7.10</b> Junções com mutação de dados</a></li>
<li class="chapter" data-level="7.11" data-path="manipula.html"><a href="manipula.html#juncoes-com-filtragem-de-dados"><i class="fa fa-check"></i><b>7.11</b> Junções com filtragem de dados</a></li>
<li class="chapter" data-level="7.12" data-path="manipula.html"><a href="manipula.html#operacoes-com-conjuntos"><i class="fa fa-check"></i><b>7.12</b> Operações com conjuntos</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="graph.html"><a href="graph.html"><i class="fa fa-check"></i><b>8</b> Gráficos com o pacote ggplot2</a><ul>
<li class="chapter" data-level="8.1" data-path="graph.html"><a href="graph.html#o-pacote-ggplot2"><i class="fa fa-check"></i><b>8.1</b> O pacote <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.2" data-path="graph.html"><a href="graph.html#meu-primeiro-grafico-em-ggplot2"><i class="fa fa-check"></i><b>8.2</b> Meu primeiro gráfico em <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.3" data-path="graph.html"><a href="graph.html#as-camadas-de-um-grafico-ggplot2"><i class="fa fa-check"></i><b>8.3</b> As camadas de um gráfico <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.4" data-path="graph.html"><a href="graph.html#aesthetics-estetica"><i class="fa fa-check"></i><b>8.4</b> Aesthetics (estética)</a></li>
<li class="chapter" data-level="8.5" data-path="graph.html"><a href="graph.html#facet-facetas"><i class="fa fa-check"></i><b>8.5</b> Facet (facetas)</a></li>
<li class="chapter" data-level="8.6" data-path="graph.html"><a href="graph.html#theme-temas"><i class="fa fa-check"></i><b>8.6</b> Theme (temas)</a></li>
<li class="chapter" data-level="8.7" data-path="graph.html"><a href="graph.html#geoms-geometria"><i class="fa fa-check"></i><b>8.7</b> Geoms (geometria)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exporta.html"><a href="exporta.html"><i class="fa fa-check"></i><b>9</b> Exportando dados</a><ul>
<li class="chapter" data-level="9.1" data-path="exporta.html"><a href="exporta.html#exportando-com-diferentes-extensoes"><i class="fa fa-check"></i><b>9.1</b> Exportando com diferentes extensões</a></li>
<li class="chapter" data-level="9.2" data-path="exporta.html"><a href="exporta.html#exportanto-graficos"><i class="fa fa-check"></i><b>9.2</b> Exportanto gráficos</a></li>
</ul></li>
<li class="part"><span><b>III Parte III análise de dados</b></span></li>
<li class="chapter" data-level="10" data-path="analdata.html"><a href="analdata.html"><i class="fa fa-check"></i><b>10</b> Análise de dados experimentais</a><ul>
<li class="chapter" data-level="10.1" data-path="analdata.html"><a href="analdata.html#ebasic"><i class="fa fa-check"></i><b>10.1</b> Estatistica básica</a><ul>
<li class="chapter" data-level="10.1.1" data-path="analdata.html"><a href="analdata.html#medidas-de-tendencia-central"><i class="fa fa-check"></i><b>10.1.1</b> Medidas de tendência central</a></li>
<li class="chapter" data-level="10.1.2" data-path="analdata.html"><a href="analdata.html#medidas-de-variabilidade"><i class="fa fa-check"></i><b>10.1.2</b> Medidas de variabilidade</a></li>
<li class="chapter" data-level="10.1.3" data-path="analdata.html"><a href="analdata.html#testes-de-aderencia"><i class="fa fa-check"></i><b>10.1.3</b> Testes de aderência</a></li>
<li class="chapter" data-level="10.1.4" data-path="analdata.html"><a href="analdata.html#intervalos-de-confianca"><i class="fa fa-check"></i><b>10.1.4</b> Intervalos de confiança</a></li>
<li class="chapter" data-level="10.1.5" data-path="analdata.html"><a href="analdata.html#teste-de-hipoteses-para-amostras-independentes"><i class="fa fa-check"></i><b>10.1.5</b> Teste de hipóteses para amostras independentes</a></li>
<li class="chapter" data-level="10.1.6" data-path="analdata.html"><a href="analdata.html#teste-de-hipoteses-para-amostras-dependentes"><i class="fa fa-check"></i><b>10.1.6</b> Teste de hipóteses para amostras dependentes</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="analdata.html"><a href="analdata.html#dbasic"><i class="fa fa-check"></i><b>10.2</b> Delineamentos básicos</a><ul>
<li class="chapter" data-level="10.2.1" data-path="analdata.html"><a href="analdata.html#principios-basicos"><i class="fa fa-check"></i><b>10.2.1</b> Princípios básicos</a></li>
<li class="chapter" data-level="10.2.2" data-path="analdata.html"><a href="analdata.html#pressupostos"><i class="fa fa-check"></i><b>10.2.2</b> Pressupostos</a></li>
<li class="chapter" data-level="10.2.3" data-path="analdata.html"><a href="analdata.html#estimacao"><i class="fa fa-check"></i><b>10.2.3</b> Estimação</a></li>
<li class="chapter" data-level="10.2.4" data-path="analdata.html"><a href="analdata.html#reparametrizacao-condicoes-marginais-ou-combinacoes-lineares"><i class="fa fa-check"></i><b>10.2.4</b> Reparametrização, condições marginais ou combinações lineares?</a></li>
<li class="chapter" data-level="10.2.5" data-path="analdata.html"><a href="analdata.html#delineamento-inteiramente-casualizado-dic"><i class="fa fa-check"></i><b>10.2.5</b> Delineamento inteiramente casualizado (DIC)</a></li>
<li class="chapter" data-level="10.2.6" data-path="analdata.html"><a href="analdata.html#delineamento-blocos-ao-acaso-dbc"><i class="fa fa-check"></i><b>10.2.6</b> Delineamento blocos ao acaso (DBC)</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="analdata.html"><a href="analdata.html#transformacao-de-dados"><i class="fa fa-check"></i><b>10.3</b> Transformação de dados</a></li>
<li class="chapter" data-level="10.4" data-path="analdata.html"><a href="analdata.html#ancova"><i class="fa fa-check"></i><b>10.4</b> Análise de covariância (ANCOVA)</a><ul>
<li class="chapter" data-level="10.4.1" data-path="analdata.html"><a href="analdata.html#introducao"><i class="fa fa-check"></i><b>10.4.1</b> Introdução</a></li>
<li class="chapter" data-level="10.4.2" data-path="analdata.html"><a href="analdata.html#modelo-estatistico"><i class="fa fa-check"></i><b>10.4.2</b> Modelo estatístico</a></li>
<li class="chapter" data-level="10.4.3" data-path="analdata.html"><a href="analdata.html#independencia-entre-a-covariavel-e-os-efeitos-de-tratamento"><i class="fa fa-check"></i><b>10.4.3</b> Independência entre a covariável e os efeitos de tratamento</a></li>
<li class="chapter" data-level="10.4.4" data-path="analdata.html"><a href="analdata.html#homogeneidade-dos-slopes-da-regressao"><i class="fa fa-check"></i><b>10.4.4</b> Homogeneidade dos <em>slopes</em> da regressão</a></li>
<li class="chapter" data-level="10.4.5" data-path="analdata.html"><a href="analdata.html#um-exemplo-numerico"><i class="fa fa-check"></i><b>10.4.5</b> Um exemplo numérico</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="analdata.html"><a href="analdata.html#general"><i class="fa fa-check"></i><b>10.5</b> Análise de dados não gaussianos</a><ul>
<li class="chapter" data-level="10.5.1" data-path="analdata.html"><a href="analdata.html#da-analise-de-variacao-aos-modelos-lineares-mistos-generalizados"><i class="fa fa-check"></i><b>10.5.1</b> Da análise de variação aos modelos lineares mistos generalizados</a></li>
<li class="chapter" data-level="10.5.2" data-path="analdata.html"><a href="analdata.html#estrategias-para-analise-de-dados-nao-gaussianos"><i class="fa fa-check"></i><b>10.5.2</b> Estratégias para análise de dados não gaussianos</a></li>
<li class="chapter" data-level="10.5.3" data-path="analdata.html"><a href="analdata.html#introducao-aos-modelos-lineares-generalizados"><i class="fa fa-check"></i><b>10.5.3</b> Introdução aos modelos lineares generalizados</a></li>
<li class="chapter" data-level="10.5.4" data-path="analdata.html"><a href="analdata.html#dados-de-proporcao"><i class="fa fa-check"></i><b>10.5.4</b> Dados de proporção</a></li>
<li class="chapter" data-level="10.5.5" data-path="analdata.html"><a href="analdata.html#dados-de-contagem"><i class="fa fa-check"></i><b>10.5.5</b> Dados de contagem</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="analdata.html"><a href="analdata.html#efat"><i class="fa fa-check"></i><b>10.6</b> Experimentos bifatoriais</a><ul>
<li class="chapter" data-level="10.6.1" data-path="analdata.html"><a href="analdata.html#download-dos-dados"><i class="fa fa-check"></i><b>10.6.1</b> Download dos dados</a></li>
<li class="chapter" data-level="10.6.2" data-path="analdata.html"><a href="analdata.html#qualitativo-vs-quantitativo"><i class="fa fa-check"></i><b>10.6.2</b> Qualitativo vs quantitativo</a></li>
<li class="chapter" data-level="10.6.3" data-path="analdata.html"><a href="analdata.html#qualitativo-vs-qualitativo"><i class="fa fa-check"></i><b>10.6.3</b> Qualitativo vs qualitativo</a></li>
<li class="chapter" data-level="10.6.4" data-path="analdata.html"><a href="analdata.html#quantitativo-vs-quantitativo"><i class="fa fa-check"></i><b>10.6.4</b> Quantitativo vs quantitativo</a></li>
<li class="chapter" data-level="10.6.5" data-path="analdata.html"><a href="analdata.html#experimentos-em-parcelas-subdivididas"><i class="fa fa-check"></i><b>10.6.5</b> Experimentos em parcelas subdivididas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="reg.html"><a href="reg.html"><i class="fa fa-check"></i><b>11</b> Análise de regressão</a><ul>
<li class="chapter" data-level="11.1" data-path="reg.html"><a href="reg.html#regressao-linear"><i class="fa fa-check"></i><b>11.1</b> Regressão Linear</a><ul>
<li class="chapter" data-level="11.1.1" data-path="reg.html"><a href="reg.html#estimacao-1"><i class="fa fa-check"></i><b>11.1.1</b> Estimação</a></li>
<li class="chapter" data-level="11.1.2" data-path="reg.html"><a href="reg.html#ajustando-regressoes-com-a-funcao-lm"><i class="fa fa-check"></i><b>11.1.2</b> Ajustando regressões com a função <code>lm()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="reg.html"><a href="reg.html#selecao-de-variaveis"><i class="fa fa-check"></i><b>11.1.3</b> Seleção de variáveis</a></li>
<li class="chapter" data-level="11.1.4" data-path="reg.html"><a href="reg.html#falta-de-ajuste"><i class="fa fa-check"></i><b>11.1.4</b> Falta de ajuste</a></li>
<li class="chapter" data-level="11.1.5" data-path="reg.html"><a href="reg.html#analise-dos-residuos"><i class="fa fa-check"></i><b>11.1.5</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="11.1.6" data-path="reg.html"><a href="reg.html#pontos-influentes"><i class="fa fa-check"></i><b>11.1.6</b> Pontos influentes</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="reg.html"><a href="reg.html#regressao-nao-linear"><i class="fa fa-check"></i><b>11.2</b> Regressão não linear</a><ul>
<li class="chapter" data-level="11.2.1" data-path="reg.html"><a href="reg.html#estimacao-2"><i class="fa fa-check"></i><b>11.2.1</b> Estimação</a></li>
<li class="chapter" data-level="11.2.2" data-path="reg.html"><a href="reg.html#ajustando-o-modelo-com-a-funcao-nls"><i class="fa fa-check"></i><b>11.2.2</b> Ajustando o modelo com a função <code>nls()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="reg.html"><a href="reg.html#analise-dos-residuos-1"><i class="fa fa-check"></i><b>11.2.3</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="11.2.4" data-path="reg.html"><a href="reg.html#medidas-de-nao-linearidade"><i class="fa fa-check"></i><b>11.2.4</b> Medidas de não linearidade</a></li>
<li class="chapter" data-level="11.2.5" data-path="reg.html"><a href="reg.html#comparacao-de-parametros"><i class="fa fa-check"></i><b>11.2.5</b> Comparação de parâmetros</a></li>
<li class="chapter" data-level="11.2.6" data-path="reg.html"><a href="reg.html#representacao-grafica-dos-modelos"><i class="fa fa-check"></i><b>11.2.6</b> Representação gráfica dos modelos</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="reg.html"><a href="reg.html#regressao-bisegmentada-com-plato"><i class="fa fa-check"></i><b>11.3</b> Regressão bisegmentada com platô</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relations.html"><a href="relations.html"><i class="fa fa-check"></i><b>12</b> Relações lineares entre variáveis</a><ul>
<li class="chapter" data-level="12.1" data-path="relations.html"><a href="relations.html#dados"><i class="fa fa-check"></i><b>12.1</b> Dados</a></li>
<li class="chapter" data-level="12.2" data-path="relations.html"><a href="relations.html#correlacao-linear"><i class="fa fa-check"></i><b>12.2</b> Correlação linear</a><ul>
<li class="chapter" data-level="12.2.1" data-path="relations.html"><a href="relations.html#visualizacao-grafica"><i class="fa fa-check"></i><b>12.2.1</b> Visualização gráfica</a></li>
<li class="chapter" data-level="12.2.2" data-path="relations.html"><a href="relations.html#estimativa-dos-coeficientes-de-correlacao"><i class="fa fa-check"></i><b>12.2.2</b> Estimativa dos coeficientes de correlação</a></li>
<li class="chapter" data-level="12.2.3" data-path="relations.html"><a href="relations.html#combinando-visualizacao-grafica-e-numerica-i"><i class="fa fa-check"></i><b>12.2.3</b> Combinando visualização gráfica e numérica (I)</a></li>
<li class="chapter" data-level="12.2.4" data-path="relations.html"><a href="relations.html#combinando-visualizacao-grafica-e-numerica-ii"><i class="fa fa-check"></i><b>12.2.4</b> Combinando visualização gráfica e numérica (II)</a></li>
<li class="chapter" data-level="12.2.5" data-path="relations.html"><a href="relations.html#combinando-visualizacao-grafica-e-numerica-iii"><i class="fa fa-check"></i><b>12.2.5</b> Combinando visualização gráfica e numérica (III)</a></li>
<li class="chapter" data-level="12.2.6" data-path="relations.html"><a href="relations.html#combinando-visualizacao-grafica-e-numerica-iv"><i class="fa fa-check"></i><b>12.2.6</b> Combinando visualização gráfica e numérica (IV)</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="relations.html"><a href="relations.html#correlacoes-geneticas"><i class="fa fa-check"></i><b>12.3</b> Correlações genéticas</a></li>
<li class="chapter" data-level="12.4" data-path="relations.html"><a href="relations.html#intervalo-de-confianca"><i class="fa fa-check"></i><b>12.4</b> Intervalo de confiança</a><ul>
<li class="chapter" data-level="12.4.1" data-path="relations.html"><a href="relations.html#parametrico"><i class="fa fa-check"></i><b>12.4.1</b> Paramétrico</a></li>
<li class="chapter" data-level="12.4.2" data-path="relations.html"><a href="relations.html#nao-parametrico"><i class="fa fa-check"></i><b>12.4.2</b> Não paramétrico</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="relations.html"><a href="relations.html#tamanho-da-amostra"><i class="fa fa-check"></i><b>12.5</b> Tamanho da amostra</a></li>
<li class="chapter" data-level="12.6" data-path="relations.html"><a href="relations.html#correlacao-parcial"><i class="fa fa-check"></i><b>12.6</b> Correlação parcial</a></li>
<li class="chapter" data-level="12.7" data-path="relations.html"><a href="relations.html#analise-de-trilha"><i class="fa fa-check"></i><b>12.7</b> Análise de trilha</a><ul>
<li class="chapter" data-level="12.7.1" data-path="relations.html"><a href="relations.html#introducao-1"><i class="fa fa-check"></i><b>12.7.1</b> Introdução</a></li>
<li class="chapter" data-level="12.7.2" data-path="relations.html"><a href="relations.html#estimacao-3"><i class="fa fa-check"></i><b>12.7.2</b> Estimação</a></li>
<li class="chapter" data-level="12.7.3" data-path="relations.html"><a href="relations.html#multicolinearidade"><i class="fa fa-check"></i><b>12.7.3</b> Multicolinearidade</a></li>
<li class="chapter" data-level="12.7.4" data-path="relations.html"><a href="relations.html#metodos-para-ajustar-a-multicolinearidade"><i class="fa fa-check"></i><b>12.7.4</b> Métodos para ajustar a multicolinearidade</a></li>
<li class="chapter" data-level="12.7.5" data-path="relations.html"><a href="relations.html#analise-tradicional"><i class="fa fa-check"></i><b>12.7.5</b> Análise tradicional</a></li>
<li class="chapter" data-level="12.7.6" data-path="relations.html"><a href="relations.html#incluindo-um-fator-de-correcao-k"><i class="fa fa-check"></i><b>12.7.6</b> Incluindo um fator de correção (k)</a></li>
<li class="chapter" data-level="12.7.7" data-path="relations.html"><a href="relations.html#excluindo-variaveis"><i class="fa fa-check"></i><b>12.7.7</b> Excluindo variáveis</a></li>
<li class="chapter" data-level="12.7.8" data-path="relations.html"><a href="relations.html#selecao-de-variaveis-em-analise-de-trilha"><i class="fa fa-check"></i><b>12.7.8</b> Seleção de variáveis em análise de trilha</a></li>
<li class="chapter" data-level="12.7.9" data-path="relations.html"><a href="relations.html#analise-de-trilha-para-cada-nivel-de-um-fator"><i class="fa fa-check"></i><b>12.7.9</b> Análise de trilha para cada nível de um fator</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="multivariate.html"><a href="multivariate.html"><i class="fa fa-check"></i><b>13</b> Análise multivariada</a><ul>
<li class="chapter" data-level="13.1" data-path="multivariate.html"><a href="multivariate.html#correlacoes-canonicas"><i class="fa fa-check"></i><b>13.1</b> Correlações canônicas</a></li>
<li class="chapter" data-level="13.2" data-path="multivariate.html"><a href="multivariate.html#analise-de-agrupamento"><i class="fa fa-check"></i><b>13.2</b> Análise de agrupamento</a><ul>
<li class="chapter" data-level="13.2.1" data-path="multivariate.html"><a href="multivariate.html#todas-as-linhas-e-todas-as-variaveis-numericas"><i class="fa fa-check"></i><b>13.2.1</b> Todas as linhas e todas as variáveis numéricas</a></li>
<li class="chapter" data-level="13.2.2" data-path="multivariate.html"><a href="multivariate.html#com-base-na-media-de-cada-genotipo"><i class="fa fa-check"></i><b>13.2.2</b> Com base na média de cada genótipo</a></li>
<li class="chapter" data-level="13.2.3" data-path="multivariate.html"><a href="multivariate.html#selecao-de-variaveis-1"><i class="fa fa-check"></i><b>13.2.3</b> Seleção de variáveis</a></li>
<li class="chapter" data-level="13.2.4" data-path="multivariate.html"><a href="multivariate.html#escolha-do-numero-de-clusters"><i class="fa fa-check"></i><b>13.2.4</b> Escolha do número de clusters</a></li>
<li class="chapter" data-level="13.2.5" data-path="multivariate.html"><a href="multivariate.html#dendrogramas-personalizados"><i class="fa fa-check"></i><b>13.2.5</b> Dendrogramas personalizados</a></li>
<li class="chapter" data-level="13.2.6" data-path="multivariate.html"><a href="multivariate.html#distancias-para-cada-ambiente"><i class="fa fa-check"></i><b>13.2.6</b> Distancias para cada ambiente</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="multivariate.html"><a href="multivariate.html#componentes-principais"><i class="fa fa-check"></i><b>13.3</b> Componentes principais</a><ul>
<li class="chapter" data-level="13.3.1" data-path="multivariate.html"><a href="multivariate.html#conceito"><i class="fa fa-check"></i><b>13.3.1</b> Conceito</a></li>
<li class="chapter" data-level="13.3.2" data-path="multivariate.html"><a href="multivariate.html#pacotes-r"><i class="fa fa-check"></i><b>13.3.2</b> Pacotes R</a></li>
<li class="chapter" data-level="13.3.3" data-path="multivariate.html"><a href="multivariate.html#formato-dos-dados"><i class="fa fa-check"></i><b>13.3.3</b> Formato dos dados</a></li>
<li class="chapter" data-level="13.3.4" data-path="multivariate.html"><a href="multivariate.html#codigo-r"><i class="fa fa-check"></i><b>13.3.4</b> Código R</a></li>
<li class="chapter" data-level="13.3.5" data-path="multivariate.html"><a href="multivariate.html#autovalores"><i class="fa fa-check"></i><b>13.3.5</b> Autovalores</a></li>
<li class="chapter" data-level="13.3.6" data-path="multivariate.html"><a href="multivariate.html#grafico-das-variaveis"><i class="fa fa-check"></i><b>13.3.6</b> Gráfico das variáveis</a></li>
<li class="chapter" data-level="13.3.7" data-path="multivariate.html"><a href="multivariate.html#grafico-de-individuos"><i class="fa fa-check"></i><b>13.3.7</b> Gráfico de indivíduos</a></li>
<li class="chapter" data-level="13.3.8" data-path="multivariate.html"><a href="multivariate.html#grafico-biplot"><i class="fa fa-check"></i><b>13.3.8</b> Gráfico biplot</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="multivariate.html"><a href="multivariate.html#k-means"><i class="fa fa-check"></i><b>13.4</b> K-means</a><ul>
<li class="chapter" data-level="13.4.1" data-path="multivariate.html"><a href="multivariate.html#conceito-1"><i class="fa fa-check"></i><b>13.4.1</b> Conceito</a></li>
<li class="chapter" data-level="13.4.2" data-path="multivariate.html"><a href="multivariate.html#pacotes-r-1"><i class="fa fa-check"></i><b>13.4.2</b> Pacotes R</a></li>
<li class="chapter" data-level="13.4.3" data-path="multivariate.html"><a href="multivariate.html#formato-dos-dados-e-codigos-r"><i class="fa fa-check"></i><b>13.4.3</b> Formato dos dados e códigos R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="interaction.html"><a href="interaction.html"><i class="fa fa-check"></i><b>14</b> Interação genótipo-<em>vs</em>-ambiente</a><ul>
<li class="chapter" data-level="14.1" data-path="interaction.html"><a href="interaction.html#analise-grafica-da-interacao"><i class="fa fa-check"></i><b>14.1</b> Análise gráfica da interação</a></li>
<li class="chapter" data-level="14.2" data-path="interaction.html"><a href="interaction.html#analise-de-variancia-individual"><i class="fa fa-check"></i><b>14.2</b> Análise de variância individual</a></li>
<li class="chapter" data-level="14.3" data-path="interaction.html"><a href="interaction.html#baseada-em-regressao"><i class="fa fa-check"></i><b>14.3</b> Baseada em regressão</a></li>
<li class="chapter" data-level="14.4" data-path="interaction.html"><a href="interaction.html#indice-de-confianca-genotipico"><i class="fa fa-check"></i><b>14.4</b> Índice de confiança genotípico</a></li>
<li class="chapter" data-level="14.5" data-path="interaction.html"><a href="interaction.html#indice-de-superioridade-genotipico"><i class="fa fa-check"></i><b>14.5</b> Índice de superioridade genotípico</a></li>
<li class="chapter" data-level="14.6" data-path="interaction.html"><a href="interaction.html#estratificacao-ambiental"><i class="fa fa-check"></i><b>14.6</b> Estratificação ambiental</a></li>
<li class="chapter" data-level="14.7" data-path="interaction.html"><a href="interaction.html#o-modelo-ammi"><i class="fa fa-check"></i><b>14.7</b> O modelo AMMI</a><ul>
<li class="chapter" data-level="14.7.1" data-path="interaction.html"><a href="interaction.html#ajuste-do-modelo"><i class="fa fa-check"></i><b>14.7.1</b> Ajuste do modelo</a></li>
<li class="chapter" data-level="14.7.2" data-path="interaction.html"><a href="interaction.html#analise-residual"><i class="fa fa-check"></i><b>14.7.2</b> Analise residual</a></li>
<li class="chapter" data-level="14.7.3" data-path="interaction.html"><a href="interaction.html#escolha-do-numero-de-termos-multiplicativos"><i class="fa fa-check"></i><b>14.7.3</b> Escolha do número de termos multiplicativos</a></li>
<li class="chapter" data-level="14.7.4" data-path="interaction.html"><a href="interaction.html#valores-estimados-pelo-modelo-ammi"><i class="fa fa-check"></i><b>14.7.4</b> Valores estimados pelo modelo AMMI</a></li>
<li class="chapter" data-level="14.7.5" data-path="interaction.html"><a href="interaction.html#indices-de-estabilidade-baseados-em-ammi"><i class="fa fa-check"></i><b>14.7.5</b> Índices de estabilidade baseados em AMMI</a></li>
<li class="chapter" data-level="14.7.6" data-path="interaction.html"><a href="interaction.html#biplots"><i class="fa fa-check"></i><b>14.7.6</b> Biplots</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="interaction.html"><a href="interaction.html#o-modelo-gge"><i class="fa fa-check"></i><b>14.8</b> O modelo GGE</a><ul>
<li class="chapter" data-level="14.8.1" data-path="interaction.html"><a href="interaction.html#data-centering"><i class="fa fa-check"></i><b>14.8.1</b> Data centering</a></li>
<li class="chapter" data-level="14.8.2" data-path="interaction.html"><a href="interaction.html#data-scaling"><i class="fa fa-check"></i><b>14.8.2</b> Data scaling</a></li>
<li class="chapter" data-level="14.8.3" data-path="interaction.html"><a href="interaction.html#singular-value-partition"><i class="fa fa-check"></i><b>14.8.3</b> Singular value partition</a></li>
<li class="chapter" data-level="14.8.4" data-path="interaction.html"><a href="interaction.html#ajustando-o-modelo-gge"><i class="fa fa-check"></i><b>14.8.4</b> Ajustando o modelo GGE</a></li>
<li class="chapter" data-level="14.8.5" data-path="interaction.html"><a href="interaction.html#valores-estimados-pelo-modelo-gge"><i class="fa fa-check"></i><b>14.8.5</b> Valores estimados pelo modelo GGE</a></li>
<li class="chapter" data-level="14.8.6" data-path="interaction.html"><a href="interaction.html#visualizando-o-biplot"><i class="fa fa-check"></i><b>14.8.6</b> Visualizando o Biplot</a></li>
</ul></li>
<li class="chapter" data-level="14.9" data-path="interaction.html"><a href="interaction.html#modelos-mistos-na-avaliacao-de-met"><i class="fa fa-check"></i><b>14.9</b> Modelos mistos na avaliação de MET</a><ul>
<li class="chapter" data-level="14.9.1" data-path="interaction.html"><a href="interaction.html#ajustando-o-modelo"><i class="fa fa-check"></i><b>14.9.1</b> Ajustando o modelo</a></li>
<li class="chapter" data-level="14.9.2" data-path="interaction.html"><a href="interaction.html#analise-dos-residuos-2"><i class="fa fa-check"></i><b>14.9.2</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="14.9.3" data-path="interaction.html"><a href="interaction.html#componentes-de-variancia-e-parametros-geneticos"><i class="fa fa-check"></i><b>14.9.3</b> Componentes de variância e parâmetros genéticos</a></li>
<li class="chapter" data-level="14.9.4" data-path="interaction.html"><a href="interaction.html#medias-preditas"><i class="fa fa-check"></i><b>14.9.4</b> Médias preditas</a></li>
<li class="chapter" data-level="14.9.5" data-path="interaction.html"><a href="interaction.html#indices-de-estabilidade-baseados-em-blup"><i class="fa fa-check"></i><b>14.9.5</b> Índices de estabilidade baseados em BLUP</a></li>
</ul></li>
<li class="chapter" data-level="14.10" data-path="interaction.html"><a href="interaction.html#ammi-ou-blup-decisao-em-cada-caso"><i class="fa fa-check"></i><b>14.10</b> AMMI ou BLUP? Decisão em cada caso!</a></li>
</ul></li>
<li class="appendix"><span><b>Apêndices</b></span></li>
<li class="chapter" data-level="A" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html"><i class="fa fa-check"></i><b>A</b> Resposta dos exercícios</a><ul>
<li class="chapter" data-level="A.1" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc1"><i class="fa fa-check"></i><b>A.1</b> Exercício 1</a></li>
<li class="chapter" data-level="A.2" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc2"><i class="fa fa-check"></i><b>A.2</b> Exercício 2</a></li>
<li class="chapter" data-level="A.3" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc3"><i class="fa fa-check"></i><b>A.3</b> Exercício 3</a></li>
<li class="chapter" data-level="A.4" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc4"><i class="fa fa-check"></i><b>A.4</b> Exercício 4</a></li>
<li class="chapter" data-level="A.5" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc5"><i class="fa fa-check"></i><b>A.5</b> Exercício 5</a></li>
<li class="chapter" data-level="A.6" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc6"><i class="fa fa-check"></i><b>A.6</b> Exercício 6</a></li>
<li class="chapter" data-level="A.7" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc7"><i class="fa fa-check"></i><b>A.7</b> Exercício 7</a></li>
<li class="chapter" data-level="A.8" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc8"><i class="fa fa-check"></i><b>A.8</b> Exercício 8</a></li>
<li class="chapter" data-level="A.9" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc9"><i class="fa fa-check"></i><b>A.9</b> Exercício 9</a></li>
<li class="chapter" data-level="A.10" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc10"><i class="fa fa-check"></i><b>A.10</b> Exercício 10</a></li>
<li class="chapter" data-level="A.11" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc11"><i class="fa fa-check"></i><b>A.11</b> Exercício 11</a></li>
<li class="chapter" data-level="A.12" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc12"><i class="fa fa-check"></i><b>A.12</b> Exercício 12</a></li>
<li class="chapter" data-level="A.13" data-path="resposta-dos-exercicios.html"><a href="resposta-dos-exercicios.html#exerc13"><i class="fa fa-check"></i><b>A.13</b> Exercício 13</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tabela-de-distribuicoes.html"><a href="tabela-de-distribuicoes.html"><i class="fa fa-check"></i>Tabela de distribuições</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Software R para avaliação de dados experimentais</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipula" class="section level1">
<h1><span class="header-section-number">Capítulo 7</span> Manipulação de dados</h1>
<p>Após seus dados estarem carregados no ambiente R, eles provavelmente necessitarão de alguma manimulação antes de serem utilizados em uma determinada análise. Esta manipulação pode envolver operações como exclusão de colunas, ordenamento de linhas com base em valores, criação de covariáveis (que serão resultado de operações com uma ou mais variáveis existentes), dentre muitas outras possibilidades. Felizmente, o pacote <strong>dplyr</strong>  permite que esta manimulação seja relativamente fácil, lógica (do ponto de vista de digitação de códigos) e rápida, pois ele integra a linguagem <code>C++</code> em suas funções.</p>
<p>O pacote <strong>dplyr</strong> é uma <em>gramática</em> de manipulação de dados. Nos rerferimos à <em>gramática</em> aqui porque ele fornece funções nomeadas como <em>verbos</em> simples, relacionados às tarefas mais comuns de manipulação de dados, para ajudá-lo a traduzir seus pensamentos em código. Este será o pacote utilizado para manipulação dos dados no decorrer deste material. De fato, a maioria dos dados em R podem ser manipulados utilizando os seguintes “verbos”.</p>
<ul>
<li><code>filter()</code> para selecionar linhas com base em seus valores.</li>
<li><code>arrange()</code> para reordenar as linhas.</li>
<li><code>select()</code> e <code>rename()</code> para selecionar variáveis com base em seus nomes.</li>
<li><code>mutate()</code> e <code>transmute()</code> para adicionar novas variáveis que são funções de variáveis existentes.</li>
<li><code>summarise()</code> para resumir vários valores para um único valor.</li>
<li><code>sample_n()</code> e <code>sample_frac()</code> para obter amostras aleatórias.</li>
</ul>
<p>Anteriomente mencionamos que a manipulação dos dados com o pacote <strong>dplyr</strong> é lógica do ponto de vista da implementação do código. Isto só é possivel devido a utilização do operador <code>%&gt;%</code> (<em>forward-pipe operator</em>), importado do pacote <code>magrittr</code>. Basicamente, este operador capta o argumento resultante de uma função à sua esquerda e passa como <em>input</em> à função à sua direita. Não é nossso objetivo aqui discutir os benefícios da utilização deste operador, mas uma pequena demonstração (com spoilers das funções do pacote dplyr) será apresentada. Considere as seguintes (e simples) operações. Crie um data frame com 100 linhas com as variáveis <em>x</em> e <em>y</em> contendo valores aleatórios. Adicione uma terceira variáveis (<em>z</em>) que será uma função da multiplicação de <em>x</em> e <em>y</em>, selecione apenas os valores de <em>z</em> menores que 10 e extraia a raiz quadrada destes valores. Finalmente, compute a média e armazene no object <code>mean_sqrt</code>.</p>
<ul>
<li>Utilizando as funções bases do R (código massivo)</li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb103-2" title="2">data =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb103-3" title="3">              <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb103-4" title="4">data<span class="op">$</span>z =<span class="st"> </span>data<span class="op">$</span>x <span class="op">*</span><span class="st"> </span>data<span class="op">$</span>y</a>
<a class="sourceLine" id="cb103-5" title="5">data =<span class="st"> </span><span class="kw">subset</span>(data, z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb103-6" title="6">data =<span class="st"> </span>data[, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb103-7" title="7">sqr_dat =<span class="st"> </span><span class="kw">sqrt</span>(data<span class="op">$</span>z)</a>
<a class="sourceLine" id="cb103-8" title="8">mean_sqrt =<span class="st"> </span><span class="kw">mean</span>(sqr_dat)</a>
<a class="sourceLine" id="cb103-9" title="9">mean_sqrt</a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<ul>
<li>Utilizando as funções bases do R (código mais limpo)</li>
</ul>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb105-2" title="2">data =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb105-3" title="3">              <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb105-4" title="4">data<span class="op">$</span>z =<span class="st"> </span>data<span class="op">$</span>x <span class="op">*</span><span class="st"> </span>data<span class="op">$</span>y</a>
<a class="sourceLine" id="cb105-5" title="5">mean_sqrt =<span class="st"> </span><span class="kw">mean</span>(<span class="kw">sqrt</span>(<span class="kw">subset</span>(data, z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)<span class="op">$</span>z))</a>
<a class="sourceLine" id="cb105-6" title="6">mean_sqrt</a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<ul>
<li>Utilizando o operdor <code>%&gt;%</code></li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb107-2" title="2">mean_sqrt =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb107-3" title="3">                   <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-4" title="4"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">z =</span> x <span class="op">*</span><span class="st"> </span>y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-5" title="5"><span class="st">            </span><span class="kw">filter</span>(z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-6" title="6"><span class="st">            </span><span class="kw">pull</span>(z) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-7" title="7"><span class="st">            </span><span class="kw">sqrt</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb107-8" title="8"><span class="st">            </span><span class="kw">mean</span>()</a>
<a class="sourceLine" id="cb107-9" title="9">mean_sqrt  </a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<p>A utilização do operador <code>%&gt;%</code> parece não trazer tantos benefícios neste exemplo, visto que objetivo aqui foi demonstrar como ele permite uma implementação lógica das operações realizadas, captando a saída da função diretamente à esquerda (acima neste caso) e passando para a próxima função. Em operações mais complexas, no entanto, o <code>%&gt;%</code> se mostrará muito mais útil.</p>
<p>O conjunto de dados <strong>maize</strong> será utilizado como exemplo para as operações de manipulação de dados. O primeiro passo é carregálo no ambiente de trabalho.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1">maize &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/data_R.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;maize&quot;</span>)</a>
<a class="sourceLine" id="cb109-2" title="2"><span class="kw">str</span>(maize)</a></code></pre></div>
<pre><code>Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   780 obs. of  10 variables:
 $ AMB : chr  &quot;A1&quot; &quot;A1&quot; &quot;A1&quot; &quot;A1&quot; ...
 $ HIB : chr  &quot;H1&quot; &quot;H1&quot; &quot;H1&quot; &quot;H1&quot; ...
 $ REP : chr  &quot;I&quot; &quot;I&quot; &quot;I&quot; &quot;I&quot; ...
 $ APLA: num  2.45 2.5 2.69 2.8 2.62 2.12 3.15 2.97 3.1 3.02 ...
 $ AIES: num  2.39 1.43 1.52 1.64 1.55 1.8 1.78 1.84 1.78 1.6 ...
 $ CESP: num  16.9 14.4 16.5 16.8 15.9 15 10.9 15 13.6 16.3 ...
 $ DIES: num  52.1 50.7 54.7 52 51.6 ...
 $ MGRA: num  228 187 230 213 224 ...
 $ MMG : num  375 437 464 408 406 ...
 $ NGRA: num  609 427 497 523 551 529 294 528 538 582 ...</code></pre>
<div id="adicionar-novas-variaveis" class="section level2">
<h2><span class="header-section-number">7.1</span> Adicionar novas variáveis</h2>
<p>A função <code>mutate()</code>  é utilizada quando se deseja adicionar novas variáveis no conjunto de dados. Estas variáveis são funções de variáveis existentes. Como exemplo, vamos criar uma nova variável chamada PRE_2 no conjunto de dados <code>maize</code>, qual será a razão entre AIES e APLA. Note que a função adiciona a nova variável e mantém todas as demais</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb111-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PRE_2 =</span> AIES<span class="op">/</span>APLA) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb111-3" title="3"><span class="st">  </span><span class="kw">select</span>(PRE_<span class="dv">2</span>)</a></code></pre></div>
<pre><code># A tibble: 780 x 1
   PRE_2
   &lt;dbl&gt;
 1 0.976
 2 0.572
 3 0.565
 4 0.586
 5 0.592
 6 0.849
 7 0.565
 8 0.620
 9 0.574
10 0.530
# ... with 770 more rows</code></pre>
<p>Utilizando a função <code>case_when()</code>  é possível criar uma variável baseado em um argumento <code>if()</code> vetorizado. <code>case_when()</code> é particularmente útil dentro da função <code>mutate()</code> quando você quer criar uma nova variável que depende de uma combinação complexa de variáveis existentes. No exemplo abaixo, uma nova variável será criada, dependendo dos valores de APLA, AIES ou CESP</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb113-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb113-3" title="3">    <span class="dt">CASE =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb113-4" title="4">      MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span> <span class="op">|</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="fl">1.3</span> <span class="op">|</span><span class="st"> </span>NGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">820</span> <span class="op">~</span><span class="st">  &quot;Selecionar&quot;</span>,</a>
<a class="sourceLine" id="cb113-5" title="5">      APLA <span class="op">&gt;</span><span class="st"> </span><span class="fl">2.3</span> <span class="op">~</span><span class="st"> &quot;Alto&quot;</span>,</a>
<a class="sourceLine" id="cb113-6" title="6">      MGRA <span class="op">&lt;</span><span class="st"> </span><span class="dv">130</span> <span class="op">~</span><span class="st"> &quot;Pouco produtivo&quot;</span>,</a>
<a class="sourceLine" id="cb113-7" title="7">      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Outro&quot;</span></a>
<a class="sourceLine" id="cb113-8" title="8">      )</a>
<a class="sourceLine" id="cb113-9" title="9">    )</a></code></pre></div>
<pre><code># A tibble: 780 x 11
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA CASE 
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609 Alto 
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427 Alto 
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497 Alto 
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523 Alto 
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551 Alto 
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529 Outro
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294 Alto 
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528 Alto 
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538 Alto 
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582 Alto 
# ... with 770 more rows</code></pre>
<p>A função <code>transmute()</code>   cria a nova variável e exclui todas as demais. Em adição, se o resultado da função precisa ser extraído para um vetor numérico, basta adicionar a função <code>pull()</code>, conforme segue</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1">vect =<span class="st"> </span>maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-2" title="2"><span class="st">       </span><span class="kw">transmute</span>(<span class="dt">PRE_2 =</span> AIES<span class="op">/</span>APLA) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb115-3" title="3"><span class="st">       </span><span class="kw">pull</span>()</a></code></pre></div>
</div>
<div id="selecionar-linhas-com-base-em-seus-valores" class="section level2">
<h2><span class="header-section-number">7.2</span> Selecionar linhas com base em seus valores</h2>
<p>Utilizando a função <code>filter()</code>  é possivel filtrar as linhas de um conjunto de dados com base no valor de suas variáveis. No primeiro exemplo, selecionaremos as linhas onde o valor da variável MGRA é maior que 280.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span>)</a></code></pre></div>
<pre><code># A tibble: 4 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
2 A1    H10   I      2.92  1.61  20.3  55.4  283.  441.   641
3 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698
4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</code></pre>
<p>No segundo exemplo, selecionaremos apenas as linhas onde a MGRA é maior que 220 <strong>OU</strong> a APLA é menor que 1.3 <strong>OU</strong> o NGRA é maior que 820.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span> <span class="op">|</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="fl">1.3</span> <span class="op">|</span><span class="st"> </span>NGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">820</span>)</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H6    I      2.92  1.64  18    56.0 289.   393.   734
 2 A1    H10   I      2.92  1.61  20.3  55.4 283.   441.   641
 3 A1    H13   II     2.47  1.28  15.3  53.0 291.   417.   698
 4 A2    H8    II     1.03  0.69  10.8  44.8  94.8  277.   342
 5 A2    H10   III    1.09  0.92  15    47.6 166.   299.   555
 6 A3    H10   I      1.04  0.71  14.8  45.5 112.   265.   423
 7 A3    H11   I      1     0.65  14.5  43.6 120.   210.   571
 8 A4    H8    I      2.65  1.67  18    50   277.   251.   903
 9 A4    H8    I      2.95  1.7   18.6  52.9 249.   302.   824
10 A4    H10   I      2.65  1.47  14    50.3 287.   275.   493</code></pre>
<p>No último exemplo, selecionaremos apenas as linhas onde MGRA é maior que é maior que 220 <strong>E</strong> a APLA é menor que 2.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb120-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">220</span> <span class="op">&amp;</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>)</a></code></pre></div>
<pre><code># A tibble: 1 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    II     1.97  1.63  17.1  54.7  230.  375.   614</code></pre>
<p>Isto é aproximadamente equivalente ao seguinte código R base.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1">maize[maize<span class="op">$</span>MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">220</span> <span class="op">&amp;</span><span class="st"> </span>maize<span class="op">$</span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>, ]</a></code></pre></div>
</div>
<div id="resumir-um-conjunto-de-dados" class="section level2">
<h2><span class="header-section-number">7.3</span> Resumir um conjunto de dados</h2>
<p>A função <code>count()</code> pode ser utilizada para contar valores que se repetem em uma determinada variável. Por exemplo, é possível identificar qual é o valor de <code>APLA</code> que mais se repete utilizando</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="kw">count</span>(maize, APLA, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code># A tibble: 143 x 2
    APLA     n
   &lt;dbl&gt; &lt;int&gt;
 1  2.6     20
 2  2.8     20
 3  2.5     16
 4  2       14
 5  2.92    14
 6  2.1     13
 7  2.3     12
 8  2.7     12
 9  1.92    11
10  2.04    11
# ... with 133 more rows</code></pre>
<p>Para identificar quais os valores distintos de <code>APLA</code> foram observados a função <code>distinct()</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1"><span class="kw">distinct</span>(maize, APLA)</a></code></pre></div>
<pre><code># A tibble: 143 x 1
    APLA
   &lt;dbl&gt;
 1  2.45
 2  2.5 
 3  2.69
 4  2.8 
 5  2.62
 6  2.12
 7  3.15
 8  2.97
 9  3.1 
10  3.02
# ... with 133 more rows</code></pre>
<p>Utilizando a função <code>summarise()</code> é possível criar uma ou mais variáveis escalares resumindo as variáveis de um tibble existente. Como resultado, uma linha é retornada. O seguinte código calcula a média global da MGRA e retorna o <em>n</em> utilizado na estimativa.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-2" title="2"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_mean =</span> <span class="kw">mean</span>(MGRA),</a>
<a class="sourceLine" id="cb127-3" title="3">            <span class="dt">n =</span> <span class="kw">n</span>())</a></code></pre></div>
<pre><code># A tibble: 1 x 2
  MGRA_mean     n
      &lt;dbl&gt; &lt;int&gt;
1      173.   780</code></pre>
<p>Muitas vezes é necessário computar uma determinada função (como a média) para cada nível de uma variável categórica. Felizmente, o pacote <strong>dplyr</strong> possibilita que isto seja realizado facilmente. Continuamos no mesmo exemplo anterior. Neste caso, no entanto, o objetivo é calcular a média da MGRA para cada híbrido. Utilizando a função <code>group_by()</code>  antes da função <code>summarise()</code>  uma linha de resultado para cada nível do fator híbrido é retornado.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb129-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb129-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_mean =</span> <span class="kw">mean</span>(MGRA),</a>
<a class="sourceLine" id="cb129-4" title="4">            <span class="dt">n =</span> <span class="kw">n</span>())</a></code></pre></div>
<pre><code># A tibble: 13 x 3
   HIB   MGRA_mean     n
   &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt;
 1 H1         184.    60
 2 H10        164.    60
 3 H11        167.    60
 4 H12        157.    60
 5 H13        180.    60
 6 H2         187.    60
 7 H3         169.    60
 8 H4         184.    60
 9 H5         184.    60
10 H6         188.    60
11 H7         171.    60
12 H8         160.    60
13 H9         153.    60</code></pre>
<p>Até aqui vimos como a média (global ou para cada híbrido) da MGRA pode ser calculada. Quase sempre, no entanto, quando calculamos a média (ou qualquer outra medida) em um conjunto de dados, queremos fazê-la para todas as variáveis numéricas. Implementar isto com <strong>dplyr</strong> é relativamente fácil. Existem basicamente três opções para isto, utilizando as variantes <code>summarise_all()</code>, <code>summarise_if()</code>, ou <code>summarise_at()</code>. Todos os <em>verbos</em> principais do pacote <strong>dplyr</strong> apresentam estas variantes, o que torna fácil aplicar a mesma função para múltiplas variáveis. Estas três variantes proporcionam: </p>
<ul>
<li><code>_all()</code> aplicar a função a todas as variáveis;</li>
<li><code>_at()</code> aplicar a função a variáveis selecionadas com vetores de caracteres ou utilizando <code>vars()</code></li>
<li><code>_if()</code> aplicar a função a variáveis selecionadas com uma função, por exemplo <code>is.numeric()</code>.</li>
</ul>
<p>Veremos como estas variantes funcionam, calculando a média para as variáveis do conjunto de dados.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb131-2" title="2"><span class="st">  </span><span class="kw">summarise_all</span>(mean)</a></code></pre></div>
<pre><code># A tibble: 1 x 10
    AMB   HIB   REP  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    NA    NA    NA  2.48  1.34  15.2  49.5  173.  339.  512.</code></pre>
<p>Note que utilizando a função <code>summarise_all()</code> a média para todas as variáveis numéricas foi calculada e um valor <code>NA</code> foi retornado para as variáveis categóricas. Se o objetivo é computar a média somente para as variáveis numéricas (o que é o mais lógico), a função <code>summarise_if()</code> é a melhor escolha.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-2" title="2"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, mean)</a></code></pre></div>
<pre><code># A tibble: 1 x 7
   APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  2.48  1.34  15.2  49.5  173.  339.  512.</code></pre>
<p>Funções próprias podem ser aplicadas dentro da função summarise para computar uma estatística personalizada. Como exemplo, vamos criar uma função chamada <code>mse</code> que retornará o valor da média e o erro padrão da média e aplicá-la para cada nível do fator AMB.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1">mse =<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb135-2" title="2">  me =<span class="st"> </span><span class="kw">round</span>(<span class="kw">mean</span>(x), <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb135-3" title="3">  se =<span class="st"> </span><span class="kw">round</span>(<span class="kw">sd</span>(x)<span class="op">/</span><span class="kw">sqrt</span>(<span class="kw">n</span>()), <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb135-4" title="4">  <span class="kw">return</span>(<span class="kw">paste</span>(me, <span class="st">&quot;+-&quot;</span>, se))</a>
<a class="sourceLine" id="cb135-5" title="5">}</a>
<a class="sourceLine" id="cb135-6" title="6">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb135-7" title="7"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb135-8" title="8"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_mean_se =</span> <span class="kw">mse</span>(MGRA))</a></code></pre></div>
<pre><code># A tibble: 4 x 2
  AMB   MGRA_mean_se    
  &lt;chr&gt; &lt;chr&gt;           
1 A1    199.437 +- 3.232
2 A2    168.436 +- 3.381
3 A3    146.811 +- 2.787
4 A4    177.072 +- 3.118</code></pre>
<p>Se desejamos computar mais de uma função para variáveis específicas, então o próximo código nos ajudará. Note que para aplicar mais de uma função é necessário declarar o argumento <code>.funs</code> e criar um vetor com o nome das funções. Neste caso, os sufixos <code>_m</code> e <code>_sd</code> representam a média e o desvio padrão, respectivamente.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-3" title="3"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&quot;M&quot;</span>),</a>
<a class="sourceLine" id="cb137-4" title="4">                    <span class="kw">ends_with</span>(<span class="st">&quot;S&quot;</span>),</a>
<a class="sourceLine" id="cb137-5" title="5">                    <span class="kw">contains</span>(<span class="st">&quot;GR&quot;</span>)),</a>
<a class="sourceLine" id="cb137-6" title="6">               <span class="dt">.funs =</span> <span class="kw">c</span>(<span class="dt">m =</span> mean, <span class="dt">sd =</span> sd))</a></code></pre></div>
<pre><code># A tibble: 4 x 11
  AMB   MGRA_m MMG_m AIES_m DIES_m NGRA_m MGRA_sd MMG_sd AIES_sd DIES_sd
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 A1      199.  360.   1.58   51.6   558.    45.1   58.1   0.187    3.23
2 A2      168.  334.   1.31   48.7   505.    47.2   67.9   0.369    3.53
3 A3      147.  318.   1.08   47.9   468.    38.9   61.7   0.225    3.57
4 A4      177.  343.   1.41   49.9   516.    43.5   58.6   0.212    3.35
# ... with 1 more variable: NGRA_sd &lt;dbl&gt;</code></pre>
<p>Nos deparamos aqui com três termos não vistos até então: <code>starts_with()</code>, <code>ends_with()</code> e <code>contains()</code>. Estes <em>select helpers</em> facilitam muito a seleção de variáveis. Estas funções nos ajudam a selecionar variávies baseado em seus nomes, da seguinte forma:</p>
<ul>
<li><code>starts_with()</code> seleciona variáveis que iniciam com um determinado prefixo. No exemplo anterior, a variável MGRA foi selecionada por esta função.</li>
<li><code>ends_with()</code> seleciona variáveis que terminam com um determinado sufixo. No exemplo anterior as variáveis AIES e DIES foram selecionadas por esta função.</li>
<li><code>contains()</code> seleciona variáveis que contém determinados caracteres. No exemplo anterior, NGRA foi selecionada pois contém <strong>GR</strong>, mas não inicia com M e nem termina com S.</li>
</ul>
</div>
<div id="selecionar-variaveis-com-base-em-seus-nomes" class="section level2">
<h2><span class="header-section-number">7.4</span> Selecionar variáveis com base em seus nomes</h2>
<p>A função <code>select()</code>  é utilizada para selecionar variáveis de um conjunto de dados. O seguinte código seleciona as variáveis MGRA e AIES do conjunto de dados</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-2" title="2"><span class="st">  </span><span class="kw">select</span>(MGRA, AIES)</a></code></pre></div>
<pre><code># A tibble: 780 x 2
    MGRA  AIES
   &lt;dbl&gt; &lt;dbl&gt;
 1 228.   2.39
 2 187.   1.43
 3 230.   1.52
 4 213.   1.64
 5 224.   1.55
 6 203.   1.8 
 7  75.2  1.78
 8 204.   1.84
 9 187.   1.78
10 250.   1.6 
# ... with 770 more rows</code></pre>
<p>Note que a seleção pode ser mais eficiente utilizando as variantes <code>select_all()</code>, <code>select_if()</code>, ou <code>select_at()</code>.


</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb141-2" title="2"><span class="st">  </span><span class="kw">select_at</span>(<span class="kw">vars</span>(<span class="kw">contains</span>(<span class="st">&quot;A&quot;</span>)))</a></code></pre></div>
<pre><code># A tibble: 780 x 5
   AMB    APLA  AIES  MGRA  NGRA
   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1     2.45  2.39 228.    609
 2 A1     2.5   1.43 187.    427
 3 A1     2.69  1.52 230.    497
 4 A1     2.8   1.64 213.    523
 5 A1     2.62  1.55 224.    551
 6 A1     2.12  1.8  203.    529
 7 A1     3.15  1.78  75.2   294
 8 A1     2.97  1.84 204.    528
 9 A1     3.1   1.78 187.    538
10 A1     3.02  1.6  250.    582
# ... with 770 more rows</code></pre>
<p>Se o objetivo é excluir as variáveis selecionadas, basta incluir o operador <code>-</code> antes dos nomes das variáveis. No próximo exemplo, serão selecionadas todas as variáveis, exceto aquelas que contém <strong>A</strong> no nome. Em adição, o nome da variável MMG será modificado para <code>Massa de mil grãos</code>.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-2" title="2"><span class="st">  </span><span class="kw">select_at</span>(<span class="kw">vars</span>(<span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;A&quot;</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-3" title="3"><span class="st">  </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">Massa de mil grãos</span><span class="st">`</span> =<span class="st">  </span>MMG)</a></code></pre></div>
<pre><code># A tibble: 780 x 5
   HIB   REP    CESP  DIES `Massa de mil grãos`
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;                &lt;dbl&gt;
 1 H1    I      16.9  52.1                 375.
 2 H1    I      14.4  50.7                 437.
 3 H1    I      16.5  54.7                 464.
 4 H1    I      16.8  52.0                 408.
 5 H1    I      15.9  51.6                 406.
 6 H1    II     15    51.4                 383.
 7 H1    II     10.9  41.9                 256.
 8 H1    II     15    53.4                 387.
 9 H1    II     13.6  50.8                 348.
10 H1    II     16.3  53.9                 430.
# ... with 770 more rows</code></pre>


<div class="tarefa">
<p><strong>Exercício 2</strong></p>
<ul>
<li><p>Crie uma variável chamada MGRA_kg qual será o resultado em quilogramas da massa de grãos.</p></li>
<li><p>Selecione somente as colunas HIB, AMB, REP e MGRA_Kg.</p></li>
<li><p>Selecione somente as cinco linhas com maior valor de MGRA_Kg.</p></li>
</ul>
</div>

<p><a href="resposta-dos-exercicios.html#exerc2">Resposta</a></p>
</div>
<div id="ordenar-linhas" class="section level2">
<h2><span class="header-section-number">7.5</span> Ordenar linhas</h2>
<p>A função <code>arrange()</code>  é utilizada para ordenar as linhas de um tibble (ou data.frames) com base em uma expressão envolvendo suas variáveis. Considerando as funções que vimos até aqui, vamos computar a média para a MGRA, criar uma nova variável chamada <strong>Rank</strong>, qual corresponde ao ranqueamento dos híbridos para a variável em questão e ordenar a variável Rank em ordem crescente, onde o híbrido com a maior média ficará na primeira linha.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_mean =</span> <span class="kw">mean</span>(MGRA)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Rank =</span> <span class="kw">rank</span>(MGRA_mean)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-5" title="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>Rank)</a></code></pre></div>
<pre><code># A tibble: 13 x 3
   HIB   MGRA_mean  Rank
   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
 1 H6         188.    13
 2 H2         187.    12
 3 H4         184.    11
 4 H1         184.    10
 5 H5         184.     9
 6 H13        180.     8
 7 H7         171.     7
 8 H3         169.     6
 9 H11        167.     5
10 H10        164.     4
11 H8         160.     3
12 H12        157.     2
13 H9         153.     1</code></pre>


<div class="tarefa">
<p><strong>Exercício 3</strong></p>
<ul>
<li>Considerando o exemplo anterior, ordene a variável <strong>Rank</strong> em ordem decrescente.</li>
</ul>
</div>

<p><a href="resposta-dos-exercicios.html#exerc3">Resposta</a></p>
<p>Ao combinar a função <code>group_by()</code> com <code>arrange()</code> é possível realizar o ordenamento para cada nível de um determinado fator. No exemplo abaixo, a variável <code>APLA</code> é ordenada de maneira crescente para cada híbrido.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(APLA, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code># A tibble: 780 x 10
# Groups:   HIB [13]
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A3    H1    II     1.93  0.93  13    50.0 120.   276.   433
 2 A3    H1    I      2     1.05  19.9  53.3 253.   444.   570
 3 A3    H1    I      2.07  1.05  13.2  47.9 110.   293.   377
 4 A3    H1    II     2.08  0.94  12    47.6 103.   334.   309
 5 A3    H1    III    2.1   0.97  17.5  50.8 222.   423.   524
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A3    H1    I      2.12  1.03  18.5  52.0 214.   382.   560
 8 A3    H1    III    2.12  0.96  15    56.8 174.   339.   512
 9 A3    H1    I      2.13  1.05  11.6  47.0  89.5  300.   298
10 A4    H1    I      2.13  1.1   12.8  47.6 144.   280.   516
# ... with 770 more rows</code></pre>
</div>
<div id="selecionar-linhas-por-sua-posicao" class="section level2">
<h2><span class="header-section-number">7.6</span> Selecionar linhas por sua posição</h2>
<p>A função <code>slice()</code> é usada para selecionar linhas por sua posição ordinal no tibble. Os tibbles agrupados usam a posição ordinal dentro do grupo.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="co"># seleciona as três primeiras linhas</span></a>
<a class="sourceLine" id="cb149-2" title="2"><span class="kw">slice</span>(maize, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427
3 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1"><span class="co"># Seleciona as 3 últimas linhas</span></a>
<a class="sourceLine" id="cb151-2" title="2"><span class="kw">slice</span>(maize, <span class="dv">778</span><span class="op">:</span><span class="kw">n</span>())</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A4    H13   III    2.2   0.9   12.1  40.9  92.8  322.   288
2 A4    H13   III    2.15  1.07  10.6  46.0  91.4  300.   305
3 A4    H13   III    2.19  1.12  14.5  51.9 144.   352.   408</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" title="1"><span class="co"># seleciona as duas primeiras linhas de cada ambiente</span></a>
<a class="sourceLine" id="cb153-2" title="2">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb153-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb153-4" title="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code># A tibble: 8 x 10
# Groups:   AMB [4]
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427
3 A2    H1    I      3.06  1.89  18.2  54.4  244.  421.   581
4 A2    H1    I      3.04  1.89  15.4  53.4  193.  369.   523
5 A3    H1    I      2.12  1.03  18.5  52.0  214.  382.   560
6 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570
7 A4    H1    I      2.13  1.1   12.8  47.6  144.  280.   516
8 A4    H1    I      2.3   1.25  13.1  50.0  140.  230.   609</code></pre>
</div>
<div id="selecionar-top-n-linhas-baseado-em-valor" class="section level2">
<h2><span class="header-section-number">7.7</span> Selecionar top n linhas baseado em valor</h2>
<p>A função <code>top_n()</code> é usada para selecionar linhas superiores ou inferiores em cada grupo.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" title="1"><span class="co"># seleciona as duas linhas com o maior valor de MGRA</span></a>
<a class="sourceLine" id="cb155-2" title="2"><span class="kw">top_n</span>(maize, <span class="dv">2</span>, MGRA)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
2 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" title="1"><span class="co"># seleciona as duas linhas com o menor valor de MGRA</span></a>
<a class="sourceLine" id="cb157-2" title="2"><span class="kw">top_n</span>(maize, <span class="dv">2</span>, <span class="op">-</span>MGRA)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H9    III    2.72  1.54  11    42.8  58.5  295.   198
2 A2    H8    I      1.92  0.63  12.1  39.7  59.5  243.   245</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1"><span class="co"># Maior produtividade em cada ambiente</span></a>
<a class="sourceLine" id="cb159-2" title="2">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb159-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb159-4" title="4"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">1</span>, MGRA)</a></code></pre></div>
<pre><code># A tibble: 4 x 10
# Groups:   AMB [4]
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698
2 A2    H6    III    3.18  1.62  19.2  53.0  270.  382.   708
3 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570
4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</code></pre>
</div>
<div id="combinando-os-verbos-para-manipulacao" class="section level2">
<h2><span class="header-section-number">7.8</span> Combinando os verbos para manipulação</h2>
<p>Esta sessão tem o objetivo de demonstrar como os <em>verbos</em> <strong>dplyr</strong> em conjunto com as funções <code>spread()</code> do pacote <a href="https://tidyr.tidyverse.org/">tidyr</a><a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a> e <code>column_to_rownames()</code>  do pacote <a href="https://www.tidyverse.org/packages/">tibble</a><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a> podem ser combinados para construir uma matriz dupla entrada onde as linhas correspondem aos genótipos e as colunas correspondem aos ambientes. Esta matriz será preenchida com o valor médio da MGRA considerando apenas as duas primeiras repetições de cada híbrido em cada ambiente.



</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb161-2" title="2"><span class="st">  </span><span class="kw">filter</span>(REP <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;II&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb161-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB, HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb161-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_me =</span> <span class="kw">mean</span>(MGRA)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb161-5" title="5"><span class="st">  </span><span class="kw">spread</span>(AMB, MGRA_me) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb161-6" title="6"><span class="st">  </span><span class="kw">column_to_rownames</span>(<span class="st">&quot;HIB&quot;</span>)</a></code></pre></div>
<pre><code>          A1       A2       A3       A4
H1  200.2324 193.7994 147.2241 195.1622
H10 185.0601 151.2758 116.9737 179.5325
H11 199.2856 168.6739 127.1498 169.4995
H12 174.4662 136.1734 153.0679 190.8522
H13 221.9482 158.2540 186.4972 166.9575
H2  204.9377 218.7569 160.6031 155.5251
H3  201.3172 200.5845 146.4285 147.6595
H4  204.3560 193.3265 150.0455 182.1166
H5  189.5024 180.1033 147.1086 208.6737
H6  238.1798 204.4870 127.4491 164.3174
H7  184.8208 148.1951 146.3534 195.3675
H8  198.2184 115.9920 148.6665 181.9194
H9  203.4182 107.2212 117.3108 154.8263</code></pre>
</div>
<div id="trabalhando-com-duas-tabelas-ao-mesmo-tempo" class="section level2">
<h2><span class="header-section-number">7.9</span> Trabalhando com duas tabelas ao mesmo tempo</h2>
</div>
<div id="juncoes-com-mutacao-de-dados" class="section level2">
<h2><span class="header-section-number">7.10</span> Junções com mutação de dados</h2>
<p>É raro que uma análise de dados envolva apenas uma única tabela de dados. Na prática, diversas tabela podem existir e ferramentas flexíveis para combiná-las são necessárias. No <strong>dplyr</strong>, existem três famílias de <strong>verbos</strong> que permitem trabalhar com duas tabelas ao mesmo tempo, permitindo: (i) juntar tabelas, (ii) Filtrar registros e (iii) realizar operações.</p>
<p>Os seguintes códigos criam três novos conjuntos de dados. <strong>maize2</strong> contém dados de duas repetições para os híbridos H1:H5 nos ambientes H1 e H2. <strong>mean_h</strong> e <strong>mean_a</strong> contém as médias para os híbridos e ambientes, respectivamente. </p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1">maize2  =<span class="st"> </span></a>
<a class="sourceLine" id="cb163-2" title="2"><span class="st">  </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-3" title="3"><span class="st">  </span><span class="kw">filter</span>(HIB <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;H1&quot;</span>, <span class="st">&quot;H2&quot;</span>, <span class="st">&quot;H3&quot;</span>,<span class="st">&quot;H4&quot;</span>,<span class="st">&quot;H5&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-4" title="4"><span class="st">  </span><span class="kw">filter</span>(AMB <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;A2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-5" title="5"><span class="st">  </span><span class="kw">group_by</span>(AMB, HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-6" title="6"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, mean)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb163-8" title="8"></a>
<a class="sourceLine" id="cb163-9" title="9">mean_h =<span class="st"> </span>maize2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-10" title="10"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-11" title="11"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, <span class="dt">.funs =</span> <span class="kw">c</span>(<span class="dt">m =</span>mean))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-12" title="12"><span class="st">  </span><span class="kw">select</span>(HIB, <span class="kw">contains</span>(<span class="st">&quot;A&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-13" title="13"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb163-14" title="14"></a>
<a class="sourceLine" id="cb163-15" title="15">mean_a =<span class="st"> </span>maize2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-16" title="16"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-17" title="17"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, <span class="dt">.funs =</span> <span class="kw">c</span>(<span class="dt">m =</span>mean))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-18" title="18"><span class="st">  </span><span class="kw">select</span>(AMB, <span class="kw">contains</span>(<span class="st">&quot;ES&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb163-19" title="19"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<ul>
<li>Juntando a coluna <strong>MGRA_m</strong> da tabela <strong>mean_h</strong> na tabela <strong>maize2</strong> considerando as variáveis com mesmo nome nas duas tabelas (neste caso, HIB)</li>
</ul>

<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1"><span class="kw">left_join</span>(maize2, mean_h <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb164-2" title="2"><span class="st">            </span><span class="kw">select</span>(HIB, MGRA_m))</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA MGRA_m
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 A1    H1     2.72  1.68  15.4  51.1  203.  382.  527.   195.
 2 A1    H2     2.79  1.34  15.0  51.9  204.  329.  622.   211.
 3 A1    H3     2.94  1.59  15.5  51.8  198.  325.  610.   195.
 4 A1    H4     2.87  1.68  16.0  50.7  202.  338.  603.   200.
 5 A1    H5     2.83  1.59  15.8  49.9  193.  356.  539.   189.
 6 A2    H1     2.93  1.80  15.0  51.9  188.  389.  484.   195.
 7 A2    H2     2.95  1.74  16.0  53.2  219.  416.  531.   211.
 8 A2    H3     2.94  1.75  15.3  50.3  191.  400.  475.   195.
 9 A2    H4     2.85  1.63  16.5  49.4  197.  389.  510.   200.
10 A2    H5     2.70  1.42  16.5  48.1  186.  333.  560.   189.</code></pre>
<ul>
<li>Juntando as colunas da tabela <strong>mean_g</strong> na tabela <strong>maize2</strong></li>
</ul>

<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1"><span class="kw">full_join</span>(maize2, mean_a)</a></code></pre></div>
<pre><code># A tibble: 10 x 12
   AMB   HIB    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA AIES_m CESP_m
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 A1    H1     2.72  1.68  15.4  51.1  203.  382.  527.   1.58   15.5
 2 A1    H2     2.79  1.34  15.0  51.9  204.  329.  622.   1.58   15.5
 3 A1    H3     2.94  1.59  15.5  51.8  198.  325.  610.   1.58   15.5
 4 A1    H4     2.87  1.68  16.0  50.7  202.  338.  603.   1.58   15.5
 5 A1    H5     2.83  1.59  15.8  49.9  193.  356.  539.   1.58   15.5
 6 A2    H1     2.93  1.80  15.0  51.9  188.  389.  484.   1.67   15.9
 7 A2    H2     2.95  1.74  16.0  53.2  219.  416.  531.   1.67   15.9
 8 A2    H3     2.94  1.75  15.3  50.3  191.  400.  475.   1.67   15.9
 9 A2    H4     2.85  1.63  16.5  49.4  197.  389.  510.   1.67   15.9
10 A2    H5     2.70  1.42  16.5  48.1  186.  333.  560.   1.67   15.9
# ... with 1 more variable: DIES_m &lt;dbl&gt;</code></pre>
</div>
<div id="juncoes-com-filtragem-de-dados" class="section level2">
<h2><span class="header-section-number">7.11</span> Junções com filtragem de dados</h2>
<ul>
<li>Filtrando as linhas da tabela <strong>maize</strong> com base nas variáveis que combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" title="1"><span class="kw">semi_join</span>(maize, mean_h)</a></code></pre></div>
<pre><code># A tibble: 300 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582
# ... with 290 more rows</code></pre>
<ul>
<li>Filtrando as linhas da tabela <strong>maize</strong> com base nas variáveis que <strong>NÃO</strong> combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1"><span class="kw">anti_join</span>(maize, mean_h)</a></code></pre></div>
<pre><code># A tibble: 480 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H6    I      2.89  1.71  17.2  53.3  219.  384.   570
 2 A1    H6    I      2.91  1.47  17.1  57.3  280.  420.   665
 3 A1    H6    I      2.88  1.39  16.5  53.2  224.  358.   627
 4 A1    H6    I      2.89  1.73  16.7  54.5  243.  377.   644
 5 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
 6 A1    H6    II     1.97  1.63  17.1  54.7  230.  375.   614
 7 A1    H6    II     2.93  1.56  14    49.8  165.  307.   537
 8 A1    H6    II     2.97  1.85  17.2  53.8  255.  432.   591
 9 A1    H6    II     2.89  1.81  17.7  53.2  240.  468.   513
10 A1    H6    II     2.93  1.6   18    53.9  237.  432.   549
# ... with 470 more rows</code></pre>
</div>
<div id="operacoes-com-conjuntos" class="section level2">
<h2><span class="header-section-number">7.12</span> Operações com conjuntos</h2>
<p>Nesta seção será demonstrado como é possivel utilizar operações de cojuntos como interseção e união. É esperado que as entradas x e y tenham as mesmas variáveis. Para isto, vamos criar dois novos conjuntos de dados chamados <strong>data_1_to_5</strong> e <strong>data_3_to_10</strong>, quais contém, respectivamente as cinco primeiras linhas
e as linhas 3 a 10 de <strong>maize</strong>. Note que a função <code>slice()</code>  é utilizada para selecionar as linhas com base em sua posição.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1">data_<span class="dv">1</span>_to_<span class="dv">5</span> =<span class="st"> </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb172-2" title="2"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb172-3" title="3">data_<span class="dv">3</span>_to_<span class="dv">10</span> =<span class="st"> </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb172-4" title="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<ul>
<li>Interseção de conjuntos</li>
</ul>
<p>A função <code>intersect()</code> (interseção de conjunto) retorna somente as linhas presentes nos dois conjuntos, neste caso, as linhas 3, 4 and 5 do conjunto <strong>maize</strong></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" title="1"><span class="kw">intersect</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497
2 A1    H1    I      2.8   1.64  16.8  52.0  213.  408.   523
3 A1    H1    I      2.62  1.55  15.9  51.6  224.  406.   551</code></pre>
<ul>
<li>União de conjuntos</li>
</ul>
<p>A função <code>union()</code> (união de conjunto) junta os dois conjuntos sem que haja duplicação de registros.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" title="1"><span class="kw">union</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</code></pre>
<ul>
<li>Diferença de conjuntos</li>
</ul>
<p>A função <code>setdiff()</code>  (diferença de conjunto, ou complementar) cria uma tabela somente com os registros em <strong>data_1_to_5</strong> que não estão em <strong>data_3_to_10</strong>.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" title="1"><span class="kw">setdiff</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="24">
<li id="fn24"><p><a href="https://tidyr.tidyverse.org/" class="uri">https://tidyr.tidyverse.org/</a><a href="manipula.html#fnref24" class="footnote-back">↩</a></p></li>
<li id="fn25"><p><a href="https://www.tidyverse.org/packages/" class="uri">https://www.tidyverse.org/packages/</a><a href="manipula.html#fnref25" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="entrada.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graph.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["html_r.pdf", "html_r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
