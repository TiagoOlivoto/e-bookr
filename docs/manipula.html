<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais</title>
  <meta name="description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="figures/cover.png" />
  <meta property="og:description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="github-repo" content="TiagoOlivoto/e-bookr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 7 Manipulação de dados | Software R para avaliação de dados experimentais" />
  
  <meta name="twitter:description" content="Este documento tem como objetivo apresentar o ambiente R de programação e diversas aplicações de abordagens estatísticas na análise de experimentos agrícolas." />
  <meta name="twitter:image" content="figures/cover.png" />

<meta name="author" content="Tiago Olivoto, Bruno Giacomini Sari" />


<meta name="date" content="2020-03-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="entrada.html"/>
<link rel="next" href="graph.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.12/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<script src="libs/jszip-1.10.20/jszip.min.js"></script>
<link href="libs/dt-ext-buttons-1.10.20/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.20/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.20/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.20/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.20/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.20/js/buttons.print.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.20/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.20/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#por-que-eu-deveria-ler-este-e-book"><i class="fa fa-check"></i>Por que eu deveria ler este e-Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estrutura"><i class="fa fa-check"></i>Estrutura</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conjunto-de-dados"><i class="fa fa-check"></i>Conjunto de dados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html"><i class="fa fa-check"></i>Sobre os autores</a><ul>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#tiago-olivoto"><i class="fa fa-check"></i>Tiago Olivoto</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#bruno-giacomini-sari"><i class="fa fa-check"></i>Bruno Giacomini Sari</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="detalhes-importantes.html"><a href="detalhes-importantes.html"><i class="fa fa-check"></i>Detalhes importantes</a></li>
<li class="part"><span><b>I Parte I o ambiente R</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introdução ao ambiente <em>R</em></a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#o-software-r"><i class="fa fa-check"></i><b>1.1</b> O software R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#o-software-rstudio"><i class="fa fa-check"></i><b>1.2</b> O software RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#meu-primeiro-script"><i class="fa fa-check"></i><b>1.3</b> Meu primeiro script</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>2</b> Tipos de objetos</a><ul>
<li class="chapter" data-level="2.1" data-path="objects.html"><a href="objects.html#vetores"><i class="fa fa-check"></i><b>2.1</b> Vetores</a></li>
<li class="chapter" data-level="2.2" data-path="objects.html"><a href="objects.html#matrizes"><i class="fa fa-check"></i><b>2.2</b> Matrizes</a></li>
<li class="chapter" data-level="2.3" data-path="objects.html"><a href="objects.html#data-frame"><i class="fa fa-check"></i><b>2.3</b> Data Frame</a></li>
<li class="chapter" data-level="2.4" data-path="objects.html"><a href="objects.html#tibbles"><i class="fa fa-check"></i><b>2.4</b> Tibbles</a></li>
<li class="chapter" data-level="2.5" data-path="objects.html"><a href="objects.html#lista"><i class="fa fa-check"></i><b>2.5</b> Lista</a></li>
<li class="chapter" data-level="2.6" data-path="objects.html"><a href="objects.html#funções"><i class="fa fa-check"></i><b>2.6</b> Funções</a></li>
<li class="chapter" data-level="2.7" data-path="objects.html"><a href="objects.html#identificando-as-classes-de-objetos"><i class="fa fa-check"></i><b>2.7</b> Identificando as classes de objetos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="math.html"><a href="math.html"><i class="fa fa-check"></i><b>3</b> Operações matemáticas</a></li>
<li class="chapter" data-level="4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>4</b> Loops</a></li>
<li class="chapter" data-level="5" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>5</b> Construindo uma tabela</a></li>
<li class="part"><span><b>II Parte II organização, manipulação e apresentação de dados</b></span></li>
<li class="chapter" data-level="6" data-path="entrada.html"><a href="entrada.html"><i class="fa fa-check"></i><b>6</b> Entrada de dados</a></li>
<li class="chapter" data-level="7" data-path="manipula.html"><a href="manipula.html"><i class="fa fa-check"></i><b>7</b> Manipulação de dados</a><ul>
<li class="chapter" data-level="7.1" data-path="manipula.html"><a href="manipula.html#trabalhando-com-linhas-e-colunas"><i class="fa fa-check"></i><b>7.1</b> Trabalhando com linhas e colunas</a><ul>
<li class="chapter" data-level="7.1.1" data-path="manipula.html"><a href="manipula.html#selecionar-colunas"><i class="fa fa-check"></i><b>7.1.1</b> Selecionar colunas</a></li>
<li class="chapter" data-level="7.1.2" data-path="manipula.html"><a href="manipula.html#remover-linhas-ou-colunas"><i class="fa fa-check"></i><b>7.1.2</b> Remover linhas ou colunas</a></li>
<li class="chapter" data-level="7.1.3" data-path="manipula.html"><a href="manipula.html#ordenar-linhas"><i class="fa fa-check"></i><b>7.1.3</b> Ordenar linhas</a></li>
<li class="chapter" data-level="7.1.4" data-path="manipula.html"><a href="manipula.html#selecionar-top-n-linhas-baseado-em-valor"><i class="fa fa-check"></i><b>7.1.4</b> Selecionar top n linhas baseado em valor</a></li>
<li class="chapter" data-level="7.1.5" data-path="manipula.html"><a href="manipula.html#adicionar-novas-variáveis"><i class="fa fa-check"></i><b>7.1.5</b> Adicionar novas variáveis</a></li>
<li class="chapter" data-level="7.1.6" data-path="manipula.html"><a href="manipula.html#concatenar-colunas"><i class="fa fa-check"></i><b>7.1.6</b> Concatenar colunas</a></li>
<li class="chapter" data-level="7.1.7" data-path="manipula.html"><a href="manipula.html#formatar-nomes-de-coluna"><i class="fa fa-check"></i><b>7.1.7</b> Formatar nomes de coluna</a></li>
<li class="chapter" data-level="7.1.8" data-path="manipula.html"><a href="manipula.html#reordenando-colunas"><i class="fa fa-check"></i><b>7.1.8</b> Reordenando colunas</a></li>
<li class="chapter" data-level="7.1.9" data-path="manipula.html"><a href="manipula.html#obtendo-níveis-de-fatores"><i class="fa fa-check"></i><b>7.1.9</b> Obtendo níveis de fatores</a></li>
<li class="chapter" data-level="7.1.10" data-path="manipula.html"><a href="manipula.html#selecionar-linhas-com-base-em-seus-valores"><i class="fa fa-check"></i><b>7.1.10</b> Selecionar linhas com base em seus valores</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="manipula.html"><a href="manipula.html#trabalhando-com-números-e-seqüências-de-caracteres"><i class="fa fa-check"></i><b>7.2</b> Trabalhando com números e seqüências de caracteres</a><ul>
<li class="chapter" data-level="7.2.1" data-path="manipula.html"><a href="manipula.html#arredondando"><i class="fa fa-check"></i><b>7.2.1</b> Arredondando</a></li>
<li class="chapter" data-level="7.2.2" data-path="manipula.html"><a href="manipula.html#extraindo-e-substituindo-números"><i class="fa fa-check"></i><b>7.2.2</b> Extraindo e substituindo números</a></li>
<li class="chapter" data-level="7.2.3" data-path="manipula.html"><a href="manipula.html#extraindo-substituindo-e-removendo-strings"><i class="fa fa-check"></i><b>7.2.3</b> Extraindo, substituindo e removendo strings</a></li>
<li class="chapter" data-level="7.2.4" data-path="manipula.html"><a href="manipula.html#formatando-strings"><i class="fa fa-check"></i><b>7.2.4</b> Formatando strings</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="manipula.html"><a href="manipula.html#selecionar-linhas-por-sua-posição"><i class="fa fa-check"></i><b>7.3</b> Selecionar linhas por sua posição</a></li>
<li class="chapter" data-level="7.4" data-path="manipula.html"><a href="manipula.html#combinando-os-verbos-para-manipulação"><i class="fa fa-check"></i><b>7.4</b> Combinando os verbos para manipulação</a></li>
<li class="chapter" data-level="7.5" data-path="manipula.html"><a href="manipula.html#trabalhando-com-duas-tabelas-ao-mesmo-tempo"><i class="fa fa-check"></i><b>7.5</b> Trabalhando com duas tabelas ao mesmo tempo</a><ul>
<li class="chapter" data-level="7.5.1" data-path="manipula.html"><a href="manipula.html#junções-com-mutação-de-dados"><i class="fa fa-check"></i><b>7.5.1</b> Junções com mutação de dados</a></li>
<li class="chapter" data-level="7.5.2" data-path="manipula.html"><a href="manipula.html#junções-com-filtragem-de-dados"><i class="fa fa-check"></i><b>7.5.2</b> Junções com filtragem de dados</a></li>
<li class="chapter" data-level="7.5.3" data-path="manipula.html"><a href="manipula.html#operações-com-conjuntos"><i class="fa fa-check"></i><b>7.5.3</b> Operações com conjuntos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="graph.html"><a href="graph.html"><i class="fa fa-check"></i><b>8</b> Gráficos com o pacote ggplot2</a><ul>
<li class="chapter" data-level="8.1" data-path="graph.html"><a href="graph.html#o-pacote-ggplot2"><i class="fa fa-check"></i><b>8.1</b> O pacote <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.2" data-path="graph.html"><a href="graph.html#meu-primeiro-gráfico-em-ggplot2"><i class="fa fa-check"></i><b>8.2</b> Meu primeiro gráfico em <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.3" data-path="graph.html"><a href="graph.html#as-camadas-de-um-gráfico-ggplot2"><i class="fa fa-check"></i><b>8.3</b> As camadas de um gráfico <strong>ggplot2</strong></a></li>
<li class="chapter" data-level="8.4" data-path="graph.html"><a href="graph.html#aesthetics-estética"><i class="fa fa-check"></i><b>8.4</b> Aesthetics (estética)</a></li>
<li class="chapter" data-level="8.5" data-path="graph.html"><a href="graph.html#facet-facetas"><i class="fa fa-check"></i><b>8.5</b> Facet (facetas)</a></li>
<li class="chapter" data-level="8.6" data-path="graph.html"><a href="graph.html#theme-temas"><i class="fa fa-check"></i><b>8.6</b> Theme (temas)</a></li>
<li class="chapter" data-level="8.7" data-path="graph.html"><a href="graph.html#geoms-geometria"><i class="fa fa-check"></i><b>8.7</b> Geoms (geometria)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exporta.html"><a href="exporta.html"><i class="fa fa-check"></i><b>9</b> Exportando dados</a><ul>
<li class="chapter" data-level="9.1" data-path="exporta.html"><a href="exporta.html#exportando-com-diferentes-extensões"><i class="fa fa-check"></i><b>9.1</b> Exportando com diferentes extensões</a></li>
<li class="chapter" data-level="9.2" data-path="exporta.html"><a href="exporta.html#exportanto-gráficos"><i class="fa fa-check"></i><b>9.2</b> Exportanto gráficos</a></li>
</ul></li>
<li class="part"><span><b>III Parte III análise de dados</b></span></li>
<li class="chapter" data-level="10" data-path="analdata.html"><a href="analdata.html"><i class="fa fa-check"></i><b>10</b> Análise de dados experimentais</a><ul>
<li class="chapter" data-level="10.1" data-path="analdata.html"><a href="analdata.html#ebasic"><i class="fa fa-check"></i><b>10.1</b> Estatistica básica</a><ul>
<li class="chapter" data-level="10.1.1" data-path="analdata.html"><a href="analdata.html#medidas-de-tendência-central"><i class="fa fa-check"></i><b>10.1.1</b> Medidas de tendência central</a></li>
<li class="chapter" data-level="10.1.2" data-path="analdata.html"><a href="analdata.html#medidas-de-variabilidade"><i class="fa fa-check"></i><b>10.1.2</b> Medidas de variabilidade</a></li>
<li class="chapter" data-level="10.1.3" data-path="analdata.html"><a href="analdata.html#resumindo-dados-com-o-pacote-dplyr"><i class="fa fa-check"></i><b>10.1.3</b> Resumindo dados com o pacote <code>dplyr</code></a></li>
<li class="chapter" data-level="10.1.4" data-path="analdata.html"><a href="analdata.html#dstat"><i class="fa fa-check"></i><b>10.1.4</b> Estatística descritiva com pacote metan</a></li>
<li class="chapter" data-level="10.1.5" data-path="analdata.html"><a href="analdata.html#testes-de-aderência"><i class="fa fa-check"></i><b>10.1.5</b> Testes de aderência</a></li>
<li class="chapter" data-level="10.1.6" data-path="analdata.html"><a href="analdata.html#intervalos-de-confiança"><i class="fa fa-check"></i><b>10.1.6</b> Intervalos de confiança</a></li>
<li class="chapter" data-level="10.1.7" data-path="analdata.html"><a href="analdata.html#teste-de-hipóteses-para-amostras-independentes"><i class="fa fa-check"></i><b>10.1.7</b> Teste de hipóteses para amostras independentes</a></li>
<li class="chapter" data-level="10.1.8" data-path="analdata.html"><a href="analdata.html#teste-de-hipóteses-para-amostras-dependentes"><i class="fa fa-check"></i><b>10.1.8</b> Teste de hipóteses para amostras dependentes</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="analdata.html"><a href="analdata.html#dbasic"><i class="fa fa-check"></i><b>10.2</b> Delineamentos básicos</a><ul>
<li class="chapter" data-level="10.2.1" data-path="analdata.html"><a href="analdata.html#princípios-básicos"><i class="fa fa-check"></i><b>10.2.1</b> Princípios básicos</a></li>
<li class="chapter" data-level="10.2.2" data-path="analdata.html"><a href="analdata.html#pressupostos"><i class="fa fa-check"></i><b>10.2.2</b> Pressupostos</a></li>
<li class="chapter" data-level="10.2.3" data-path="analdata.html"><a href="analdata.html#estimação"><i class="fa fa-check"></i><b>10.2.3</b> Estimação</a></li>
<li class="chapter" data-level="10.2.4" data-path="analdata.html"><a href="analdata.html#reparametrização-condições-marginais-ou-combinações-lineares"><i class="fa fa-check"></i><b>10.2.4</b> Reparametrização, condições marginais ou combinações lineares?</a></li>
<li class="chapter" data-level="10.2.5" data-path="analdata.html"><a href="analdata.html#delineamento-inteiramente-casualizado-dic"><i class="fa fa-check"></i><b>10.2.5</b> Delineamento inteiramente casualizado (DIC)</a></li>
<li class="chapter" data-level="10.2.6" data-path="analdata.html"><a href="analdata.html#delineamento-blocos-ao-acaso-dbc"><i class="fa fa-check"></i><b>10.2.6</b> Delineamento blocos ao acaso (DBC)</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="analdata.html"><a href="analdata.html#transformação-de-dados"><i class="fa fa-check"></i><b>10.3</b> Transformação de dados</a></li>
<li class="chapter" data-level="10.4" data-path="analdata.html"><a href="analdata.html#ancova"><i class="fa fa-check"></i><b>10.4</b> Análise de covariância (ANCOVA)</a><ul>
<li class="chapter" data-level="10.4.1" data-path="analdata.html"><a href="analdata.html#introdução"><i class="fa fa-check"></i><b>10.4.1</b> Introdução</a></li>
<li class="chapter" data-level="10.4.2" data-path="analdata.html"><a href="analdata.html#modelo-estatístico-1"><i class="fa fa-check"></i><b>10.4.2</b> Modelo estatístico</a></li>
<li class="chapter" data-level="10.4.3" data-path="analdata.html"><a href="analdata.html#independência-entre-a-covariável-e-os-efeitos-de-tratamento"><i class="fa fa-check"></i><b>10.4.3</b> Independência entre a covariável e os efeitos de tratamento</a></li>
<li class="chapter" data-level="10.4.4" data-path="analdata.html"><a href="analdata.html#homogeneidade-dos-slopes-da-regressão"><i class="fa fa-check"></i><b>10.4.4</b> Homogeneidade dos <em>slopes</em> da regressão</a></li>
<li class="chapter" data-level="10.4.5" data-path="analdata.html"><a href="analdata.html#um-exemplo-numérico"><i class="fa fa-check"></i><b>10.4.5</b> Um exemplo numérico</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="analdata.html"><a href="analdata.html#general"><i class="fa fa-check"></i><b>10.5</b> Análise de dados não gaussianos</a><ul>
<li class="chapter" data-level="10.5.1" data-path="analdata.html"><a href="analdata.html#da-análise-de-variação-aos-modelos-lineares-mistos-generalizados"><i class="fa fa-check"></i><b>10.5.1</b> Da análise de variação aos modelos lineares mistos generalizados</a></li>
<li class="chapter" data-level="10.5.2" data-path="analdata.html"><a href="analdata.html#estratégias-para-análise-de-dados-não-gaussianos"><i class="fa fa-check"></i><b>10.5.2</b> Estratégias para análise de dados não gaussianos</a></li>
<li class="chapter" data-level="10.5.3" data-path="analdata.html"><a href="analdata.html#introdução-aos-modelos-lineares-generalizados"><i class="fa fa-check"></i><b>10.5.3</b> Introdução aos modelos lineares generalizados</a></li>
<li class="chapter" data-level="10.5.4" data-path="analdata.html"><a href="analdata.html#dados-de-proporção"><i class="fa fa-check"></i><b>10.5.4</b> Dados de proporção</a></li>
<li class="chapter" data-level="10.5.5" data-path="analdata.html"><a href="analdata.html#dados-de-contagem"><i class="fa fa-check"></i><b>10.5.5</b> Dados de contagem</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="analdata.html"><a href="analdata.html#efat"><i class="fa fa-check"></i><b>10.6</b> Experimentos bifatoriais</a><ul>
<li class="chapter" data-level="10.6.1" data-path="analdata.html"><a href="analdata.html#download-dos-dados"><i class="fa fa-check"></i><b>10.6.1</b> Download dos dados</a></li>
<li class="chapter" data-level="10.6.2" data-path="analdata.html"><a href="analdata.html#qualitativo-vs-quantitativo"><i class="fa fa-check"></i><b>10.6.2</b> Qualitativo vs quantitativo</a></li>
<li class="chapter" data-level="10.6.3" data-path="analdata.html"><a href="analdata.html#qualitativo-vs-qualitativo"><i class="fa fa-check"></i><b>10.6.3</b> Qualitativo vs qualitativo</a></li>
<li class="chapter" data-level="10.6.4" data-path="analdata.html"><a href="analdata.html#quantitativo-vs-quantitativo"><i class="fa fa-check"></i><b>10.6.4</b> Quantitativo vs quantitativo</a></li>
<li class="chapter" data-level="10.6.5" data-path="analdata.html"><a href="analdata.html#experimentos-em-parcelas-subdivididas"><i class="fa fa-check"></i><b>10.6.5</b> Experimentos em parcelas subdivididas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="reg.html"><a href="reg.html"><i class="fa fa-check"></i><b>11</b> Análise de regressão</a><ul>
<li class="chapter" data-level="11.1" data-path="reg.html"><a href="reg.html#regressão-linear"><i class="fa fa-check"></i><b>11.1</b> Regressão Linear</a><ul>
<li class="chapter" data-level="11.1.1" data-path="reg.html"><a href="reg.html#estimação-1"><i class="fa fa-check"></i><b>11.1.1</b> Estimação</a></li>
<li class="chapter" data-level="11.1.2" data-path="reg.html"><a href="reg.html#ajustando-regressões-com-a-função-lm"><i class="fa fa-check"></i><b>11.1.2</b> Ajustando regressões com a função <code>lm()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="reg.html"><a href="reg.html#seleção-de-variáveis"><i class="fa fa-check"></i><b>11.1.3</b> Seleção de variáveis</a></li>
<li class="chapter" data-level="11.1.4" data-path="reg.html"><a href="reg.html#falta-de-ajuste"><i class="fa fa-check"></i><b>11.1.4</b> Falta de ajuste</a></li>
<li class="chapter" data-level="11.1.5" data-path="reg.html"><a href="reg.html#análise-dos-resíduos"><i class="fa fa-check"></i><b>11.1.5</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="11.1.6" data-path="reg.html"><a href="reg.html#pontos-influentes"><i class="fa fa-check"></i><b>11.1.6</b> Pontos influentes</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="reg.html"><a href="reg.html#regressão-não-linear"><i class="fa fa-check"></i><b>11.2</b> Regressão não linear</a><ul>
<li class="chapter" data-level="11.2.1" data-path="reg.html"><a href="reg.html#estimação-2"><i class="fa fa-check"></i><b>11.2.1</b> Estimação</a></li>
<li class="chapter" data-level="11.2.2" data-path="reg.html"><a href="reg.html#ajustando-o-modelo-com-a-função-nls"><i class="fa fa-check"></i><b>11.2.2</b> Ajustando o modelo com a função <code>nls()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="reg.html"><a href="reg.html#análise-dos-resíduos-1"><i class="fa fa-check"></i><b>11.2.3</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="11.2.4" data-path="reg.html"><a href="reg.html#medidas-de-não-linearidade"><i class="fa fa-check"></i><b>11.2.4</b> Medidas de não linearidade</a></li>
<li class="chapter" data-level="11.2.5" data-path="reg.html"><a href="reg.html#comparação-de-parâmetros"><i class="fa fa-check"></i><b>11.2.5</b> Comparação de parâmetros</a></li>
<li class="chapter" data-level="11.2.6" data-path="reg.html"><a href="reg.html#representação-gráfica-dos-modelos"><i class="fa fa-check"></i><b>11.2.6</b> Representação gráfica dos modelos</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="reg.html"><a href="reg.html#regressão-bisegmentada-com-platô"><i class="fa fa-check"></i><b>11.3</b> Regressão bisegmentada com platô</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relations.html"><a href="relations.html"><i class="fa fa-check"></i><b>12</b> Relações lineares entre variáveis</a><ul>
<li class="chapter" data-level="12.1" data-path="relations.html"><a href="relations.html#dados"><i class="fa fa-check"></i><b>12.1</b> Dados</a></li>
<li class="chapter" data-level="12.2" data-path="relations.html"><a href="relations.html#correlação-linear"><i class="fa fa-check"></i><b>12.2</b> Correlação linear</a><ul>
<li class="chapter" data-level="12.2.1" data-path="relations.html"><a href="relations.html#visualização-gráfica"><i class="fa fa-check"></i><b>12.2.1</b> Visualização gráfica</a></li>
<li class="chapter" data-level="12.2.2" data-path="relations.html"><a href="relations.html#estimativa-dos-coeficientes-de-correlação"><i class="fa fa-check"></i><b>12.2.2</b> Estimativa dos coeficientes de correlação</a></li>
<li class="chapter" data-level="12.2.3" data-path="relations.html"><a href="relations.html#combinando-visualização-gráfica-e-numérica-i"><i class="fa fa-check"></i><b>12.2.3</b> Combinando visualização gráfica e numérica (I)</a></li>
<li class="chapter" data-level="12.2.4" data-path="relations.html"><a href="relations.html#combinando-visualização-gráfica-e-numérica-ii"><i class="fa fa-check"></i><b>12.2.4</b> Combinando visualização gráfica e numérica (II)</a></li>
<li class="chapter" data-level="12.2.5" data-path="relations.html"><a href="relations.html#combinando-visualização-gráfica-e-numérica-iii"><i class="fa fa-check"></i><b>12.2.5</b> Combinando visualização gráfica e numérica (III)</a></li>
<li class="chapter" data-level="12.2.6" data-path="relations.html"><a href="relations.html#combinando-visualização-gráfica-e-numérica-iv"><i class="fa fa-check"></i><b>12.2.6</b> Combinando visualização gráfica e numérica (IV)</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="relations.html"><a href="relations.html#correlações-genéticas"><i class="fa fa-check"></i><b>12.3</b> Correlações genéticas</a></li>
<li class="chapter" data-level="12.4" data-path="relations.html"><a href="relations.html#intervalo-de-confiança"><i class="fa fa-check"></i><b>12.4</b> Intervalo de confiança</a><ul>
<li class="chapter" data-level="12.4.1" data-path="relations.html"><a href="relations.html#paramétrico"><i class="fa fa-check"></i><b>12.4.1</b> Paramétrico</a></li>
<li class="chapter" data-level="12.4.2" data-path="relations.html"><a href="relations.html#não-paramétrico"><i class="fa fa-check"></i><b>12.4.2</b> Não paramétrico</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="relations.html"><a href="relations.html#tamanho-da-amostra"><i class="fa fa-check"></i><b>12.5</b> Tamanho da amostra</a></li>
<li class="chapter" data-level="12.6" data-path="relations.html"><a href="relations.html#correlação-parcial"><i class="fa fa-check"></i><b>12.6</b> Correlação parcial</a></li>
<li class="chapter" data-level="12.7" data-path="relations.html"><a href="relations.html#análise-de-trilha"><i class="fa fa-check"></i><b>12.7</b> Análise de trilha</a><ul>
<li class="chapter" data-level="12.7.1" data-path="relations.html"><a href="relations.html#introdução-1"><i class="fa fa-check"></i><b>12.7.1</b> Introdução</a></li>
<li class="chapter" data-level="12.7.2" data-path="relations.html"><a href="relations.html#estimação-3"><i class="fa fa-check"></i><b>12.7.2</b> Estimação</a></li>
<li class="chapter" data-level="12.7.3" data-path="relations.html"><a href="relations.html#multicolinearidade"><i class="fa fa-check"></i><b>12.7.3</b> Multicolinearidade</a></li>
<li class="chapter" data-level="12.7.4" data-path="relations.html"><a href="relations.html#métodos-para-ajustar-a-multicolinearidade"><i class="fa fa-check"></i><b>12.7.4</b> Métodos para ajustar a multicolinearidade</a></li>
<li class="chapter" data-level="12.7.5" data-path="relations.html"><a href="relations.html#análise-tradicional"><i class="fa fa-check"></i><b>12.7.5</b> Análise tradicional</a></li>
<li class="chapter" data-level="12.7.6" data-path="relations.html"><a href="relations.html#incluindo-um-fator-de-correção-k"><i class="fa fa-check"></i><b>12.7.6</b> Incluindo um fator de correção (k)</a></li>
<li class="chapter" data-level="12.7.7" data-path="relations.html"><a href="relations.html#excluindo-variáveis"><i class="fa fa-check"></i><b>12.7.7</b> Excluindo variáveis</a></li>
<li class="chapter" data-level="12.7.8" data-path="relations.html"><a href="relations.html#seleção-de-variáveis-em-análise-de-trilha"><i class="fa fa-check"></i><b>12.7.8</b> Seleção de variáveis em análise de trilha</a></li>
<li class="chapter" data-level="12.7.9" data-path="relations.html"><a href="relations.html#análise-de-trilha-para-cada-nível-de-um-fator"><i class="fa fa-check"></i><b>12.7.9</b> Análise de trilha para cada nível de um fator</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="relations.html"><a href="relations.html#correlação-canônica"><i class="fa fa-check"></i><b>12.8</b> Correlação canônica</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="multivariate.html"><a href="multivariate.html"><i class="fa fa-check"></i><b>13</b> Análise multivariada</a><ul>
<li class="chapter" data-level="13.1" data-path="multivariate.html"><a href="multivariate.html#correlações-canônicas"><i class="fa fa-check"></i><b>13.1</b> Correlações canônicas</a></li>
<li class="chapter" data-level="13.2" data-path="multivariate.html"><a href="multivariate.html#análise-de-agrupamento"><i class="fa fa-check"></i><b>13.2</b> Análise de agrupamento</a><ul>
<li class="chapter" data-level="13.2.1" data-path="multivariate.html"><a href="multivariate.html#todas-as-linhas-e-todas-as-variáveis-numéricas"><i class="fa fa-check"></i><b>13.2.1</b> Todas as linhas e todas as variáveis numéricas</a></li>
<li class="chapter" data-level="13.2.2" data-path="multivariate.html"><a href="multivariate.html#com-base-na-média-de-cada-genótipo"><i class="fa fa-check"></i><b>13.2.2</b> Com base na média de cada genótipo</a></li>
<li class="chapter" data-level="13.2.3" data-path="multivariate.html"><a href="multivariate.html#seleção-de-variáveis-1"><i class="fa fa-check"></i><b>13.2.3</b> Seleção de variáveis</a></li>
<li class="chapter" data-level="13.2.4" data-path="multivariate.html"><a href="multivariate.html#escolha-do-número-de-clusters"><i class="fa fa-check"></i><b>13.2.4</b> Escolha do número de clusters</a></li>
<li class="chapter" data-level="13.2.5" data-path="multivariate.html"><a href="multivariate.html#dendrogramas-personalizados"><i class="fa fa-check"></i><b>13.2.5</b> Dendrogramas personalizados</a></li>
<li class="chapter" data-level="13.2.6" data-path="multivariate.html"><a href="multivariate.html#distancias-para-cada-ambiente"><i class="fa fa-check"></i><b>13.2.6</b> Distancias para cada ambiente</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="multivariate.html"><a href="multivariate.html#componentes-principais"><i class="fa fa-check"></i><b>13.3</b> Componentes principais</a><ul>
<li class="chapter" data-level="13.3.1" data-path="multivariate.html"><a href="multivariate.html#conceito"><i class="fa fa-check"></i><b>13.3.1</b> Conceito</a></li>
<li class="chapter" data-level="13.3.2" data-path="multivariate.html"><a href="multivariate.html#pacotes-r"><i class="fa fa-check"></i><b>13.3.2</b> Pacotes R</a></li>
<li class="chapter" data-level="13.3.3" data-path="multivariate.html"><a href="multivariate.html#formato-dos-dados"><i class="fa fa-check"></i><b>13.3.3</b> Formato dos dados</a></li>
<li class="chapter" data-level="13.3.4" data-path="multivariate.html"><a href="multivariate.html#código-r"><i class="fa fa-check"></i><b>13.3.4</b> Código R</a></li>
<li class="chapter" data-level="13.3.5" data-path="multivariate.html"><a href="multivariate.html#autovalores"><i class="fa fa-check"></i><b>13.3.5</b> Autovalores</a></li>
<li class="chapter" data-level="13.3.6" data-path="multivariate.html"><a href="multivariate.html#gráfico-das-variáveis"><i class="fa fa-check"></i><b>13.3.6</b> Gráfico das variáveis</a></li>
<li class="chapter" data-level="13.3.7" data-path="multivariate.html"><a href="multivariate.html#gráfico-de-indivíduos"><i class="fa fa-check"></i><b>13.3.7</b> Gráfico de indivíduos</a></li>
<li class="chapter" data-level="13.3.8" data-path="multivariate.html"><a href="multivariate.html#gráfico-biplot"><i class="fa fa-check"></i><b>13.3.8</b> Gráfico biplot</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="multivariate.html"><a href="multivariate.html#k-means"><i class="fa fa-check"></i><b>13.4</b> K-means</a><ul>
<li class="chapter" data-level="13.4.1" data-path="multivariate.html"><a href="multivariate.html#conceito-1"><i class="fa fa-check"></i><b>13.4.1</b> Conceito</a></li>
<li class="chapter" data-level="13.4.2" data-path="multivariate.html"><a href="multivariate.html#pacotes-r-1"><i class="fa fa-check"></i><b>13.4.2</b> Pacotes R</a></li>
<li class="chapter" data-level="13.4.3" data-path="multivariate.html"><a href="multivariate.html#formato-dos-dados-e-códigos-r"><i class="fa fa-check"></i><b>13.4.3</b> Formato dos dados e códigos R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="interaction.html"><a href="interaction.html"><i class="fa fa-check"></i><b>14</b> Interação genótipo-<em>vs</em>-ambiente</a><ul>
<li class="chapter" data-level="14.1" data-path="interaction.html"><a href="interaction.html#análise-gráfica-da-interação"><i class="fa fa-check"></i><b>14.1</b> Análise gráfica da interação</a></li>
<li class="chapter" data-level="14.2" data-path="interaction.html"><a href="interaction.html#análise-de-variância-individual"><i class="fa fa-check"></i><b>14.2</b> Análise de variância individual</a></li>
<li class="chapter" data-level="14.3" data-path="interaction.html"><a href="interaction.html#baseada-em-regressão"><i class="fa fa-check"></i><b>14.3</b> Baseada em regressão</a></li>
<li class="chapter" data-level="14.4" data-path="interaction.html"><a href="interaction.html#índice-de-confiança-genotípico"><i class="fa fa-check"></i><b>14.4</b> Índice de confiança genotípico</a></li>
<li class="chapter" data-level="14.5" data-path="interaction.html"><a href="interaction.html#índice-de-superioridade-genotípico"><i class="fa fa-check"></i><b>14.5</b> Índice de superioridade genotípico</a></li>
<li class="chapter" data-level="14.6" data-path="interaction.html"><a href="interaction.html#estratificação-ambiental"><i class="fa fa-check"></i><b>14.6</b> Estratificação ambiental</a></li>
<li class="chapter" data-level="14.7" data-path="interaction.html"><a href="interaction.html#o-modelo-ammi"><i class="fa fa-check"></i><b>14.7</b> O modelo AMMI</a><ul>
<li class="chapter" data-level="14.7.1" data-path="interaction.html"><a href="interaction.html#ajuste-do-modelo"><i class="fa fa-check"></i><b>14.7.1</b> Ajuste do modelo</a></li>
<li class="chapter" data-level="14.7.2" data-path="interaction.html"><a href="interaction.html#analise-residual"><i class="fa fa-check"></i><b>14.7.2</b> Analise residual</a></li>
<li class="chapter" data-level="14.7.3" data-path="interaction.html"><a href="interaction.html#escolha-do-número-de-termos-multiplicativos"><i class="fa fa-check"></i><b>14.7.3</b> Escolha do número de termos multiplicativos</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="interaction.html"><a href="interaction.html#imprimindo-os-meios-das-estimativas-rmspd"><i class="fa fa-check"></i><b>14.8</b> Imprimindo os meios das estimativas RMSPD</a></li>
<li class="chapter" data-level="14.9" data-path="interaction.html"><a href="interaction.html#plotagem-dos-valores-rmspd"><i class="fa fa-check"></i><b>14.9</b> Plotagem dos valores RMSPD</a><ul>
<li class="chapter" data-level="14.9.1" data-path="interaction.html"><a href="interaction.html#valores-estimados-pelo-modelo-ammi"><i class="fa fa-check"></i><b>14.9.1</b> Valores estimados pelo modelo AMMI</a></li>
<li class="chapter" data-level="14.9.2" data-path="interaction.html"><a href="interaction.html#índices-de-estabilidade-baseados-em-ammi"><i class="fa fa-check"></i><b>14.9.2</b> Índices de estabilidade baseados em AMMI</a></li>
<li class="chapter" data-level="14.9.3" data-path="interaction.html"><a href="interaction.html#biplots"><i class="fa fa-check"></i><b>14.9.3</b> Biplots</a></li>
</ul></li>
<li class="chapter" data-level="14.10" data-path="interaction.html"><a href="interaction.html#o-modelo-gge"><i class="fa fa-check"></i><b>14.10</b> O modelo GGE</a><ul>
<li class="chapter" data-level="14.10.1" data-path="interaction.html"><a href="interaction.html#data-centering"><i class="fa fa-check"></i><b>14.10.1</b> Data centering</a></li>
<li class="chapter" data-level="14.10.2" data-path="interaction.html"><a href="interaction.html#data-scaling"><i class="fa fa-check"></i><b>14.10.2</b> Data scaling</a></li>
<li class="chapter" data-level="14.10.3" data-path="interaction.html"><a href="interaction.html#singular-value-partition"><i class="fa fa-check"></i><b>14.10.3</b> Singular value partition</a></li>
<li class="chapter" data-level="14.10.4" data-path="interaction.html"><a href="interaction.html#ajustando-o-modelo-gge"><i class="fa fa-check"></i><b>14.10.4</b> Ajustando o modelo GGE</a></li>
<li class="chapter" data-level="14.10.5" data-path="interaction.html"><a href="interaction.html#valores-estimados-pelo-modelo-gge"><i class="fa fa-check"></i><b>14.10.5</b> Valores estimados pelo modelo GGE</a></li>
<li class="chapter" data-level="14.10.6" data-path="interaction.html"><a href="interaction.html#visualizando-o-biplot"><i class="fa fa-check"></i><b>14.10.6</b> Visualizando o Biplot</a></li>
</ul></li>
<li class="chapter" data-level="14.11" data-path="interaction.html"><a href="interaction.html#modelos-mistos-na-avaliação-de-met"><i class="fa fa-check"></i><b>14.11</b> Modelos mistos na avaliação de MET</a><ul>
<li class="chapter" data-level="14.11.1" data-path="interaction.html"><a href="interaction.html#ajustando-o-modelo"><i class="fa fa-check"></i><b>14.11.1</b> Ajustando o modelo</a></li>
<li class="chapter" data-level="14.11.2" data-path="interaction.html"><a href="interaction.html#análise-dos-resíduos-2"><i class="fa fa-check"></i><b>14.11.2</b> Análise dos resíduos</a></li>
<li class="chapter" data-level="14.11.3" data-path="interaction.html"><a href="interaction.html#parâmetros-genéticos"><i class="fa fa-check"></i><b>14.11.3</b> Parâmetros genéticos</a></li>
<li class="chapter" data-level="14.11.4" data-path="interaction.html"><a href="interaction.html#médias-preditas"><i class="fa fa-check"></i><b>14.11.4</b> Médias preditas</a></li>
<li class="chapter" data-level="14.11.5" data-path="interaction.html"><a href="interaction.html#índices-de-estabilidade-baseados-em-blup"><i class="fa fa-check"></i><b>14.11.5</b> Índices de estabilidade baseados em BLUP</a></li>
</ul></li>
<li class="chapter" data-level="14.12" data-path="interaction.html"><a href="interaction.html#ammi-ou-blup-decisão-em-cada-caso"><i class="fa fa-check"></i><b>14.12</b> AMMI ou BLUP? Decisão em cada caso!</a></li>
</ul></li>
<li class="appendix"><span><b>Apêndices</b></span></li>
<li class="chapter" data-level="A" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html"><i class="fa fa-check"></i><b>A</b> Resposta dos exercícios</a><ul>
<li class="chapter" data-level="A.1" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc1"><i class="fa fa-check"></i><b>A.1</b> Exercício 1</a></li>
<li class="chapter" data-level="A.2" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc2"><i class="fa fa-check"></i><b>A.2</b> Exercício 2</a></li>
<li class="chapter" data-level="A.3" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc3"><i class="fa fa-check"></i><b>A.3</b> Exercício 3</a></li>
<li class="chapter" data-level="A.4" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc4"><i class="fa fa-check"></i><b>A.4</b> Exercício 4</a></li>
<li class="chapter" data-level="A.5" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc5"><i class="fa fa-check"></i><b>A.5</b> Exercício 5</a></li>
<li class="chapter" data-level="A.6" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc6"><i class="fa fa-check"></i><b>A.6</b> Exercício 6</a></li>
<li class="chapter" data-level="A.7" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc7"><i class="fa fa-check"></i><b>A.7</b> Exercício 7</a></li>
<li class="chapter" data-level="A.8" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc8"><i class="fa fa-check"></i><b>A.8</b> Exercício 8</a></li>
<li class="chapter" data-level="A.9" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc9"><i class="fa fa-check"></i><b>A.9</b> Exercício 9</a></li>
<li class="chapter" data-level="A.10" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc10"><i class="fa fa-check"></i><b>A.10</b> Exercício 10</a></li>
<li class="chapter" data-level="A.11" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc11"><i class="fa fa-check"></i><b>A.11</b> Exercício 11</a></li>
<li class="chapter" data-level="A.12" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc12"><i class="fa fa-check"></i><b>A.12</b> Exercício 12</a></li>
<li class="chapter" data-level="A.13" data-path="resposta-dos-exercícios.html"><a href="resposta-dos-exercícios.html#exerc13"><i class="fa fa-check"></i><b>A.13</b> Exercício 13</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tabela-de-distribuições.html"><a href="tabela-de-distribuições.html"><i class="fa fa-check"></i>Tabela de distribuições</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Software R para avaliação de dados experimentais</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipula" class="section level1">
<h1><span class="header-section-number">Capítulo 7</span> Manipulação de dados</h1>
<p>Após seus dados estarem carregados no ambiente R, eles provavelmente necessitarão de alguma manimulação antes de serem utilizados em uma determinada análise. Esta manipulação pode envolver operações como exclusão de colunas, ordenamento de linhas com base em valores, criação de covariáveis (que serão resultado de operações com uma ou mais variáveis existentes), dentre muitas outras possibilidades. Felizmente, o pacote <strong>dplyr</strong>  permite que esta manimulação seja relativamente fácil, lógica (do ponto de vista de digitação de códigos) e rápida, pois ele integra a linguagem <code>C++</code> em suas funções.</p>
<p>O pacote <strong>dplyr</strong> é uma <em>gramática</em> de manipulação de dados. Nos rerferimos à <em>gramática</em> aqui porque ele fornece funções nomeadas como <em>verbos</em> simples, relacionados às tarefas mais comuns de manipulação de dados, para ajudá-lo a traduzir seus pensamentos em código. Este será o pacote utilizado para manipulação dos dados no decorrer deste material. De fato, a maioria dos dados em R podem ser manipulados utilizando os seguintes “verbos”.</p>
<ul>
<li><code>filter()</code> para selecionar linhas com base em seus valores.</li>
<li><code>arrange()</code> para reordenar as linhas.</li>
<li><code>select()</code> e <code>rename()</code> para selecionar variáveis com base em seus nomes.</li>
<li><code>mutate()</code> e <code>transmute()</code> para adicionar novas variáveis que são funções de variáveis existentes.</li>
<li><code>summarise()</code> para resumir vários valores para um único valor.</li>
<li><code>sample_n()</code> e <code>sample_frac()</code> para obter amostras aleatórias.</li>
</ul>
<p>Anteriomente mencionamos que a manipulação dos dados com o pacote <strong>dplyr</strong> é lógica do ponto de vista da implementação do código. Isto só é possivel devido a utilização do operador <code>%&gt;%</code> (<em>forward-pipe operator</em>), importado do pacote <code>magrittr</code>. Basicamente, este operador capta o argumento resultante de uma função à sua esquerda e passa como <em>input</em> à função à sua direita. Não é nossso objetivo aqui discutir os benefícios da utilização deste operador, mas uma pequena demonstração (com spoilers das funções do pacote dplyr) será apresentada. Considere as seguintes (e simples) operações. Crie um data frame com 100 linhas com as variáveis <em>x</em> e <em>y</em> contendo valores aleatórios. Adicione uma terceira variáveis (<em>z</em>) que será uma função da multiplicação de <em>x</em> e <em>y</em>, selecione apenas os valores de <em>z</em> menores que 10 e extraia a raiz quadrada destes valores. Finalmente, compute a média e armazene no object <code>mean_sqrt</code>.</p>
<ul>
<li>Utilizando as funções bases do R (código massivo)</li>
</ul>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb102-2" title="2">data &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb102-3" title="3">              <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb102-4" title="4">data<span class="op">$</span>z &lt;-<span class="st"> </span>data<span class="op">$</span>x <span class="op">*</span><span class="st"> </span>data<span class="op">$</span>y</a>
<a class="sourceLine" id="cb102-5" title="5">data &lt;-<span class="st"> </span><span class="kw">subset</span>(data, z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb102-6" title="6">data &lt;-<span class="st"> </span>data[, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb102-7" title="7">sqr_dat &lt;-<span class="st"> </span><span class="kw">sqrt</span>(data<span class="op">$</span>z)</a>
<a class="sourceLine" id="cb102-8" title="8">mean_sqrt &lt;-<span class="st"> </span><span class="kw">mean</span>(sqr_dat)</a>
<a class="sourceLine" id="cb102-9" title="9">mean_sqrt</a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<ul>
<li>Utilizando as funções bases do R (código mais limpo)</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb104-2" title="2">data &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb104-3" title="3">               <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb104-4" title="4">data<span class="op">$</span>z &lt;-<span class="st"> </span>data<span class="op">$</span>x <span class="op">*</span><span class="st"> </span>data<span class="op">$</span>y</a>
<a class="sourceLine" id="cb104-5" title="5">mean_sqrt &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">sqrt</span>(<span class="kw">subset</span>(data, z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)<span class="op">$</span>z))</a>
<a class="sourceLine" id="cb104-6" title="6">mean_sqrt</a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<ul>
<li>Utilizando o operdor <code>%&gt;%</code></li>
</ul>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb106-2" title="2">mean_sqrt &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span>  <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb106-3" title="3">                    <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">10</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-4" title="4"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">z =</span> x <span class="op">*</span><span class="st"> </span>y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-5" title="5"><span class="st">            </span><span class="kw">filter</span>(z <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-6" title="6"><span class="st">            </span><span class="kw">pull</span>(z) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-7" title="7"><span class="st">            </span><span class="kw">sqrt</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-8" title="8"><span class="st">            </span><span class="kw">mean</span>()</a>
<a class="sourceLine" id="cb106-9" title="9">mean_sqrt  </a></code></pre></div>
<pre><code>[1] 1.977507</code></pre>
<p>A utilização do operador <code>%&gt;%</code> parece não trazer tantos benefícios neste exemplo, visto que objetivo aqui foi demonstrar como ele permite uma implementação lógica das operações realizadas, captando a saída da função diretamente à esquerda (acima neste caso) e passando para a próxima função. Em operações mais complexas, no entanto, o <code>%&gt;%</code> se mostrará muito mais útil.</p>
<p>O pacote <a href="https://tiagoolivoto.github.io/metan/"><code>metan</code></a> @ fornece funções úteis para manipulação de dados. Duas principais categorias de funções serão utilizadas neste material:</p>
<ol style="list-style-type: decimal">
<li><a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html">Utilitários para lidar com linhas e colunas</a></li>
</ol>
<ul>
<li><code>add_cols()</code>: adiciona uma ou mais colunas a um conjunto de dados existente. Se as colunas <code>.before</code> ou <code>.after</code> especificadas não existirem, as colunas serão anexadas no final dos dados. Retorna um conjunto de dados com todas as colunas originais em <code>.data</code> mais as colunas declaradas em <code>...</code>. Em <code>add_cols()</code>, as colunas em <code>.data</code> estão disponíveis para as expressões. Portanto, é possível adicionar uma coluna com base nos dados existentes.</li>
</ul>

<ul>
<li><code>add_rows()</code>: adiciona uma ou mais linhas a um conjunto de dados existente. Se não houver linhas especificadas <code>.before</code> ou <code>.after</code>, as linhas serão anexadas no final dos dados. Retorna um conjunto de dados com todas as linhas originais em .data mais as linhas declaradas em <code>...</code>.</li>
</ul>

<ul>
<li><code>all_pairs()</code>: obtém todos os pares possíveis entre os níveis de um fator.</li>
</ul>

<ul>
<li><code>colnames_to_lower()</code>: converte todos os nomes de coluna para minúsculas.</li>
</ul>

<ul>
<li><code>colnames_to_upper()</code>: converte todos os nomes de coluna para maiúsculas.</li>
</ul>

<ul>
<li><code>colnames_to_title()</code>: converte todos os nomes de coluna em maiúsculas.</li>
</ul>

<ul>
<li><code>column_exists()</code>: verifica se existe uma coluna em um conjunto de dados. Retorne um valor lógico.</li>
</ul>

<ul>
<li><code>columns_to_first()</code>: move as colunas para as primeiras posições em <code>.data</code>.</li>
</ul>

<ul>
<li><code>columns_to_last()</code>: move as colunas para as últimas posições em <code>.data</code>.</li>
</ul>

<ul>
<li><code>concatenate()</code>: concatena colunas de um conjunto de dados. Se <code>drop = TRUE</code>, as variáveis existentes são descartadas. Se <code>pull = TRUE</code>, a variável concatenada é extraída para um vetor. Isso é especialmente útil ao usar concatenar para adicionar colunas a um conjunto de dados com <code>add_cols()</code>.</li>
</ul>

<ul>
<li><code>get_levels()</code>: obtém os níveis de um fator.</li>
</ul>

<ul>
<li><code>get_level_size()</code>: obtém o tamanho de cada nível de um fator.</li>
</ul>

<ul>
<li><code>remove_cols()</code>: remove uma ou mais colunas de um conjunto de dados.</li>
</ul>

<ul>
<li><code>remove_rows()</code>: remove uma ou mais linhas de um conjunto de dados.</li>
</ul>

<ul>
<li><code>reorder_cols()</code>: reordena colunas em um conjunto de dados.</li>
</ul>

<ul>
<li><code>select_cols()</code>: seleciona uma ou mais colunas de um conjunto de dados.</li>
</ul>

<ul>
<li><code>select_first_col()</code>: seleciona a primeira variável, possivelmente com um deslocamento.</li>
</ul>

<ul>
<li><code>select_last_col()</code>: seleciona a última variável, possivelmente com um deslocamento.</li>
</ul>

<ul>
<li><code>select_numeric_cols()</code>: selecione todas as colunas numéricas de um conjunto de dados.</li>
</ul>

<ul>
<li><code>select_non_numeric_cols()</code>: seleciona todas as colunas não numéricas de um conjunto de dados.</li>
</ul>

<ul>
<li><code>select_rows()</code>: seleciona uma ou mais linhas de um conjunto de dados.</li>
</ul>

<ol start="2" style="list-style-type: decimal">
<li><a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html">Utilitários para lidar com números e strings</a></li>
</ol>
<ul>
<li><code>all_lower_case()</code>: converte todas as seqüências não numéricas de um conjunto de dados para minúsculas (“Env” para “env”).</li>
</ul>

<ul>
<li><code>all_upper_case()</code>: converte todas as seqüências não numéricas de um conjunto de dados para maiúsculas (por exemplo, “Env” para “ENV”).</li>
</ul>

<ul>
<li><code>all_title_case()</code>: converta todas as seqüências não numéricas de um conjunto de dados em maiúsculas e minúsculas (por exemplo, “ENV” para “Env”).</li>
</ul>

<ul>
<li><code>extract_number()</code>: extrai o(s) número(s) de uma sequência de caracteres.</li>
</ul>

<ul>
<li><code>extract_string()</code>: Extrai todas letras de uma sequência de caracteres, ignorando maiúsculas e minúsculas.</li>
</ul>

<ul>
<li><code>find_text_in_num()</code>: encontra caracteres de texto em uma sequência numérica e retorna o índice de linha.</li>
</ul>

<ul>
<li><code>has_text_in_num()</code>: inspeciona as colunas procurando por texto na sequência numérica e retorna um aviso se algum texto for encontrado.</li>
</ul>

<ul>
<li><code>remove_strings()</code>: remove todas as strings de uma variável.</li>
</ul>

<ul>
<li><code>replace_number()</code>: substitui os números por uma substituição.</li>
</ul>

<ul>
<li><code>replace_string()</code>: substitui todas as strings por uma substituição, ignorando a caixa.</li>
</ul>

<ul>
<li><code>round_cols()</code>: Arredonda uma coluna selecionada ou um conjunto de dados inteiro para números significativos.</li>
</ul>

<ul>
<li><p><code>tidy_strings()</code>: arruma seqüências de caracteres, colunas não numéricas ou quaisquer colunas selecionadas em um conjunto de dados colocando todas as palavras em maiúsculas, substituindo qualquer espaço, tabulação e caracteres de pontuação por <code>'_'</code> e colocando <code>'_'</code> entre letras maiúsculas e minúsculas. Suponha que <code>str = c("Env1", "env 1", "env.1")</code> (que por definição deve representar um nível único nos ensaios de melhoramento de plantas, por exemplo, ambiente 1) seja submetido a <code>tidy_strings(str)</code>: o resultado será então <code>c("ENV_1", "ENV_1", "ENV_1")</code>.</p>
<p></p></li>
</ul>
<p>O conjunto de dados <strong>maize</strong> será utilizado como exemplo para as operações de manipulação de dados. Este arquivo em formato <code>.xlsx</code> está hospedado em <a href="https://github.com/TiagoOlivoto/e-bookr/tree/master/data" class="uri">https://github.com/TiagoOlivoto/e-bookr/tree/master/data</a> e pode ser carregado no ambiente R com a função <code>import()</code> do pacote <a href="https://cran.r-project.org/web/packages/rio/index.html">rio</a>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1">url &lt;-<span class="st"> &quot;https://github.com/TiagoOlivoto/e-bookr/raw/master/data/data_R.xlsx&quot;</span></a>
<a class="sourceLine" id="cb108-2" title="2">maize &lt;-<span class="st"> </span><span class="kw">import</span>(url,</a>
<a class="sourceLine" id="cb108-3" title="3">                <span class="dt">sheet =</span> <span class="st">&quot;maize&quot;</span>, </a>
<a class="sourceLine" id="cb108-4" title="4">                <span class="dt">setclass =</span> <span class="st">&quot;tibble&quot;</span>)</a>
<a class="sourceLine" id="cb108-5" title="5"></a>
<a class="sourceLine" id="cb108-6" title="6"><span class="kw">inspect</span>(maize)</a></code></pre></div>
<pre><code># A tibble: 10 x 9
   Variable Class     Missing Levels Valid_n   Min Median    Max Outlier
   &lt;chr&gt;    &lt;fct&gt;     &lt;fct&gt;   &lt;fct&gt;    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1 AMB      character No      0          780  NA    NA     NA         NA
 2 HIB      character No      0          780  NA    NA     NA         NA
 3 REP      character No      0          780  NA    NA     NA         NA
 4 APLA     numeric   No      -          780   1     2.52   3.3        4
 5 AIES     numeric   No      -          780   0.5   1.38   2.39       1
 6 CESP     numeric   No      -          780   0.8  15.4   20.4       16
 7 DIES     numeric   No      -          780  36.4  50.0   59.7        1
 8 MGRA     numeric   No      -          780  58.5 174.   291.         0
 9 MMG      numeric   No      -          780 123.  344.   546.         6
10 NGRA     numeric   No      -          780 147   517    903          9</code></pre>
<div id="trabalhando-com-linhas-e-colunas" class="section level2">
<h2><span class="header-section-number">7.1</span> Trabalhando com linhas e colunas</h2>
<div id="selecionar-colunas" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Selecionar colunas</h3>
<p>A função <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_cols()</code></a> pode ser usada para selecionar colunas de um conjunto de dados.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="kw">select_cols</span>(data_ge2, ENV, GEN)</a></code></pre></div>
<pre><code># A tibble: 156 x 2
   ENV   GEN  
   &lt;fct&gt; &lt;fct&gt;
 1 A1    H1   
 2 A1    H1   
 3 A1    H1   
 4 A1    H10  
 5 A1    H10  
 6 A1    H10  
 7 A1    H11  
 8 A1    H11  
 9 A1    H11  
10 A1    H12  
# ... with 146 more rows</code></pre>
<p>As colunas numéricas podem ser selecionadas rapidamente usando a função <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_numeric_cols()</code></a>. As colunas não numéricas são selecionadas com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_non_numeric_cols()</code></a>.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="kw">select_numeric_cols</span>(data_ge2)</a></code></pre></div>
<pre><code># A tibble: 156 x 15
      PH    EH    EP    EL    ED    CL    CD    CW    KW    NR   NKR  CDED  PERK
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  2.61  1.71 0.658  16.1  52.2  28.1  16.3  25.1  217.  15.6  36.6 0.538  89.6
 2  2.87  1.76 0.628  14.2  50.3  27.6  14.5  21.4  184.  16    31.4 0.551  89.5
 3  2.68  1.58 0.591  16.0  50.7  28.4  16.4  24.0  208.  17.2  31.8 0.561  89.7
 4  2.83  1.64 0.581  16.7  54.1  31.7  17.4  26.2  194.  15.6  32.8 0.586  87.9
 5  2.79  1.71 0.616  14.9  52.7  32.0  15.5  20.7  176.  17.6  28   0.607  89.7
 6  2.72  1.51 0.554  16.7  52.7  30.4  17.5  26.8  207.  16.8  32.8 0.577  88.5
 7  2.75  1.51 0.549  17.4  51.7  30.6  18.0  26.2  217.  16.8  34.6 0.594  89.1
 8  2.72  1.56 0.573  16.7  47.2  28.7  17.2  24.1  181.  13.6  34.4 0.608  88.3
 9  2.77  1.67 0.600  15.8  47.9  27.6  16.4  20.5  166.  15.2  34.8 0.576  89.0
10  2.73  1.54 0.563  14.9  47.5  28.2  15.5  20.1  161.  14.8  31.6 0.597  88.7
# ... with 146 more rows, and 2 more variables: TKW &lt;dbl&gt;, NKE &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="kw">select_non_numeric_cols</span>(data_ge2)</a></code></pre></div>
<pre><code># A tibble: 156 x 3
   ENV   GEN   REP  
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;
 1 A1    H1    1    
 2 A1    H1    2    
 3 A1    H1    3    
 4 A1    H10   1    
 5 A1    H10   2    
 6 A1    H10   3    
 7 A1    H11   1    
 8 A1    H11   2    
 9 A1    H11   3    
10 A1    H12   1    
# ... with 146 more rows</code></pre>
<p>Podemos selecionar a primeira ou a última coluna rapidamente com <code>select_first_col()</code> e <code>select_last_col()</code>, respectivamente.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="kw">select_first_col</span>(data_ge2)</a></code></pre></div>
<pre><code># A tibble: 156 x 1
   ENV  
   &lt;fct&gt;
 1 A1   
 2 A1   
 3 A1   
 4 A1   
 5 A1   
 6 A1   
 7 A1   
 8 A1   
 9 A1   
10 A1   
# ... with 146 more rows</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1"><span class="kw">select_last_col</span>(data_ge2)</a></code></pre></div>
<pre><code># A tibble: 156 x 1
     NKE
   &lt;dbl&gt;
 1  521.
 2  494.
 3  565.
 4  519.
 5  502.
 6  525.
 7  575 
 8  501.
 9  513.
10  480.
# ... with 146 more rows</code></pre>
<p><em>Select helpers</em> podem ser usados para selecionar variáveis que correspondem a uma expressão. Isso significa que podemos usar uma função para selecionar variáveis em vez de digitar seus próprios nomes. O <code>metan</code> reexporta os <a href="https://tidyselect.r-lib.org/reference/select_helpers.html">tidy select helpers</a> e implementa os próprios <em>select helpers</em> com base em operações com prefixos e sufixos (<a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>different_var()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>intersect_var()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>union_var()</code></a>), tamanho dos nomes das variáveis (<a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20Select_helper.html"><code>width_of()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>width_gength_than()</code></a> e <a href="https:%20//tiagoolivoto.github%20.io%20/%20metan%20/%20reference%20/%20Select_helper.html"><code>width_less_than()</code></a>) e no tipo de letra (<a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>lower_case_only()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference/Select_helper.html"><code>upper_case_only()</code></a> e <a href="https:%20//tiagoolivoto.github%20.io%20/%20metan%20/%20reference%20/%20Select_helper.html"><code>title_case_only()</code></a>).</p>
<ul>
<li><strong>Selecionando variáveis que começam com um prefixo.</strong></li>
</ul>
<p>Se quisermos selecionar as variáveis que começam com “N”, podemos usar:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="kw">starts_with</span>(<span class="st">&quot;C&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 4
      CL    CD    CW  CDED
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  28.1  16.3  25.1 0.538
 2  27.6  14.5  21.4 0.551
 3  28.4  16.4  24.0 0.561
 4  31.7  17.4  26.2 0.586
 5  32.0  15.5  20.7 0.607
 6  30.4  17.5  26.8 0.577
 7  30.6  18.0  26.2 0.594
 8  28.7  17.2  24.1 0.608
 9  27.6  16.4  20.5 0.576
10  28.2  15.5  20.1 0.597
# ... with 146 more rows</code></pre>
<p>mas se quisermos selecionar aqueles que não começam com “C”, basta adicionar “-” logo antes de <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>starts_with()</code></a></p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;C&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 14
   ENV   GEN   REP      PH    EH    EP    EL    ED    KW    NR   NKR  PERK   TKW
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    1      2.61  1.71 0.658  16.1  52.2  217.  15.6  36.6  89.6  418.
 2 A1    H1    2      2.87  1.76 0.628  14.2  50.3  184.  16    31.4  89.5  361.
 3 A1    H1    3      2.68  1.58 0.591  16.0  50.7  208.  17.2  31.8  89.7  367.
 4 A1    H10   1      2.83  1.64 0.581  16.7  54.1  194.  15.6  32.8  87.9  374.
 5 A1    H10   2      2.79  1.71 0.616  14.9  52.7  176.  17.6  28    89.7  347.
 6 A1    H10   3      2.72  1.51 0.554  16.7  52.7  207.  16.8  32.8  88.5  394.
 7 A1    H11   1      2.75  1.51 0.549  17.4  51.7  217.  16.8  34.6  89.1  377.
 8 A1    H11   2      2.72  1.56 0.573  16.7  47.2  181.  13.6  34.4  88.3  361.
 9 A1    H11   3      2.77  1.67 0.600  15.8  47.9  166.  15.2  34.8  89.0  322.
10 A1    H12   1      2.73  1.54 0.563  14.9  47.5  161.  14.8  31.6  88.7  345.
# ... with 146 more rows, and 1 more variable: NKE &lt;dbl&gt;</code></pre>
<ul>
<li><strong>Selecionando variáveis que terminam com um sufixo.</strong></li>
</ul>
<p>Da mesma forma, se quisermos selecionar as variáveis que terminam com “D”, podemos usar:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="kw">ends_with</span>(<span class="st">&quot;D&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 3
      ED    CD  CDED
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  52.2  16.3 0.538
 2  50.3  14.5 0.551
 3  50.7  16.4 0.561
 4  54.1  17.4 0.586
 5  52.7  15.5 0.607
 6  52.7  17.5 0.577
 7  51.7  18.0 0.594
 8  47.2  17.2 0.608
 9  47.9  16.4 0.576
10  47.5  15.5 0.597
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecionando variáveis que começam com um prefixo <em>E</em> terminam com um sufixo.</strong></li>
</ul>
<p>Agora, se quisermos selecionar variáveis que começam com “C” e terminam com “D”, ou seja, a interseção entre a letra inicial “C” e a letra final “D”, podemos:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="kw">intersect_var</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 2
      CD  CDED
   &lt;dbl&gt; &lt;dbl&gt;
 1  16.3 0.538
 2  14.5 0.551
 3  16.4 0.561
 4  17.4 0.586
 5  15.5 0.607
 6  17.5 0.577
 7  18.0 0.594
 8  17.2 0.608
 9  16.4 0.576
10  15.5 0.597
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecionando variáveis que começam com um prefixo <em>OU</em> terminam com um sufixo.</strong></li>
</ul>
<p>Também podemos obter a união entre a letra inicial “C” e a letra final “D”, ou seja, variáveis que começam com “C” ou terminam com “D”.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="kw">union_var</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 5
      CL    CD    CW  CDED    ED
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  28.1  16.3  25.1 0.538  52.2
 2  27.6  14.5  21.4 0.551  50.3
 3  28.4  16.4  24.0 0.561  50.7
 4  31.7  17.4  26.2 0.586  54.1
 5  32.0  15.5  20.7 0.607  52.7
 6  30.4  17.5  26.8 0.577  52.7
 7  30.6  18.0  26.2 0.594  51.7
 8  28.7  17.2  24.1 0.608  47.2
 9  27.6  16.4  20.5 0.576  47.9
10  28.2  15.5  20.1 0.597  47.5
# ... with 146 more rows</code></pre>
<ul>
<li>** Selecionando variáveis que começam com um prefixo <em>E NÃO</em> terminam com um sufixo.**</li>
</ul>
<p>Também podemos obter a diferença entre a letra inicial “C” e a letra final “D”, ou seja, variáveis que começam com “C” e não terminam com “D”.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">select_cols</span>(data_ge2, <span class="kw">difference_var</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 2
      CL    CW
   &lt;dbl&gt; &lt;dbl&gt;
 1  28.1  25.1
 2  27.6  21.4
 3  28.4  24.0
 4  31.7  26.2
 5  32.0  20.7
 6  30.4  26.8
 7  30.6  26.2
 8  28.7  24.1
 9  27.6  20.5
10  28.2  20.1
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecionando variáveis que contêm uma string literal.</strong></li>
</ul>
<p>Se as variáveis no conjunto de dados tiverem um padrão com diferenças entre um grupo de variáveis, podemos usar o código a seguir para selecionar variáveis com um padrão. Primeiro, iremos alterar os nomes das variáveis <code>PH</code>, <code>EH</code>, <code>EP</code> e <code>EL</code> incluindo <code>_PLANT</code> para indicar que são variáveis relacionadas à planta. Em seguida, selecionaremos essas variáveis com a função <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>contains()</code></a>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1">data_vars &lt;-<span class="st"> </span>data_ge2<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb132-2" title="2">  <span class="kw">rename</span>(<span class="dt">PH_PLANT =</span> PH,</a>
<a class="sourceLine" id="cb132-3" title="3">         <span class="dt">EH_PLANT =</span> EH,</a>
<a class="sourceLine" id="cb132-4" title="4">         <span class="dt">EP_PLANT =</span> EP,</a>
<a class="sourceLine" id="cb132-5" title="5">         <span class="dt">EL_PLANT =</span> EL)</a>
<a class="sourceLine" id="cb132-6" title="6"><span class="kw">names</span>(data_vars)</a></code></pre></div>
<pre><code> [1] &quot;ENV&quot;      &quot;GEN&quot;      &quot;REP&quot;      &quot;PH_PLANT&quot; &quot;EH_PLANT&quot; &quot;EP_PLANT&quot;
 [7] &quot;EL_PLANT&quot; &quot;ED&quot;       &quot;CL&quot;       &quot;CD&quot;       &quot;CW&quot;       &quot;KW&quot;      
[13] &quot;NR&quot;       &quot;NKR&quot;      &quot;CDED&quot;     &quot;PERK&quot;     &quot;TKW&quot;      &quot;NKE&quot;     </code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="kw">select_cols</span>(data_vars, <span class="kw">contains</span>(<span class="st">&quot;PLANT&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 4
   PH_PLANT EH_PLANT EP_PLANT EL_PLANT
      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1     2.61     1.71    0.658     16.1
 2     2.87     1.76    0.628     14.2
 3     2.68     1.58    0.591     16.0
 4     2.83     1.64    0.581     16.7
 5     2.79     1.71    0.616     14.9
 6     2.72     1.51    0.554     16.7
 7     2.75     1.51    0.549     17.4
 8     2.72     1.56    0.573     16.7
 9     2.77     1.67    0.600     15.8
10     2.73     1.54    0.563     14.9
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecionando variáveis que correspondem a uma expressão regular.</strong></li>
</ul>
<p>Seleções mais sofisticadas podem ser feitas usando <a href="https://tidyselect.r-lib.org/reference/select_helpers.html"><code>matches()</code></a>. Supondo que gostaríamos de selecionar as variáveis que começam com “E” tem a segunda letra entre “A” e “L” e terminam com “T”, usaríamos algo como:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1"><span class="kw">select_cols</span>(data_vars, <span class="kw">matches</span>(<span class="st">&quot;^ E [A-L]. * T $&quot;</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 0</code></pre>
<ul>
<li><strong>Selecionando a última ou a primeira variável, possivelmente com um deslocamento.</strong></li>
</ul>
<p>Podemos selecionar a <em>n</em>-ésima primeira ou a última coluna com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_last_col()</code></a> ou <a href="https%20:%20//tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>select_first_col()</code></a>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1"><span class="kw">select_first_col</span>(data_vars)</a></code></pre></div>
<pre><code># A tibble: 156 x 1
   ENV  
   &lt;fct&gt;
 1 A1   
 2 A1   
 3 A1   
 4 A1   
 5 A1   
 6 A1   
 7 A1   
 8 A1   
 9 A1   
10 A1   
# ... with 146 more rows</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1"><span class="kw">select_last_col</span>(data_vars)</a></code></pre></div>
<pre><code># A tibble: 156 x 1
     NKE
   &lt;dbl&gt;
 1  521.
 2  494.
 3  565.
 4  519.
 5  502.
 6  525.
 7  575 
 8  501.
 9  513.
10  480.
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecione variáveis com um comprimento de nome específico (quatro letras)</strong></li>
</ul>

<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="kw">select_cols</span>(data_vars, <span class="kw">width_of</span>(<span class="dv">4</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 2
    CDED  PERK
   &lt;dbl&gt; &lt;dbl&gt;
 1 0.538  89.6
 2 0.551  89.5
 3 0.561  89.7
 4 0.586  87.9
 5 0.607  89.7
 6 0.577  88.5
 7 0.594  89.1
 8 0.608  88.3
 9 0.576  89.0
10 0.597  88.7
# ... with 146 more rows</code></pre>
<ul>
<li>**Selecione variáveis com largura menor que *n**.</li>
</ul>

<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" title="1"><span class="kw">select_cols</span>(data_vars, <span class="kw">width_less_than</span>(<span class="dv">3</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 6
      ED    CL    CD    CW    KW    NR
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  52.2  28.1  16.3  25.1  217.  15.6
 2  50.3  27.6  14.5  21.4  184.  16  
 3  50.7  28.4  16.4  24.0  208.  17.2
 4  54.1  31.7  17.4  26.2  194.  15.6
 5  52.7  32.0  15.5  20.7  176.  17.6
 6  52.7  30.4  17.5  26.8  207.  16.8
 7  51.7  30.6  18.0  26.2  217.  16.8
 8  47.2  28.7  17.2  24.1  181.  13.6
 9  47.9  27.6  16.4  20.5  166.  15.2
10  47.5  28.2  15.5  20.1  161.  14.8
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecione variáveis com largura maior que * n </strong>*.</li>
</ul>

<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" title="1"><span class="kw">select_cols</span>(data_vars, <span class="kw">width_greater_than</span>(<span class="dv">3</span>))</a></code></pre></div>
<pre><code># A tibble: 156 x 6
   PH_PLANT EH_PLANT EP_PLANT EL_PLANT  CDED  PERK
      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     2.61     1.71    0.658     16.1 0.538  89.6
 2     2.87     1.76    0.628     14.2 0.551  89.5
 3     2.68     1.58    0.591     16.0 0.561  89.7
 4     2.83     1.64    0.581     16.7 0.586  87.9
 5     2.79     1.71    0.616     14.9 0.607  89.7
 6     2.72     1.51    0.554     16.7 0.577  88.5
 7     2.75     1.51    0.549     17.4 0.594  89.1
 8     2.72     1.56    0.573     16.7 0.608  88.3
 9     2.77     1.67    0.600     15.8 0.576  89.0
10     2.73     1.54    0.563     14.9 0.597  88.7
# ... with 146 more rows</code></pre>
<ul>
<li><strong>Selecione variáveis por tipo de letra</strong></li>
</ul>
<p>Vamos criar um conjunto de dados com nomes de colunas <em>bagunçados</em>.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" title="1">df &lt;-<span class="st"> </span><span class="kw">head</span>(data_ge, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb148-2" title="2"><span class="kw">colnames</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;Env&quot;</span>, <span class="st">&quot;gen&quot;</span>, <span class="st">&quot;Rep&quot;</span>, <span class="st">&quot;GY&quot;</span>, <span class="st">&quot;hm&quot;</span>)</a>
<a class="sourceLine" id="cb148-3" title="3"><span class="kw">select_cols</span>(df, <span class="kw">lower_case_only</span>())</a></code></pre></div>
<pre><code># A tibble: 3 x 2
  gen      hm
  &lt;fct&gt; &lt;dbl&gt;
1 G1     44.9
2 G1     46.9
3 G1     47.8</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" title="1"><span class="kw">select_cols</span>(df, <span class="kw">upper_case_only</span>())</a></code></pre></div>
<pre><code># A tibble: 3 x 1
     GY
  &lt;dbl&gt;
1  2.17
2  2.50
3  2.43</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" title="1"><span class="kw">select_cols</span>(df, <span class="kw">title_case_only</span>())</a></code></pre></div>
<pre><code># A tibble: 3 x 2
  Env   Rep  
  &lt;fct&gt; &lt;fct&gt;
1 E1    1    
2 E1    2    
3 E1    3    </code></pre>

</div>
<div id="remover-linhas-ou-colunas" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Remover linhas ou colunas</h3>
<p>Podemos usar <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>remove_cols()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_rows_cols.html"><code>remove_rows()</code></a> para remover colunas e linhas, respectivamente.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" title="1"><span class="kw">remove_cols</span>(data_ge2, ENV, GEN)</a></code></pre></div>
<pre><code># A tibble: 156 x 16
   REP      PH    EH    EP    EL    ED    CL    CD    CW    KW    NR   NKR  CDED
   &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 1      2.61  1.71 0.658  16.1  52.2  28.1  16.3  25.1  217.  15.6  36.6 0.538
 2 2      2.87  1.76 0.628  14.2  50.3  27.6  14.5  21.4  184.  16    31.4 0.551
 3 3      2.68  1.58 0.591  16.0  50.7  28.4  16.4  24.0  208.  17.2  31.8 0.561
 4 1      2.83  1.64 0.581  16.7  54.1  31.7  17.4  26.2  194.  15.6  32.8 0.586
 5 2      2.79  1.71 0.616  14.9  52.7  32.0  15.5  20.7  176.  17.6  28   0.607
 6 3      2.72  1.51 0.554  16.7  52.7  30.4  17.5  26.8  207.  16.8  32.8 0.577
 7 1      2.75  1.51 0.549  17.4  51.7  30.6  18.0  26.2  217.  16.8  34.6 0.594
 8 2      2.72  1.56 0.573  16.7  47.2  28.7  17.2  24.1  181.  13.6  34.4 0.608
 9 3      2.77  1.67 0.600  15.8  47.9  27.6  16.4  20.5  166.  15.2  34.8 0.576
10 1      2.73  1.54 0.563  14.9  47.5  28.2  15.5  20.1  161.  14.8  31.6 0.597
# ... with 146 more rows, and 3 more variables: PERK &lt;dbl&gt;, TKW &lt;dbl&gt;,
#   NKE &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" title="1"><span class="kw">remove_rows</span>(data_ge2, <span class="dv">1</span><span class="op">:</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">5</span><span class="op">:</span><span class="st"> </span><span class="dv">8</span>)</a></code></pre></div>
<pre><code># A tibble: 150 x 18
   ENV   GEN   REP      PH    EH    EP    EL    ED    CL    CD    CW    KW    NR
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    3      2.68  1.58 0.591  16.0  50.7  28.4  16.4  24.0  208.  17.2
 2 A1    H10   1      2.83  1.64 0.581  16.7  54.1  31.7  17.4  26.2  194.  15.6
 3 A1    H11   3      2.77  1.67 0.600  15.8  47.9  27.6  16.4  20.5  166.  15.2
 4 A1    H12   1      2.73  1.54 0.563  14.9  47.5  28.2  15.5  20.1  161.  14.8
 5 A1    H12   2      2.56  1.56 0.616  15.7  49.9  29.9  16.2  24.0  188.  17.2
 6 A1    H12   3      2.79  1.53 0.546  15.0  52.7  31.4  15.2  32.9  193.  20  
 7 A1    H13   1      2.74  1.60 0.586  14.6  54.0  32.5  15.1  31.5  205.  20  
 8 A1    H13   2      2.64  1.37 0.517  14.8  53.7  31.0  15.5  31.1  239.  20.4
 9 A1    H13   3      2.93  1.77 0.602  14.9  52.7  30.1  15.8  31.3  212.  15.6
10 A1    H2    1      2.55  1.22 0.481  15.1  51.7  27.7  15.3  23.7  198.  16.4
# ... with 140 more rows, and 5 more variables: NKR &lt;dbl&gt;, CDED &lt;dbl&gt;,
#   PERK &lt;dbl&gt;, TKW &lt;dbl&gt;, NKE &lt;dbl&gt;</code></pre>
<p>As funções <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>remove_rows_na()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference%20/utils_rows_cols.html"><code>remove_rows_na()</code></a> são usados para remover linhas e colunas com valores <code>NA</code>, respectivamente. </p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" title="1">data_with_na &lt;-<span class="st"> </span>maize</a>
<a class="sourceLine" id="cb158-2" title="2">data_with_na[<span class="kw">c</span> (<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>), <span class="kw">c</span> (<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">9</span><span class="op">:</span><span class="dv">10</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb158-3" title="3"><span class="kw">remove_cols_na</span>(data_with_na)</a></code></pre></div>
<pre><code>Warning: Column(s) REP, APLA, AIES, MMG, NGRA with NA values deleted.</code></pre>
<pre><code># A tibble: 780 x 5
   AMB   HIB    CESP  DIES  MGRA
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1     16.9  52.1 228. 
 2 A1    H1     14.4  50.7 187. 
 3 A1    H1     16.5  54.7 230. 
 4 A1    H1     16.8  52.0 213. 
 5 A1    H1     15.9  51.6 224. 
 6 A1    H1     15    51.4 203. 
 7 A1    H1     10.9  41.9  75.2
 8 A1    H1     15    53.4 204. 
 9 A1    H1     13.6  50.8 187. 
10 A1    H1     16.3  53.9 250. 
# ... with 770 more rows</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1"><span class="kw">remove_rows_na</span>(data_with_na)</a></code></pre></div>
<pre><code>Warning: Row(s) 1, 5, 10 with NA values deleted.</code></pre>
<pre><code># A tibble: 777 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427
 2 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497
 3 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523
 4 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 5 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294
 6 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528
 7 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538
 8 A1    H1    III    2.69  1.52  15.6  49.5 195.   369.   529
 9 A1    H1    III    2.6   1.68  14.3  48.9 172.   344.   500
10 A1    H1    III    2.82  1.52  18.4  54.3 255.   371.   689
# ... with 767 more rows</code></pre>
</div>
<div id="ordenar-linhas" class="section level3">
<h3><span class="header-section-number">7.1.3</span> Ordenar linhas</h3>
<p>A função <code>arrange()</code>  é utilizada para ordenar as linhas de um tibble (ou data.frames) com base em uma expressão envolvendo suas variáveis. Considerando as funções que vimos até aqui, vamos computar a média para a MGRA, criar uma nova variável chamada <strong>Rank</strong>, qual corresponde ao ranqueamento dos híbridos para a variável em questão e ordenar a variável Rank em ordem crescente, onde o híbrido com a maior média ficará na primeira linha.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb164-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb164-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_mean =</span> <span class="kw">mean</span>(MGRA)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb164-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Rank =</span> <span class="kw">rank</span>(MGRA_mean)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb164-5" title="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>Rank)</a></code></pre></div>
<pre><code># A tibble: 13 x 3
   HIB   MGRA_mean  Rank
   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
 1 H6         188.    13
 2 H2         187.    12
 3 H4         184.    11
 4 H1         184.    10
 5 H5         184.     9
 6 H13        180.     8
 7 H7         171.     7
 8 H3         169.     6
 9 H11        167.     5
10 H10        164.     4
11 H8         160.     3
12 H12        157.     2
13 H9         153.     1</code></pre>


<div class="tarefa">
<p><strong>Exercício 3</strong></p>
<ul>
<li>Considerando o exemplo anterior, ordene a variável <strong>Rank</strong> em ordem decrescente.</li>
</ul>
</div>

<p><a href="resposta-dos-exercícios.html#exerc3">Resposta</a></p>
<p>Ao combinar a função <code>group_by()</code> com <code>arrange()</code> é possível realizar o ordenamento para cada nível de um determinado fator. No exemplo abaixo, a variável <code>APLA</code> é ordenada de maneira crescente para cada híbrido.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb166-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb166-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(APLA, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code># A tibble: 780 x 10
# Groups:   HIB [13]
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A3    H1    II     1.93  0.93  13    50.0 120.   276.   433
 2 A3    H1    I      2     1.05  19.9  53.3 253.   444.   570
 3 A3    H1    I      2.07  1.05  13.2  47.9 110.   293.   377
 4 A3    H1    II     2.08  0.94  12    47.6 103.   334.   309
 5 A3    H1    III    2.1   0.97  17.5  50.8 222.   423.   524
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A3    H1    I      2.12  1.03  18.5  52.0 214.   382.   560
 8 A3    H1    III    2.12  0.96  15    56.8 174.   339.   512
 9 A3    H1    I      2.13  1.05  11.6  47.0  89.5  300.   298
10 A4    H1    I      2.13  1.1   12.8  47.6 144.   280.   516
# ... with 770 more rows</code></pre>
</div>
<div id="selecionar-top-n-linhas-baseado-em-valor" class="section level3">
<h3><span class="header-section-number">7.1.4</span> Selecionar top n linhas baseado em valor</h3>
<p>A função <code>top_n()</code> é usada para selecionar linhas superiores ou inferiores em cada grupo.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" title="1"><span class="co"># seleciona as duas linhas com o maior valor de MGRA</span></a>
<a class="sourceLine" id="cb168-2" title="2"><span class="kw">top_n</span>(maize, <span class="dv">2</span>, MGRA)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
2 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1"><span class="co"># seleciona as duas linhas com o menor valor de MGRA</span></a>
<a class="sourceLine" id="cb170-2" title="2"><span class="kw">top_n</span>(maize, <span class="dv">2</span>, <span class="op">-</span>MGRA)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H9    III    2.72  1.54  11    42.8  58.5  295.   198
2 A2    H8    I      1.92  0.63  12.1  39.7  59.5  243.   245</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1"><span class="co"># Maior produtividade em cada ambiente</span></a>
<a class="sourceLine" id="cb172-2" title="2">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb172-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb172-4" title="4"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">1</span>, MGRA)</a></code></pre></div>
<pre><code># A tibble: 4 x 10
# Groups:   AMB [4]
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698
2 A2    H6    III    3.18  1.62  19.2  53.0  270.  382.   708
3 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570
4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</code></pre>
</div>
<div id="adicionar-novas-variáveis" class="section level3">
<h3><span class="header-section-number">7.1.5</span> Adicionar novas variáveis</h3>
<p>A função <code>mutate()</code>  é utilizada quando se deseja adicionar novas variáveis no conjunto de dados. Estas variáveis são funções de variáveis existentes. Como exemplo, vamos criar uma nova variável chamada <code>PRE_2</code> no conjunto de dados <code>maize</code>, qual será a razão entre AIES e APLA. Note que a função adiciona a nova variável após a última variável origina e mantém todas as demais. Digamos que queríamos adicionar a nova variável criada após a variável REP, a seguinte abordagem com o pacote <code>dplyr</code> deve ser usada.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb174-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PRE_2 =</span> AIES<span class="op">/</span>APLA) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-3" title="3"><span class="st">  </span><span class="kw">select</span>(AMB, HIB, REP, PRE_<span class="dv">2</span>, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code># A tibble: 780 x 11
   AMB   HIB   REP   PRE_2  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I     0.976  2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I     0.572  2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I     0.565  2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I     0.586  2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I     0.592  2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II    0.849  2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II    0.565  3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II    0.620  2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II    0.574  3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II    0.530  3.02  1.6   16.3  53.9 250.   430.   582
# ... with 770 more rows</code></pre>
<p>Com a função <code>add_cols()</code>, o mesmo resultado pode ser obtido com:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" title="1"><span class="kw">add_cols</span>(maize,</a>
<a class="sourceLine" id="cb176-2" title="2">         <span class="dt">PRE_2 =</span> AIES<span class="op">/</span>APLA,</a>
<a class="sourceLine" id="cb176-3" title="3">         <span class="dt">.after =</span> <span class="st">&quot;REP&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 780 x 11
   AMB   HIB   REP   PRE_2  APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I     0.976  2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I     0.572  2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I     0.565  2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I     0.586  2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I     0.592  2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II    0.849  2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II    0.565  3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II    0.620  2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II    0.574  3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II    0.530  3.02  1.6   16.3  53.9 250.   430.   582
# ... with 770 more rows</code></pre>


<div class="tarefa">
<p><strong>Exercício 2</strong></p>
<ul>
<li><p>Crie uma variável chamada MGRA_kg qual será o resultado em quilogramas da massa de grãos.</p></li>
<li><p>Selecione somente as colunas HIB, AMB, REP e MGRA_Kg.</p></li>
<li><p>Selecione somente as cinco linhas com maior valor de MGRA_Kg.</p></li>
</ul>
</div>

<p><a href="resposta-dos-exercícios.html#exerc2">Resposta</a></p>
</div>
<div id="concatenar-colunas" class="section level3">
<h3><span class="header-section-number">7.1.6</span> Concatenar colunas</h3>
<p>A função <code>concatenate()</code> pode ser usada para concatenar várias colunas de um conjunto de dados. <code>concatenate()</code> retorna um quadro de dados com todas as colunas originais em <code>.data</code> mais a variável concatenada, após a última coluna. Para escolher a posição da nova variável, use o argumento <code>.after</code> ou<code>.before</code>, como a seguir.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">concatenate</span>(data_ge, ENV, GEN, REP, <span class="dt">.after =</span> <span class="st">&quot;REP&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   REP   new_var    GY    HM
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    1     E1_G1_1  2.17  44.9
 2 E1    G1    2     E1_G1_2  2.50  46.9
 3 E1    G1    3     E1_G1_3  2.43  47.8
 4 E1    G2    1     E1_G2_1  3.21  45.2
 5 E1    G2    2     E1_G2_2  2.93  45.3
 6 E1    G2    3     E1_G2_3  2.56  45.5
 7 E1    G3    1     E1_G3_1  2.77  46.7
 8 E1    G3    2     E1_G3_2  3.62  43.2
 9 E1    G3    3     E1_G3_3  2.28  47.8
10 E1    G4    1     E1_G4_1  2.36  47.9
# ... with 410 more rows</code></pre>

<p>Para eliminar as variáveis existentes e manter apenas a coluna concatenada, use o argumento <code>drop = TRUE</code>. Para usar <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>concatenate()</code></a> dentro de uma determinada função como <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>add_cols()</code></a> use o argumento <code>pull = TRUE</code> para extrair os resultados para um vetor.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1"><span class="kw">concatenate</span>(data_ge, ENV, GEN, REP, <span class="dt">drop =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 1
   new_var
   &lt;chr&gt;  
 1 E1_G1_1
 2 E1_G1_2
 3 E1_G1_3
 4 E1_G2_1
 5 E1_G2_2
 6 E1_G2_3
 7 E1_G3_1
 8 E1_G3_2
 9 E1_G3_3
10 E1_G4_1
# ... with 410 more rows</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1"><span class="kw">concatenate</span>(data_ge, ENV, GEN, REP, <span class="dt">pull =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>[1] &quot;E1_G1_1&quot; &quot;E1_G1_2&quot; &quot;E1_G1_3&quot; &quot;E1_G2_1&quot; &quot;E1_G2_2&quot; &quot;E1_G2_3&quot;</code></pre>
</div>
<div id="formatar-nomes-de-coluna" class="section level3">
<h3><span class="header-section-number">7.1.7</span> Formatar nomes de coluna</h3>
<p>As funções <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>colnames_to_lower()</code></a>, <a href="https://tiagoolivoto.github.io/metan/reference%20/utils_rows_cols.html"><code>colnames_to_upper()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>colnames_to_title()</code></a> podem ser usados para converter nomes de colunas em maiúsculas, minúsculas ou em formato de título, respectivamente .  </p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">colnames_to_lower</span>(data_ge)</a></code></pre></div>
<pre><code># A tibble: 420 x 5
   env   gen   rep      gy    hm
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    1      2.17  44.9
 2 E1    G1    2      2.50  46.9
 3 E1    G1    3      2.43  47.8
 4 E1    G2    1      3.21  45.2
 5 E1    G2    2      2.93  45.3
 6 E1    G2    3      2.56  45.5
 7 E1    G3    1      2.77  46.7
 8 E1    G3    2      3.62  43.2
 9 E1    G3    3      2.28  47.8
10 E1    G4    1      2.36  47.9
# ... with 410 more rows</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">colnames_to_upper</span>(data_ge)</a></code></pre></div>
<pre><code># A tibble: 420 x 5
   ENV   GEN   REP      GY    HM
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    1      2.17  44.9
 2 E1    G1    2      2.50  46.9
 3 E1    G1    3      2.43  47.8
 4 E1    G2    1      3.21  45.2
 5 E1    G2    2      2.93  45.3
 6 E1    G2    3      2.56  45.5
 7 E1    G3    1      2.77  46.7
 8 E1    G3    2      3.62  43.2
 9 E1    G3    3      2.28  47.8
10 E1    G4    1      2.36  47.9
# ... with 410 more rows</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" title="1"><span class="kw">colnames_to_title</span>(data_ge)</a></code></pre></div>
<pre><code># A tibble: 420 x 5
   Env   Gen   Rep      Gy    Hm
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    1      2.17  44.9
 2 E1    G1    2      2.50  46.9
 3 E1    G1    3      2.43  47.8
 4 E1    G2    1      3.21  45.2
 5 E1    G2    2      2.93  45.3
 6 E1    G2    3      2.56  45.5
 7 E1    G3    1      2.77  46.7
 8 E1    G3    2      3.62  43.2
 9 E1    G3    3      2.28  47.8
10 E1    G4    1      2.36  47.9
# ... with 410 more rows</code></pre>
</div>
<div id="reordenando-colunas" class="section level3">
<h3><span class="header-section-number">7.1.8</span> Reordenando colunas</h3>
<p>A função <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>reorder_cols()</code></a> pode ser usada para reordenar as colunas de um quadro de dados.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">reorder_cols</span> (data_vars, <span class="kw">contains</span>(<span class="st">&quot;PLANT&quot;</span>), <span class="dt">.before =</span> <span class="st">&quot;ENV&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 156 x 18
   PH_PLANT EH_PLANT EP_PLANT EL_PLANT ENV   GEN   REP      ED    CL    CD    CW
      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     2.61     1.71    0.658     16.1 A1    H1    1      52.2  28.1  16.3  25.1
 2     2.87     1.76    0.628     14.2 A1    H1    2      50.3  27.6  14.5  21.4
 3     2.68     1.58    0.591     16.0 A1    H1    3      50.7  28.4  16.4  24.0
 4     2.83     1.64    0.581     16.7 A1    H10   1      54.1  31.7  17.4  26.2
 5     2.79     1.71    0.616     14.9 A1    H10   2      52.7  32.0  15.5  20.7
 6     2.72     1.51    0.554     16.7 A1    H10   3      52.7  30.4  17.5  26.8
 7     2.75     1.51    0.549     17.4 A1    H11   1      51.7  30.6  18.0  26.2
 8     2.72     1.56    0.573     16.7 A1    H11   2      47.2  28.7  17.2  24.1
 9     2.77     1.67    0.600     15.8 A1    H11   3      47.9  27.6  16.4  20.5
10     2.73     1.54    0.563     14.9 A1    H12   1      47.5  28.2  15.5  20.1
# ... with 146 more rows, and 7 more variables: KW &lt;dbl&gt;, NR &lt;dbl&gt;, NKR &lt;dbl&gt;,
#   CDED &lt;dbl&gt;, PERK &lt;dbl&gt;, TKW &lt;dbl&gt;, NKE &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1"><span class="kw">reorder_cols</span> (data_vars, ENV, GEN, <span class="dt">.after =</span> <span class="st">&quot;ED&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 156 x 18
   REP   PH_PLANT EH_PLANT EP_PLANT EL_PLANT    ED ENV   GEN      CL    CD    CW
   &lt;fct&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 1         2.61     1.71    0.658     16.1  52.2 A1    H1     28.1  16.3  25.1
 2 2         2.87     1.76    0.628     14.2  50.3 A1    H1     27.6  14.5  21.4
 3 3         2.68     1.58    0.591     16.0  50.7 A1    H1     28.4  16.4  24.0
 4 1         2.83     1.64    0.581     16.7  54.1 A1    H10    31.7  17.4  26.2
 5 2         2.79     1.71    0.616     14.9  52.7 A1    H10    32.0  15.5  20.7
 6 3         2.72     1.51    0.554     16.7  52.7 A1    H10    30.4  17.5  26.8
 7 1         2.75     1.51    0.549     17.4  51.7 A1    H11    30.6  18.0  26.2
 8 2         2.72     1.56    0.573     16.7  47.2 A1    H11    28.7  17.2  24.1
 9 3         2.77     1.67    0.600     15.8  47.9 A1    H11    27.6  16.4  20.5
10 1         2.73     1.54    0.563     14.9  47.5 A1    H12    28.2  15.5  20.1
# ... with 146 more rows, and 7 more variables: KW &lt;dbl&gt;, NR &lt;dbl&gt;, NKR &lt;dbl&gt;,
#   CDED &lt;dbl&gt;, PERK &lt;dbl&gt;, TKW &lt;dbl&gt;, NKE &lt;dbl&gt;</code></pre>
<p>É possível colocar as colunas no primeiro e no último lugar rapidamente com <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>columns_to_first()</code></a> e <a href="https:%20//tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>columns_to_last()</code></a>, respectivamente.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1"><span class="kw">column_to_first</span>(data_ge2, NKE, NR)</a></code></pre></div>
<pre><code># A tibble: 156 x 18
     NKE    NR ENV   GEN   REP      PH    EH    EP    EL    ED    CL    CD    CW
   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  521.  15.6 A1    H1    1      2.61  1.71 0.658  16.1  52.2  28.1  16.3  25.1
 2  494.  16   A1    H1    2      2.87  1.76 0.628  14.2  50.3  27.6  14.5  21.4
 3  565.  17.2 A1    H1    3      2.68  1.58 0.591  16.0  50.7  28.4  16.4  24.0
 4  519.  15.6 A1    H10   1      2.83  1.64 0.581  16.7  54.1  31.7  17.4  26.2
 5  502.  17.6 A1    H10   2      2.79  1.71 0.616  14.9  52.7  32.0  15.5  20.7
 6  525.  16.8 A1    H10   3      2.72  1.51 0.554  16.7  52.7  30.4  17.5  26.8
 7  575   16.8 A1    H11   1      2.75  1.51 0.549  17.4  51.7  30.6  18.0  26.2
 8  501.  13.6 A1    H11   2      2.72  1.56 0.573  16.7  47.2  28.7  17.2  24.1
 9  513.  15.2 A1    H11   3      2.77  1.67 0.600  15.8  47.9  27.6  16.4  20.5
10  480.  14.8 A1    H12   1      2.73  1.54 0.563  14.9  47.5  28.2  15.5  20.1
# ... with 146 more rows, and 5 more variables: KW &lt;dbl&gt;, NKR &lt;dbl&gt;,
#   CDED &lt;dbl&gt;, PERK &lt;dbl&gt;, TKW &lt;dbl&gt;</code></pre>
</div>
<div id="obtendo-níveis-de-fatores" class="section level3">
<h3><span class="header-section-number">7.1.9</span> Obtendo níveis de fatores</h3>
<p>Para obter os níveis e o tamanho dos níveis de um fator, as funções <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>get_levels()</code></a> e <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>get_level_size()</code></a> pode ser usado.
</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" title="1"><span class="kw">get_levels</span>(data_ge, ENV)</a></code></pre></div>
<pre><code> [1] &quot;E1&quot;  &quot;E10&quot; &quot;E11&quot; &quot;E12&quot; &quot;E13&quot; &quot;E14&quot; &quot;E2&quot;  &quot;E3&quot;  &quot;E4&quot;  &quot;E5&quot;  &quot;E6&quot;  &quot;E7&quot; 
[13] &quot;E8&quot;  &quot;E9&quot; </code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1"><span class="kw">get_level_size</span>(data_ge, ENV)</a></code></pre></div>
<pre><code> E1 E10 E11 E12 E13 E14  E2  E3  E4  E5  E6  E7  E8  E9 
 30  30  30  30  30  30  30  30  30  30  30  30  30  30 </code></pre>
<p>Utilizando a função <code>case_when()</code>  é possível criar uma variável baseado em um argumento <code>if()</code> vetorizado. <code>case_when()</code> é particularmente útil dentro da função <code>mutate()</code> quando você quer criar uma nova variável que depende de uma combinação complexa de variáveis existentes. No exemplo abaixo, uma nova variável será criada, dependendo dos valores de APLA, AIES ou CESP</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb200-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb200-3" title="3">    <span class="dt">CASE =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb200-4" title="4">      MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span> <span class="op">|</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="fl">1.3</span> <span class="op">|</span><span class="st"> </span>NGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">820</span> <span class="op">~</span><span class="st">  &quot;Selecionar&quot;</span>,</a>
<a class="sourceLine" id="cb200-5" title="5">      APLA <span class="op">&gt;</span><span class="st"> </span><span class="fl">2.3</span> <span class="op">~</span><span class="st"> &quot;Alto&quot;</span>,</a>
<a class="sourceLine" id="cb200-6" title="6">      MGRA <span class="op">&lt;</span><span class="st"> </span><span class="dv">130</span> <span class="op">~</span><span class="st"> &quot;Pouco produtivo&quot;</span>,</a>
<a class="sourceLine" id="cb200-7" title="7">      <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Outro&quot;</span></a>
<a class="sourceLine" id="cb200-8" title="8">      )</a>
<a class="sourceLine" id="cb200-9" title="9">    )</a></code></pre></div>
<pre><code># A tibble: 780 x 11
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA CASE 
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609 Alto 
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427 Alto 
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497 Alto 
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523 Alto 
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551 Alto 
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529 Outro
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294 Alto 
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528 Alto 
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538 Alto 
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582 Alto 
# ... with 770 more rows</code></pre>
</div>
<div id="selecionar-linhas-com-base-em-seus-valores" class="section level3">
<h3><span class="header-section-number">7.1.10</span> Selecionar linhas com base em seus valores</h3>
<p>Utilizando a função <code>filter()</code>  é possivel filtrar as linhas de um conjunto de dados com base no valor de suas variáveis. No primeiro exemplo, selecionaremos as linhas onde o valor da variável MGRA é maior que 280.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb202-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span>)</a></code></pre></div>
<pre><code># A tibble: 4 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
2 A1    H10   I      2.92  1.61  20.3  55.4  283.  441.   641
3 A1    H13   II     2.47  1.28  15.3  53.0  291.  417.   698
4 A4    H10   I      2.65  1.47  14    50.3  287.  275.   493</code></pre>
<p>No segundo exemplo, selecionaremos apenas as linhas onde a MGRA é maior que 220 <strong>OU</strong> a APLA é menor que 1.3 <strong>OU</strong> o NGRA é maior que 820.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb204-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">280</span> <span class="op">|</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="fl">1.3</span> <span class="op">|</span><span class="st"> </span>NGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">820</span>)</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H6    I      2.92  1.64  18    56.0 289.   393.   734
 2 A1    H10   I      2.92  1.61  20.3  55.4 283.   441.   641
 3 A1    H13   II     2.47  1.28  15.3  53.0 291.   417.   698
 4 A2    H8    II     1.03  0.69  10.8  44.8  94.8  277.   342
 5 A2    H10   III    1.09  0.92  15    47.6 166.   299.   555
 6 A3    H10   I      1.04  0.71  14.8  45.5 112.   265.   423
 7 A3    H11   I      1     0.65  14.5  43.6 120.   210.   571
 8 A4    H8    I      2.65  1.67  18    50   277.   251.   903
 9 A4    H8    I      2.95  1.7   18.6  52.9 249.   302.   824
10 A4    H10   I      2.65  1.47  14    50.3 287.   275.   493</code></pre>
<p>No último exemplo, selecionaremos apenas as linhas onde MGRA é maior que é maior que 220 <strong>E</strong> a APLA é menor que 2.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" title="1">maize <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb206-2" title="2"><span class="st">  </span><span class="kw">filter</span>(MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">220</span> <span class="op">&amp;</span><span class="st"> </span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>)</a></code></pre></div>
<pre><code># A tibble: 1 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H6    II     1.97  1.63  17.1  54.7  230.  375.   614</code></pre>
<p>Isto é aproximadamente equivalente ao seguinte código R base.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" title="1">maize[maize<span class="op">$</span>MGRA <span class="op">&gt;</span><span class="st"> </span><span class="dv">220</span> <span class="op">&amp;</span><span class="st"> </span>maize<span class="op">$</span>APLA <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>, ]</a></code></pre></div>
</div>
</div>
<div id="trabalhando-com-números-e-seqüências-de-caracteres" class="section level2">
<h2><span class="header-section-number">7.2</span> Trabalhando com números e seqüências de caracteres</h2>
<div id="arredondando" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Arredondando</h3>
<p>A função <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>round_cols()</code></a> arredonda uma coluna selecionada ou um quadro de dados inteiro para o número especificado de casas decimais (padrão 0). Se nenhuma variável for informada, todas as variáveis numéricas serão arredondadas.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" title="1">df_round &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(data_ge2)</a>
<a class="sourceLine" id="cb209-2" title="2"><span class="kw">head</span>(df_round)</a></code></pre></div>
<pre><code>  ENV GEN REP    PH    EH        EP    EL     ED     CL    CD       CW       KW
1  A1  H1   1 2.612 1.706 0.6579767 16.10 52.222 28.108 16.30 25.06168 216.5231
2  A1  H1   2 2.872 1.760 0.6275319 14.16 50.300 27.616 14.46 21.43085 183.9417
3  A1  H1   3 2.684 1.584 0.5912328 16.04 50.728 28.440 16.38 23.96624 207.6040
4  A1 H10   1 2.832 1.644 0.5813520 16.72 54.054 31.664 17.40 26.20079 193.6866
5  A1 H10   2 2.794 1.706 0.6159704 14.90 52.730 32.032 15.48 20.73916 176.4336
6  A1 H10   3 2.724 1.512 0.5538698 16.68 52.736 30.404 17.50 26.81685 207.1072
    NR  NKR      CDED     PERK      TKW   NKE
1 15.6 36.6 0.5383791 89.61893 417.9800 521.4
2 16.0 31.4 0.5514266 89.48590 360.7694 494.2
3 17.2 31.8 0.5607058 89.68650 366.7125 565.2
4 15.6 32.8 0.5855966 87.89310 373.9682 519.2
5 17.6 28.0 0.6074037 89.66285 346.8787 502.4
6 16.8 32.8 0.5767149 88.46255 394.0328 524.6</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" title="1"><span class="kw">round_cols</span>(df_round) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>  ENV GEN REP   PH   EH   EP    EL    ED    CL    CD    CW     KW   NR  NKR
1  A1  H1   1 2.61 1.71 0.66 16.10 52.22 28.11 16.30 25.06 216.52 15.6 36.6
2  A1  H1   2 2.87 1.76 0.63 14.16 50.30 27.62 14.46 21.43 183.94 16.0 31.4
3  A1  H1   3 2.68 1.58 0.59 16.04 50.73 28.44 16.38 23.97 207.60 17.2 31.8
4  A1 H10   1 2.83 1.64 0.58 16.72 54.05 31.66 17.40 26.20 193.69 15.6 32.8
5  A1 H10   2 2.79 1.71 0.62 14.90 52.73 32.03 15.48 20.74 176.43 17.6 28.0
6  A1 H10   3 2.72 1.51 0.55 16.68 52.74 30.40 17.50 26.82 207.11 16.8 32.8
  CDED  PERK    TKW   NKE
1 0.54 89.62 417.98 521.4
2 0.55 89.49 360.77 494.2
3 0.56 89.69 366.71 565.2
4 0.59 87.89 373.97 519.2
5 0.61 89.66 346.88 502.4
6 0.58 88.46 394.03 524.6</code></pre>
<p>Como alternativa, selecione variáveis para arredondar.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" title="1"><span class="kw">round_cols</span>(df_round, PH, EP, <span class="dt">digits =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>  ENV GEN REP  PH    EH  EP    EL     ED     CL    CD       CW       KW   NR
1  A1  H1   1 2.6 1.706 0.7 16.10 52.222 28.108 16.30 25.06168 216.5231 15.6
2  A1  H1   2 2.9 1.760 0.6 14.16 50.300 27.616 14.46 21.43085 183.9417 16.0
3  A1  H1   3 2.7 1.584 0.6 16.04 50.728 28.440 16.38 23.96624 207.6040 17.2
4  A1 H10   1 2.8 1.644 0.6 16.72 54.054 31.664 17.40 26.20079 193.6866 15.6
5  A1 H10   2 2.8 1.706 0.6 14.90 52.730 32.032 15.48 20.73916 176.4336 17.6
6  A1 H10   3 2.7 1.512 0.6 16.68 52.736 30.404 17.50 26.81685 207.1072 16.8
   NKR      CDED     PERK      TKW   NKE
1 36.6 0.5383791 89.61893 417.9800 521.4
2 31.4 0.5514266 89.48590 360.7694 494.2
3 31.8 0.5607058 89.68650 366.7125 565.2
4 32.8 0.5855966 87.89310 373.9682 519.2
5 28.0 0.6074037 89.66285 346.8787 502.4
6 32.8 0.5767149 88.46255 394.0328 524.6</code></pre>
</div>
<div id="extraindo-e-substituindo-números" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Extraindo e substituindo números</h3>
<p>As funções <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_number()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_num_str.html"><code>replace_number()</code></a> pode ser usado para extrair ou substituir números. Como exemplo, extrairemos o número de cada genótipo em <code>data_g</code>. Por padrão, os números extraídos são colocados como uma nova variável chamada <code>new_var</code> após a última coluna dos dados.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" title="1"><span class="kw">extract_number</span>(data_ge, GEN, <span class="dt">.after =</span> <span class="st">&quot;GEN&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   new_var REP      GY    HM
   &lt;fct&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1          1 1      2.17  44.9
 2 E1    G1          1 2      2.50  46.9
 3 E1    G1          1 3      2.43  47.8
 4 E1    G2          2 1      3.21  45.2
 5 E1    G2          2 2      2.93  45.3
 6 E1    G2          2 3      2.56  45.5
 7 E1    G3          3 1      2.77  46.7
 8 E1    G3          3 2      3.62  43.2
 9 E1    G3          3 3      2.28  47.8
10 E1    G4          4 1      2.36  47.9
# ... with 410 more rows</code></pre>
<p>Se o argumento <code>drop</code> estiver definido como <code>TRUE</code>, apenas a nova variável será mantida e todas as outras serão descartadas.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" title="1"><span class="kw">extract_number</span>(data_ge, GEN, <span class="dt">drop =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 1
   new_var
     &lt;dbl&gt;
 1       1
 2       1
 3       1
 4       2
 5       2
 6       2
 7       3
 8       3
 9       3
10       4
# ... with 410 more rows</code></pre>
<p>Para extrair os resultados em um vetor, use o argumento <code>pull = TRUE</code>. Isso é particularmente útil quando <code>extract_ *</code> ou <code>replace_ *</code> são usados em uma função como <a href="https://tiagoolivoto.github.io/metan/reference/utils_rows_cols.html"><code>add_cols()</code></a>.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" title="1"><span class="kw">extract_number</span>(data_ge, GEN, <span class="dt">pull =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>  [1]  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9
 [26]  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7
 [51]  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5
 [76]  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4
[101]  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2
[126]  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10
[151]  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9
[176]  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7
[201]  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5
[226]  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4
[251]  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2
[276]  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10
[301]  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9
[326]  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5  6  6  6  7  7
[351]  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4  4  4  5  5  5
[376]  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10  1  1  1  2  2  2  3  3  3  4
[401]  4  4  5  5  5  6  6  6  7  7  7  8  8  8  9  9  9 10 10 10</code></pre>

<p>Para substituir números de uma determinada coluna por uma substituição especificada, use <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_number()</code></a>. Por padrão, os números são substituídos por "". O argumento <code>drop</code> e<code>pull</code> também podem ser usados, como mostrado acima.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" title="1"><span class="kw">replace_number</span>(data_ge, GEN)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   REP      GY    HM new_var
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  
 1 E1    G1    1      2.17  44.9 G      
 2 E1    G1    2      2.50  46.9 G      
 3 E1    G1    3      2.43  47.8 G      
 4 E1    G2    1      3.21  45.2 G      
 5 E1    G2    2      2.93  45.3 G      
 6 E1    G2    3      2.56  45.5 G      
 7 E1    G3    1      2.77  46.7 G      
 8 E1    G3    2      3.62  43.2 G      
 9 E1    G3    3      2.28  47.8 G      
10 E1    G4    1      2.36  47.9 G      
# ... with 410 more rows</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" title="1"><span class="kw">replace_number</span>(data_ge,</a>
<a class="sourceLine" id="cb223-2" title="2">               <span class="dt">var =</span> REP,</a>
<a class="sourceLine" id="cb223-3" title="3">               <span class="dt">pattern =</span> <span class="st">&quot;1&quot;</span>,</a>
<a class="sourceLine" id="cb223-4" title="4">               <span class="dt">replacement =</span> <span class="st">&quot;Rep_1&quot;</span>,</a>
<a class="sourceLine" id="cb223-5" title="5">               <span class="dt">new_var =</span> R_ONE,</a>
<a class="sourceLine" id="cb223-6" title="6">               <span class="dt">.after =</span> <span class="st">&quot;REP&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   REP   R_ONE    GY    HM
   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    1     Rep_1  2.17  44.9
 2 E1    G1    2     2      2.50  46.9
 3 E1    G1    3     3      2.43  47.8
 4 E1    G2    1     Rep_1  3.21  45.2
 5 E1    G2    2     2      2.93  45.3
 6 E1    G2    3     3      2.56  45.5
 7 E1    G3    1     Rep_1  2.77  46.7
 8 E1    G3    2     2      3.62  43.2
 9 E1    G3    3     3      2.28  47.8
10 E1    G4    1     Rep_1  2.36  47.9
# ... with 410 more rows</code></pre>
</div>
<div id="extraindo-substituindo-e-removendo-strings" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Extraindo, substituindo e removendo strings</h3>
<p>As funções <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_string()</code></a> e <a href="https://tiagoolivoto.github.io/metan/%20reference%20/%20utils_num_str.html"><code>replace_string()</code></a> são usados no mesmo contexto de <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>extract_number()</code></a> e <a href="https%20:%20//tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_number()</code></a>, mas para lidar com seqüências de caracteres.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" title="1"><span class="kw">extract_string</span>(data_ge, GEN, <span class="dt">.after =</span> <span class="st">&quot;GEN&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   new_var REP      GY    HM
   &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;   &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    G       1      2.17  44.9
 2 E1    G1    G       2      2.50  46.9
 3 E1    G1    G       3      2.43  47.8
 4 E1    G2    G       1      3.21  45.2
 5 E1    G2    G       2      2.93  45.3
 6 E1    G2    G       3      2.56  45.5
 7 E1    G3    G       1      2.77  46.7
 8 E1    G3    G       2      3.62  43.2
 9 E1    G3    G       3      2.28  47.8
10 E1    G4    G       1      2.36  47.9
# ... with 410 more rows</code></pre>

<p>Para substituir strings, podemos usar a função <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>replace_strings()</code></a>.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" title="1"><span class="kw">replace_string</span>(data_ge,</a>
<a class="sourceLine" id="cb227-2" title="2">               <span class="dt">var =</span> GEN,</a>
<a class="sourceLine" id="cb227-3" title="3">               <span class="dt">new_var =</span> GENOTYPE,</a>
<a class="sourceLine" id="cb227-4" title="4">               <span class="dt">replacement =</span> <span class="st">&quot;GENOTYPE_&quot;</span>,</a>
<a class="sourceLine" id="cb227-5" title="5">               <span class="dt">.after =</span> <span class="st">&quot;GEN&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 420 x 6
   ENV   GEN   GENOTYPE   REP      GY    HM
   &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;      &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 E1    G1    GENOTYPE_1 1      2.17  44.9
 2 E1    G1    GENOTYPE_1 2      2.50  46.9
 3 E1    G1    GENOTYPE_1 3      2.43  47.8
 4 E1    G2    GENOTYPE_2 1      3.21  45.2
 5 E1    G2    GENOTYPE_2 2      2.93  45.3
 6 E1    G2    GENOTYPE_2 3      2.56  45.5
 7 E1    G3    GENOTYPE_3 1      2.77  46.7
 8 E1    G3    GENOTYPE_3 2      3.62  43.2
 9 E1    G3    GENOTYPE_3 3      2.28  47.8
10 E1    G4    GENOTYPE_4 1      2.36  47.9
# ... with 410 more rows</code></pre>
<p>Para remover todas as seqüências de caracteres de um quadro de dados, use <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>remove_strings()</code></a>.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" title="1"><span class="kw">remove_strings</span>(data_ge)</a></code></pre></div>
<pre><code># A tibble: 420 x 5
     ENV   GEN   REP    GY    HM
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     1     1  2.17  44.9
 2     1     1     2  2.50  46.9
 3     1     1     3  2.43  47.8
 4     1     2     1  3.21  45.2
 5     1     2     2  2.93  45.3
 6     1     2     3  2.56  45.5
 7     1     3     1  2.77  46.7
 8     1     3     2  3.62  43.2
 9     1     3     3  2.28  47.8
10     1     4     1  2.36  47.9
# ... with 410 more rows</code></pre>

</div>
<div id="formatando-strings" class="section level3">
<h3><span class="header-section-number">7.2.4</span> Formatando strings</h3>
<p>A função <a href="https://tiagoolivoto.github.io/metan/reference/utils_num_str.html"><code>tidy_strings()</code></a> organiza cadeias de caracteres, colunas não numéricas ou quaisquer colunas selecionadas em um quadro de dados, colocando todas as palavras em maiúsculas, substituindo qualquer espaço, tabulação e caracteres de pontuação por <code>_</code> e colocando <code>_</code> entre letras maiúsculas e minúsculas. Considere as seguintes cadeias de caracteres: <code>messy_env</code> por definição deve representar um nível único do ambiente de fator (ambiente 1). <code>messy_gen</code> mostra seis genótipos, e<code>messy_int</code> representa a interação desses genótipos com o ambiente 1.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" title="1">messy_env &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ENV 1&quot;</span>, <span class="st">&quot;Env 1&quot;</span>, <span class="st">&quot;Env1&quot;</span>, <span class="st">&quot;env1&quot;</span>, <span class="st">&quot;Env.1&quot;</span>, <span class="st">&quot;Env_1&quot;</span>)</a>
<a class="sourceLine" id="cb231-2" title="2">messy_gen &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;GEN1&quot;</span>, <span class="st">&quot;gen 2&quot;</span>, <span class="st">&quot;Gen.3&quot;</span>, <span class="st">&quot;gen-4&quot;</span>, <span class="st">&quot;Gen_5&quot;</span>, <span class="st">&quot;GEN_6&quot;</span>)</a>
<a class="sourceLine" id="cb231-3" title="3">messy_int &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Env1Gen1&quot;</span>, <span class="st">&quot;Env1_Gen2&quot;</span>, <span class="st">&quot;env1 gen3&quot;</span>, <span class="st">&quot;Env1 Gen4&quot;</span>, <span class="st">&quot;ENV_1GEN5&quot;</span>, <span class="st">&quot;ENV1GEN6&quot;</span>)</a></code></pre></div>
<p>Esses vetores de caracteres são visualmente confusos. Vamos arrumá-los.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" title="1"><span class="kw">tidy_strings</span>(messy_env)</a></code></pre></div>
<pre><code>[1] &quot;ENV_1&quot; &quot;ENV_1&quot; &quot;ENV_1&quot; &quot;ENV_1&quot; &quot;ENV_1&quot; &quot;ENV_1&quot;</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" title="1"><span class="kw">tidy_strings</span>(messy_gen)</a></code></pre></div>
<pre><code>[1] &quot;GEN_1&quot; &quot;GEN_2&quot; &quot;GEN_3&quot; &quot;GEN_4&quot; &quot;GEN_5&quot; &quot;GEN_6&quot;</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" title="1"><span class="kw">tidy_strings</span>(messy_int)</a></code></pre></div>
<pre><code>[1] &quot;ENV_1_GEN_1&quot; &quot;ENV_1_GEN_2&quot; &quot;ENV_1_GEN_3&quot; &quot;ENV_1_GEN_4&quot; &quot;ENV_1_GEN_5&quot;
[6] &quot;ENV_1_GEN_6&quot;</code></pre>
<p>O <code>tidy_strings()</code> também funciona para arrumar um quadro de dados inteiro ou colunas específicas. Vamos criar um quadro de dados ‘bagunçado’ no contexto de testes de melhoramento de plantas.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" title="1"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb238-2" title="2">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">Env =</span> messy_env,</a>
<a class="sourceLine" id="cb238-3" title="3">             <span class="dt">gen =</span> messy_gen,</a>
<a class="sourceLine" id="cb238-4" title="4">             <span class="dt">Env_GEN =</span> <span class="kw">interaction</span>(Env, gen),</a>
<a class="sourceLine" id="cb238-5" title="5">             <span class="dt">y =</span> <span class="kw">rnorm</span> (<span class="dv">6</span>, <span class="dv">300</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb238-6" title="6">df</a></code></pre></div>
<pre><code># A tibble: 6 x 4
  Env   gen   Env_GEN         y
  &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;       &lt;dbl&gt;
1 ENV 1 GEN1  ENV 1.GEN1   294.
2 Env 1 gen 2 Env 1.gen 2  300.
3 Env1  Gen.3 Env1.Gen.3   291.
4 env1  gen-4 env1.gen-4   302.
5 Env.1 Gen_5 Env.1.Gen_5  293.
6 Env_1 GEN_6 Env_1.GEN_6  318.</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" title="1"><span class="kw">tidy_strings</span>(df)</a></code></pre></div>
<pre><code># A tibble: 6 x 4
  Env   gen   Env_GEN         y
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
1 ENV_1 GEN_1 ENV_1_GEN_1  294.
2 ENV_1 GEN_2 ENV_1_GEN_2  300.
3 ENV_1 GEN_3 ENV_1_GEN_3  291.
4 ENV_1 GEN_4 ENV_1_GEN_4  302.
5 ENV_1 GEN_5 ENV_1_GEN_5  293.
6 ENV_1 GEN_6 ENV_1_GEN_6  318.</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" title="1"><span class="kw">tidy_strings</span>(df, gen)</a></code></pre></div>
<pre><code># A tibble: 6 x 4
  Env   gen   Env_GEN         y
  &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;       &lt;dbl&gt;
1 ENV 1 GEN_1 ENV 1.GEN1   294.
2 Env 1 GEN_2 Env 1.gen 2  300.
3 Env1  GEN_3 Env1.Gen.3   291.
4 env1  GEN_4 env1.gen-4   302.
5 Env.1 GEN_5 Env.1.Gen_5  293.
6 Env_1 GEN_6 Env_1.GEN_6  318.</code></pre>
</div>
</div>
<div id="selecionar-linhas-por-sua-posição" class="section level2">
<h2><span class="header-section-number">7.3</span> Selecionar linhas por sua posição</h2>
<p>A função <code>slice()</code> é usada para selecionar linhas por sua posição ordinal no tibble. Os tibbles agrupados usam a posição ordinal dentro do grupo.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" title="1"><span class="co"># seleciona as três primeiras linhas</span></a>
<a class="sourceLine" id="cb244-2" title="2"><span class="kw">slice</span>(maize, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427
3 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" title="1"><span class="co"># Seleciona as 3 últimas linhas</span></a>
<a class="sourceLine" id="cb246-2" title="2"><span class="kw">slice</span>(maize, <span class="dv">778</span><span class="op">:</span><span class="kw">n</span>())</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A4    H13   III    2.2   0.9   12.1  40.9  92.8  322.   288
2 A4    H13   III    2.15  1.07  10.6  46.0  91.4  300.   305
3 A4    H13   III    2.19  1.12  14.5  51.9 144.   352.   408</code></pre>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" title="1"><span class="co"># seleciona as duas primeiras linhas de cada ambiente</span></a>
<a class="sourceLine" id="cb248-2" title="2">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb248-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb248-4" title="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code># A tibble: 8 x 10
# Groups:   AMB [4]
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427
3 A2    H1    I      3.06  1.89  18.2  54.4  244.  421.   581
4 A2    H1    I      3.04  1.89  15.4  53.4  193.  369.   523
5 A3    H1    I      2.12  1.03  18.5  52.0  214.  382.   560
6 A3    H1    I      2     1.05  19.9  53.3  253.  444.   570
7 A4    H1    I      2.13  1.1   12.8  47.6  144.  280.   516
8 A4    H1    I      2.3   1.25  13.1  50.0  140.  230.   609</code></pre>
</div>
<div id="combinando-os-verbos-para-manipulação" class="section level2">
<h2><span class="header-section-number">7.4</span> Combinando os verbos para manipulação</h2>
<p>Esta sessão tem o objetivo de demonstrar como os <em>verbos</em> <strong>dplyr</strong> em conjunto com as funções <code>spread()</code> do pacote <a href="https://tidyr.tidyverse.org/">tidyr</a><a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a> e <code>column_to_rownames()</code>  do pacote <a href="https://www.tidyverse.org/packages/">tibble</a><a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a> podem ser combinados para construir uma matriz dupla entrada onde as linhas correspondem aos genótipos e as colunas correspondem aos ambientes. Esta matriz será preenchida com o valor médio da MGRA considerando apenas as duas primeiras repetições de cada híbrido em cada ambiente.



</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" title="1">maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-2" title="2"><span class="st">  </span><span class="kw">filter</span>(REP <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;II&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(AMB, HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">MGRA_me =</span> <span class="kw">mean</span>(MGRA)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-5" title="5"><span class="st">  </span><span class="kw">spread</span>(AMB, MGRA_me) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-6" title="6"><span class="st">  </span><span class="kw">column_to_rownames</span>(<span class="st">&quot;HIB&quot;</span>)</a></code></pre></div>
<pre><code>          A1       A2       A3       A4
H1  200.2324 193.7994 147.2241 195.1622
H10 185.0601 151.2758 116.9737 179.5325
H11 199.2856 168.6739 127.1498 169.4995
H12 174.4662 136.1734 153.0679 190.8522
H13 221.9482 158.2540 186.4972 166.9575
H2  204.9377 218.7569 160.6031 155.5251
H3  201.3172 200.5845 146.4285 147.6595
H4  204.3560 193.3265 150.0455 182.1166
H5  189.5024 180.1033 147.1086 208.6737
H6  238.1798 204.4870 127.4491 164.3174
H7  184.8208 148.1951 146.3534 195.3675
H8  198.2184 115.9920 148.6665 181.9194
H9  203.4182 107.2212 117.3108 154.8263</code></pre>
</div>
<div id="trabalhando-com-duas-tabelas-ao-mesmo-tempo" class="section level2">
<h2><span class="header-section-number">7.5</span> Trabalhando com duas tabelas ao mesmo tempo</h2>
<div id="junções-com-mutação-de-dados" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Junções com mutação de dados</h3>
<p>É raro que uma análise de dados envolva apenas uma única tabela de dados. Na prática, diversas tabela podem existir e ferramentas flexíveis para combiná-las são necessárias. No <strong>dplyr</strong>, existem três famílias de <strong>verbos</strong> que permitem trabalhar com duas tabelas ao mesmo tempo, permitindo: (i) juntar tabelas, (ii) Filtrar registros e (iii) realizar operações.</p>
<p>Os seguintes códigos criam três novos conjuntos de dados. <strong>maize2</strong> contém dados de duas repetições para os híbridos H1:H5 nos ambientes H1 e H2. <strong>mean_h</strong> e <strong>mean_a</strong> contém as médias para os híbridos e ambientes, respectivamente. </p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" title="1">maize2 &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb252-2" title="2"><span class="st">  </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-3" title="3"><span class="st">  </span><span class="kw">filter</span>(HIB <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;H1&quot;</span>, <span class="st">&quot;H2&quot;</span>, <span class="st">&quot;H3&quot;</span>,<span class="st">&quot;H4&quot;</span>,<span class="st">&quot;H5&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-4" title="4"><span class="st">  </span><span class="kw">filter</span>(AMB <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;A2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-5" title="5"><span class="st">  </span><span class="kw">group_by</span>(AMB, HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-6" title="6"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, mean)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb252-8" title="8"></a>
<a class="sourceLine" id="cb252-9" title="9">mean_h &lt;-<span class="st"> </span>maize2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-10" title="10"><span class="st">  </span><span class="kw">group_by</span>(HIB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-11" title="11"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, <span class="dt">.funs =</span> <span class="kw">c</span>(<span class="dt">m =</span>mean))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-12" title="12"><span class="st">  </span><span class="kw">select</span>(HIB, <span class="kw">contains</span>(<span class="st">&quot;A&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-13" title="13"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb252-14" title="14"></a>
<a class="sourceLine" id="cb252-15" title="15">mean_a &lt;-<span class="st"> </span>maize2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-16" title="16"><span class="st">  </span><span class="kw">group_by</span>(AMB) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-17" title="17"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, <span class="dt">.funs =</span> <span class="kw">c</span>(<span class="dt">m =</span>mean))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-18" title="18"><span class="st">  </span><span class="kw">select</span>(AMB, <span class="kw">contains</span>(<span class="st">&quot;ES&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-19" title="19"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<ul>
<li>Juntando a coluna <strong>MGRA_m</strong> da tabela <strong>mean_h</strong> na tabela <strong>maize2</strong> considerando as variáveis com mesmo nome nas duas tabelas (neste caso, HIB)</li>
</ul>

<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" title="1"><span class="kw">left_join</span>(maize2, mean_h <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb253-2" title="2"><span class="st">            </span><span class="kw">select</span>(HIB, MGRA_m))</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA MGRA_m
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 A1    H1     2.72  1.68  15.4  51.1  203.  382.  527.   195.
 2 A1    H2     2.79  1.34  15.0  51.9  204.  329.  622.   211.
 3 A1    H3     2.94  1.59  15.5  51.8  198.  325.  610.   195.
 4 A1    H4     2.87  1.68  16.0  50.7  202.  338.  603.   200.
 5 A1    H5     2.83  1.59  15.8  49.9  193.  356.  539.   189.
 6 A2    H1     2.93  1.80  15.0  51.9  188.  389.  484.   195.
 7 A2    H2     2.95  1.74  16.0  53.2  219.  416.  531.   211.
 8 A2    H3     2.94  1.75  15.3  50.3  191.  400.  475.   195.
 9 A2    H4     2.85  1.63  16.5  49.4  197.  389.  510.   200.
10 A2    H5     2.70  1.42  16.5  48.1  186.  333.  560.   189.</code></pre>
<ul>
<li>Juntando as colunas da tabela <strong>mean_g</strong> na tabela <strong>maize2</strong></li>
</ul>

<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" title="1"><span class="kw">full_join</span>(maize2, mean_a)</a></code></pre></div>
<pre><code># A tibble: 10 x 12
   AMB   HIB    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA AIES_m CESP_m DIES_m
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 A1    H1     2.72  1.68  15.4  51.1  203.  382.  527.   1.58   15.5   51.1
 2 A1    H2     2.79  1.34  15.0  51.9  204.  329.  622.   1.58   15.5   51.1
 3 A1    H3     2.94  1.59  15.5  51.8  198.  325.  610.   1.58   15.5   51.1
 4 A1    H4     2.87  1.68  16.0  50.7  202.  338.  603.   1.58   15.5   51.1
 5 A1    H5     2.83  1.59  15.8  49.9  193.  356.  539.   1.58   15.5   51.1
 6 A2    H1     2.93  1.80  15.0  51.9  188.  389.  484.   1.67   15.9   50.6
 7 A2    H2     2.95  1.74  16.0  53.2  219.  416.  531.   1.67   15.9   50.6
 8 A2    H3     2.94  1.75  15.3  50.3  191.  400.  475.   1.67   15.9   50.6
 9 A2    H4     2.85  1.63  16.5  49.4  197.  389.  510.   1.67   15.9   50.6
10 A2    H5     2.70  1.42  16.5  48.1  186.  333.  560.   1.67   15.9   50.6</code></pre>
</div>
<div id="junções-com-filtragem-de-dados" class="section level3">
<h3><span class="header-section-number">7.5.2</span> Junções com filtragem de dados</h3>
<ul>
<li>Filtrando as linhas da tabela <strong>maize</strong> com base nas variáveis que combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" title="1"><span class="kw">semi_join</span>(maize, mean_h)</a></code></pre></div>
<pre><code># A tibble: 300 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582
# ... with 290 more rows</code></pre>
<ul>
<li>Filtrando as linhas da tabela <strong>maize</strong> com base nas variáveis que <strong>NÃO</strong> combinam na tabela <strong>mean_h</strong> (neste caso, a coluna HIB) </li>
</ul>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" title="1"><span class="kw">anti_join</span>(maize, mean_h)</a></code></pre></div>
<pre><code># A tibble: 480 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H6    I      2.89  1.71  17.2  53.3  219.  384.   570
 2 A1    H6    I      2.91  1.47  17.1  57.3  280.  420.   665
 3 A1    H6    I      2.88  1.39  16.5  53.2  224.  358.   627
 4 A1    H6    I      2.89  1.73  16.7  54.5  243.  377.   644
 5 A1    H6    I      2.92  1.64  18    56.0  289.  393.   734
 6 A1    H6    II     1.97  1.63  17.1  54.7  230.  375.   614
 7 A1    H6    II     2.93  1.56  14    49.8  165.  307.   537
 8 A1    H6    II     2.97  1.85  17.2  53.8  255.  432.   591
 9 A1    H6    II     2.89  1.81  17.7  53.2  240.  468.   513
10 A1    H6    II     2.93  1.6   18    53.9  237.  432.   549
# ... with 470 more rows</code></pre>
</div>
<div id="operações-com-conjuntos" class="section level3">
<h3><span class="header-section-number">7.5.3</span> Operações com conjuntos</h3>
<p>Nesta seção será demonstrado como é possivel utilizar operações de cojuntos como interseção e união. É esperado que as entradas x e y tenham as mesmas variáveis. Para isto, vamos criar dois novos conjuntos de dados chamados <strong>data_1_to_5</strong> e <strong>data_3_to_10</strong>, quais contém, respectivamente as cinco primeiras linhas
e as linhas 3 a 10 de <strong>maize</strong>. Note que a função <code>slice()</code>  é utilizada para selecionar as linhas com base em sua posição.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" title="1">data_<span class="dv">1</span>_to_<span class="dv">5</span> =<span class="st"> </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb261-2" title="2"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb261-3" title="3">data_<span class="dv">3</span>_to_<span class="dv">10</span> =<span class="st"> </span>maize <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb261-4" title="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div id="interseção-de-conjuntos" class="section level4">
<h4><span class="header-section-number">7.5.3.1</span> Interseção de conjuntos</h4>
<p>A função <code>intersect()</code> (interseção de conjunto) retorna somente as linhas presentes nos dois conjuntos, neste caso, as linhas 3, 4 and 5 do conjunto <strong>maize</strong></p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" title="1"><span class="kw">intersect</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 3 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.69  1.52  16.5  54.7  230.  464.   497
2 A1    H1    I      2.8   1.64  16.8  52.0  213.  408.   523
3 A1    H1    I      2.62  1.55  15.9  51.6  224.  406.   551</code></pre>
</div>
<div id="união-de-conjuntos" class="section level4">
<h4><span class="header-section-number">7.5.3.2</span> União de conjuntos</h4>
<p>A função <code>union()</code> (união de conjunto) junta os dois conjuntos sem que haja duplicação de registros.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" title="1"><span class="kw">union</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 10 x 10
   AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A1    H1    I      2.45  2.39  16.9  52.1 228.   375.   609
 2 A1    H1    I      2.5   1.43  14.4  50.7 187.   437.   427
 3 A1    H1    I      2.69  1.52  16.5  54.7 230.   464.   497
 4 A1    H1    I      2.8   1.64  16.8  52.0 213.   408.   523
 5 A1    H1    I      2.62  1.55  15.9  51.6 224.   406.   551
 6 A1    H1    II     2.12  1.8   15    51.4 203.   383.   529
 7 A1    H1    II     3.15  1.78  10.9  41.9  75.2  256.   294
 8 A1    H1    II     2.97  1.84  15    53.4 204.   387.   528
 9 A1    H1    II     3.1   1.78  13.6  50.8 187.   348.   538
10 A1    H1    II     3.02  1.6   16.3  53.9 250.   430.   582</code></pre>
</div>
<div id="diferença-de-conjuntos" class="section level4">
<h4><span class="header-section-number">7.5.3.3</span> Diferença de conjuntos</h4>
<p>A função <code>setdiff()</code>  (diferença de conjunto, ou complementar) cria uma tabela somente com os registros em <strong>data_1_to_5</strong> que não estão em <strong>data_3_to_10</strong>.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" title="1"><span class="kw">setdiff</span>(data_<span class="dv">1</span>_to_<span class="dv">5</span>, data_<span class="dv">3</span>_to_<span class="dv">10</span>)</a></code></pre></div>
<pre><code># A tibble: 2 x 10
  AMB   HIB   REP    APLA  AIES  CESP  DIES  MGRA   MMG  NGRA
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A1    H1    I      2.45  2.39  16.9  52.1  228.  375.   609
2 A1    H1    I      2.5   1.43  14.4  50.7  187.  437.   427</code></pre>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="21">
<li id="fn21"><p><a href="https://tidyr.tidyverse.org/" class="uri">https://tidyr.tidyverse.org/</a><a href="manipula.html#fnref21" class="footnote-back">↩</a></p></li>
<li id="fn22"><p><a href="https://www.tidyverse.org/packages/" class="uri">https://www.tidyverse.org/packages/</a><a href="manipula.html#fnref22" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="entrada.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graph.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
