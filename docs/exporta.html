<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 9 Exportando dados | Software R para avaliação de dados experimentais</title>
<meta name="author" content="Tiago Olivoto, Bruno Giacomini Sari">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.17/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><script src="libs/jszip-1.10.20/jszip.min.js"></script><link href="libs/dt-ext-buttons-1.10.20/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-buttons-1.10.20/js/dataTables.buttons.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.flash.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.html5.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.colVis.min.js"></script><script src="libs/dt-ext-buttons-1.10.20/js/buttons.print.min.js"></script><link href="libs/dt-ext-fixedcolumns-1.10.20/css/fixedColumns.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-fixedcolumns-1.10.20/js/dataTables.fixedColumns.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Um foco em experimentos agronômicos">Software R para avaliação de dados experimentais</a>:
        <small class="text-muted">Um foco em experimentos agronômicos</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefácio</a></li>
<li><a class="" href="sobre-os-autores.html">Sobre os autores</a></li>
<li><a class="" href="detalhes-importantes.html">Detalhes importantes</a></li>
<li class="book-part">O ambiente R</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introdução ao ambiente R</a></li>
<li><a class="" href="objects.html"><span class="header-section-number">2</span> Tipos de objetos</a></li>
<li><a class="" href="math.html"><span class="header-section-number">3</span> Operações matemáticas</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">4</span> Loops</a></li>
<li><a class="" href="dataframe.html"><span class="header-section-number">5</span> Construindo uma tabela</a></li>
<li class="book-part">Organização, manipulação e apresentação de dados</li>
<li><a class="" href="entrada.html"><span class="header-section-number">6</span> Entrada de dados</a></li>
<li><a class="" href="manipula.html"><span class="header-section-number">7</span> Manipulação de dados</a></li>
<li><a class="" href="graph.html"><span class="header-section-number">8</span> Gráficos com o pacote ggplot2</a></li>
<li><a class="active" href="exporta.html"><span class="header-section-number">9</span> Exportando dados</a></li>
<li class="book-part">Análise de dados</li>
<li><a class="" href="analdata.html"><span class="header-section-number">10</span> Análise de dados experimentais</a></li>
<li><a class="" href="reg.html"><span class="header-section-number">11</span> Análise de regressão</a></li>
<li><a class="" href="relations.html"><span class="header-section-number">12</span> Relações lineares entre variáveis</a></li>
<li><a class="" href="multivariate.html"><span class="header-section-number">13</span> Análise multivariada</a></li>
<li><a class="" href="interaction.html"><span class="header-section-number">14</span> Interação genótipo-vs-ambiente</a></li>
<li class="book-part">Apêndices</li>
<li><a class="" href="resposta-dos-exerc%C3%ADcios.html"><span class="header-section-number">A</span> Resposta dos exercícios</a></li>
<li><a class="" href="tabela-de-distribui%C3%A7%C3%B5es.html"><span class="header-section-number">B</span> Tabela de distribuições</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/TiagoOlivoto/e-bookr">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="exporta" class="section level1" number="9">
<h1>
<span class="header-section-number">Capítulo 9</span> Exportando dados<a class="anchor" aria-label="anchor" href="#exporta"><i class="fas fa-link"></i></a>
</h1>
<p>Será demonstrado nessa seção como exportar dados e tabelas gerados dentro do <em>software R</em>. Quanto a saída de resultados, será dado enfase a saídas com extensões <code>.csv</code>, <code>.txt</code> e <code>.xlsx</code>. Quanto aos gráficos, será mostrado como salvar figuras em alta resolução.</p>
<div id="exportando-com-diferentes-extensões" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Exportando com diferentes extensões<a class="anchor" aria-label="anchor" href="#exportando-com-diferentes-extens%C3%B5es"><i class="fas fa-link"></i></a>
</h2>
<p>A função <code><a href="https://rdrr.io/pkg/rio/man/export.html">export()</a></code> d pacote <code>rio</code> (<a href="https://cran.r-project.org/web/packages/rio/index.html" class="uri">https://cran.r-project.org/web/packages/rio/index.html</a>) pode ser utilizada para exportar objetos do R em arquivos dos mais diversos formatos.</p>
<p>Em arquivos <code>.csv</code>, os valores são separados por vírgula. No exemplo abaixo, é mostrado como o objeto <code>quantitativo</code> pode ser salvo em um arquivo <code>.csv</code> com nome <code>quanti_exemplo</code>. Para salvar as saídas em extensão <code>.txt</code> ou <code>.xlsx</code>, basta substituir a extensão do arquivo.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/TiagoOlivoto/e-bookr/raw/master/data/data_R.xlsx"</span>
<span class="va">quanti</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="va">url</span>, sheet <span class="op">=</span> <span class="st">"QUANTI"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">quanti</span><span class="op">)</span>
<span class="co"># exportar para o diretóri padrão (csv)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="va">quanti</span>, file <span class="op">=</span> <span class="st">"quanti_exemplo.csv"</span><span class="op">)</span>
<span class="co"># exportar para o diretóri padrão (txt)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="va">quanti</span>, file <span class="op">=</span> <span class="st">"quanti_exemplo.txt"</span><span class="op">)</span>
<span class="co"># exportar para o diretóri padrão (xslx)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="va">quanti</span>, file <span class="op">=</span> <span class="st">"quanti_exemplo.xlsx"</span><span class="op">)</span></code></pre></div>
<p>No formato <code>.xlsx</code> é possível informar em qual planilha o objeto será salvo. Neste caso, as planilhas existentes não serão modificadas.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="va">quanti</span>, file <span class="op">=</span> <span class="st">"quanti_exemplo.xlsx"</span>, which <span class="op">=</span> <span class="st">"quanti2"</span><span class="op">)</span></code></pre></div>
<p>Também é possível salvar diferentes objetos em diferentes planilhas do mesmo arquivo. Vamos considerar que cada nível do fator <code>TIPO</code> do objeto <code>quanti</code> deve ser salvo em uma planilha diferente.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">quanti</span>, <span class="va">TIPO</span> <span class="op">==</span> <span class="st">"LINEAR"</span><span class="op">)</span>
<span class="va">quadratico</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">quanti</span>, <span class="va">TIPO</span> <span class="op">==</span> <span class="st">"QUADRÁTICA"</span><span class="op">)</span>
<span class="va">cubico</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">quanti</span>, <span class="va">TIPO</span> <span class="op">==</span> <span class="st">"CÚBICA"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>linear <span class="op">=</span> <span class="va">linear</span>,
            quadratico <span class="op">=</span> <span class="va">quadratico</span>, 
            cubico <span class="op">=</span> <span class="va">cubico</span><span class="op">)</span>,
       file <span class="op">=</span> <span class="st">"quanti_exemplo_plan.xlsx"</span><span class="op">)</span></code></pre></div>
<p>Neste caso, um arquivo chamado <code>quanti_exemplo_plan.xlsx</code> contendo as planilhas <code>linear</code>, <code>quadratico</code> e <code>cubico</code> foi criado no diretório padrão.</p>
</div>
<div id="exportanto-gráficos" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Exportanto gráficos<a class="anchor" aria-label="anchor" href="#exportanto-gr%C3%A1ficos"><i class="fas fa-link"></i></a>
</h2>
<p>Os gráficos podem ser exportados clicando em <em>Export</em>  no <em>output</em> dos gráficos. Você pode escolher entre salvar como imagem ou como PDF. Os formatos de imagem disponíveis são: .PNG, .TIFF, .JPEG, .BMP , .SVG  e .ESP . A outra opção é salvar em um arquivo PDF . A principal diferença entre estes formatos é o método de renderização utilizado na formação do gráfico. Existem basicamente dois métodos de renderização de imagens: <em>raster images</em> e <em>vector-based images</em>. Imagens rasterizadas usam muitos pixels coloridos ou blocos de construção individuais para formar uma imagem completa. JPEGs, GIFs e PNGs e TIFFs são tipos de imagem raster mais comuns. Como as imagens raster são criadas usando um número fixo de pixels coloridos, elas não podem ser redimensionadas drasticamente sem comprometer sua resolução. Quando esticados para caber em um espaço que eles não foram projetados para preencher, seus pixels ficam visivelmente granulados e a imagem é distorcida. É importante que você salve os arquivos <em>raster</em> precisamente nas dimensões necessárias e com a devida resolução para uma boa apresentação. Para salvar estas imagens é necessário informar a <em>Density of Pixels per Inch</em> (DPI) , ou seja, quantos pontos por polegada quadrada deverá conter a imagem. Quanto maior este valor, maior será a qualidade da imagem e também maior será seu tamanho (em Mb).</p>
<p>Imagens vetoriais (<em>vector-based graphics</em>), por outro lado, permitem mais flexibilidade. Construídos usando fórmulas matemáticas em vez de blocos coloridos individuais, os tipos de arquivos vetoriais, como .PDF e .EPS *, são excelentes para criar gráficos de alta resolução sem que seu redimensionamento prejudique a qualidade do gráfico. A maioria das revistas cintíficas aceitam todos estes tipos de formatos. Na dúvida, escolha sempre o formato .PDF (ou .EPS)!</p>
<div class="figure">
<img src="figures/Figura.png" alt=""><p class="caption">Salvando figuras como imagens</p>
</div>
<div class="figure">
<img src="figures/Figura2.png" alt=""><p class="caption">Salvando figuras em PDF</p>
</div>
<p>Uma alternativa prática para salvar em pdf as imagens é através da função <code><a href="https://rdrr.io/r/grDevices/pdf.html">pdf()</a></code>. Os argumentos <code>width</code> e <code>height</code> correspondem a dimensão da figura (em polegadas) e <code>pointsize</code> corresponde ao tamanho da fonte. </p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"Figura1.pdf"</span>, width <span class="op">=</span> <span class="fl">5</span>, height <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dados_oat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">RG</span>, y <span class="op">=</span> <span class="va">PH</span>, colour <span class="op">=</span> <span class="va">AMB</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">+</span>
      <span class="fu">my_theme</span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Rendimento de grãos"</span>, y <span class="op">=</span> <span class="st">"Peso hectolitro"</span><span class="op">)</span>
<span class="va">p1</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>A função <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>  também pode ser utilizada para salvar os gráficos para o diretório de trabalho. Por padrão, esta função salva o último gráfico mostrado. Para salvar-mos o gráfico p1, gerado anteriormente, basta executar o seguinte comando.</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"Figure_ggsave.pdf"</span>, <span class="va">p1</span><span class="op">)</span></code></pre></div>
<p><strong>Exportando figuras como imagens em alta qualidade</strong></p>
<p>Com as funções <code><a href="https://rdrr.io/r/grDevices/png.html">tiff()</a></code> , <code><a href="https://rdrr.io/r/grDevices/png.html">png()</a></code> , <code><a href="https://rdrr.io/r/grDevices/png.html">jpeg()</a></code>  e <code><a href="https://rdrr.io/r/grDevices/png.html">bmp()</a></code>  é possível salvar gráficos como imagem em alta resolução. Como na função <code><a href="https://rdrr.io/r/grDevices/pdf.html">pdf()</a></code> , <code>width</code> e <code>height</code> correspondem a dimensão. Porém, nestas funções é possível escolher a unidade através do argumento <code>units</code> e a resolução através do argumento <code>res</code>.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">tiff</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"Figura3.tiff"</span>, width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">8</span>, 
     units <span class="op">=</span> <span class="st">"cm"</span>,pointsize <span class="op">=</span> <span class="fl">12</span>, <span class="st">"lzw"</span>,res <span class="op">=</span> <span class="fl">1200</span><span class="op">)</span>
<span class="va">p1</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"Figura3.png"</span>,width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">8</span>, 
     units <span class="op">=</span> <span class="st">"cm"</span>,pointsize <span class="op">=</span> <span class="fl">12</span>, <span class="st">"lzw"</span>,res <span class="op">=</span> <span class="fl">1200</span><span class="op">)</span>
<span class="va">p1</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">jpeg</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"Figura3.jpeg"</span>,width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">8</span>, 
     units <span class="op">=</span> <span class="st">"cm"</span>,pointsize <span class="op">=</span> <span class="fl">12</span>, <span class="st">"lzw"</span>,res <span class="op">=</span> <span class="fl">1200</span><span class="op">)</span>
<span class="va">p1</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">bmp</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"Figura3.bmp"</span>,width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">8</span>, 
     units <span class="op">=</span> <span class="st">"cm"</span>,pointsize <span class="op">=</span> <span class="fl">12</span>, <span class="st">"lzw"</span>,res <span class="op">=</span> <span class="fl">1200</span><span class="op">)</span>
<span class="va">p1</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="graph.html"><span class="header-section-number">8</span> Gráficos com o pacote ggplot2</a></div>
<div class="next"><a href="analdata.html"><span class="header-section-number">10</span> Análise de dados experimentais</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#exporta"><span class="header-section-number">9</span> Exportando dados</a></li>
<li><a class="nav-link" href="#exportando-com-diferentes-extens%C3%B5es"><span class="header-section-number">9.1</span> Exportando com diferentes extensões</a></li>
<li><a class="nav-link" href="#exportanto-gr%C3%A1ficos"><span class="header-section-number">9.2</span> Exportanto gráficos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/TiagoOlivoto/e-bookr/blob/master/09-export.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/TiagoOlivoto/e-bookr/edit/master/09-export.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Software R para avaliação de dados experimentais</strong>: Um foco em experimentos agronômicos" was written by Tiago Olivoto, Bruno Giacomini Sari. It was last built on 2021-01-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
